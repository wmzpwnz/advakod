# ðŸ” ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ Ð¤Ð ÐžÐÐ¢Ð•ÐÐ”Ð ÐÐ Ð¡ÐÐ™Ð¢Ð•

## â“ ÐŸÐ¾Ñ‡ÐµÐ¼Ñƒ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´ Ð¼Ð¾Ð¶ÐµÑ‚ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð½Ð° ÑÐ°Ð¹Ñ‚Ðµ?

### 1. **ÐÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ API URL Ð² Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½ Ð±Ð¸Ð»Ð´Ðµ**

ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Ð¤Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´ ÑÐ¾Ð±Ñ€Ð°Ð½ Ñ `localhost:8000` Ð²Ð¼ÐµÑÑ‚Ð¾ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð´Ð¾Ð¼ÐµÐ½Ð°.

#### âœ… Ð Ð•Ð¨Ð•ÐÐ˜Ð•:

ÐŸÐµÑ€ÐµÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´ Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¼Ð¸ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ:

```bash
# ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ:
cd /path/to/advakod

# Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ .env.production Ð´Ð»Ñ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð°
cat > frontend/.env.production << 'EOF'
REACT_APP_API_URL=https://advacodex.com
REACT_APP_WS_URL=wss://advacodex.com
REACT_APP_ENV=production
EOF

# ÐŸÐµÑ€ÐµÑÐ¾Ð±Ð¸Ñ€Ð°ÐµÐ¼ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´
cd frontend
npm run build

# Ð˜Ð»Ð¸ Ñ‡ÐµÑ€ÐµÐ· Docker:
docker-compose -f docker-compose.prod.yml build frontend
docker-compose -f docker-compose.prod.yml up -d frontend
```

---

## 2. **CORS Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹**

ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Backend Ð±Ð»Ð¾ÐºÐ¸Ñ€ÑƒÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ñ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð°.

#### âœ… Ð Ð•Ð¨Ð•ÐÐ˜Ð•:

ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ Ð² `backend/.env`:

```bash
# Ð”Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð²Ð°Ñˆ Ð´Ð¾Ð¼ÐµÐ½ Ð² CORS
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
ENVIRONMENT=production
```

ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ backend:
```bash
docker-compose -f docker-compose.prod.yml restart backend
```

---

## 3. **SSL/HTTPS Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹**

ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Mixed content (HTTPS ÑÐ°Ð¹Ñ‚ Ð¿Ñ‹Ñ‚Ð°ÐµÑ‚ÑÑ Ð¾Ð±Ñ€Ð°Ñ‰Ð°Ñ‚ÑŒÑÑ Ðº HTTP API).

#### âœ… Ð Ð•Ð¨Ð•ÐÐ˜Ð•:

Ð£Ð±ÐµÐ´Ð¸Ñ‚ÐµÑÑŒ Ñ‡Ñ‚Ð¾:
- Frontend: `REACT_APP_API_URL=https://...` (ÐÐ• http://)
- WebSocket: `REACT_APP_WS_URL=wss://...` (ÐÐ• ws://)
- Nginx Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½ Ð½Ð° SSL

---

## 4. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸**

### ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ:

```bash
# 1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° backend
curl https://yourdomain.com/api/v1/health
# Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ: {"status":"healthy",...}

# 2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð°
curl https://yourdomain.com
# Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ HTML ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñƒ

# 3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° CORS
curl -H "Origin: https://yourdomain.com" \
     -H "Access-Control-Request-Method: POST" \
     -H "Access-Control-Request-Headers: Content-Type" \
     -X OPTIONS https://yourdomain.com/api/v1/auth/login
# Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ CORS Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²ÐºÐ¸

# 4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð»Ð¾Ð³Ð¾Ð²
docker-compose -f docker-compose.prod.yml logs frontend
docker-compose -f docker-compose.prod.yml logs backend
docker-compose -f docker-compose.prod.yml logs nginx
```

---

## 5. **Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ñ„Ð¸ÐºÑ - Ð¿ÐµÑ€ÐµÑÐ±Ð¾Ñ€ÐºÐ° Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð°**

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð: ÐÐ° Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ð¼Ð°ÑˆÐ¸Ð½Ðµ

```bash
# 1. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ .env Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½Ð°
cd /Users/macbook/Desktop/advakod/frontend

# 2. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ .env.production
cat > .env.production << 'EOF'
REACT_APP_API_URL=https://yourdomain.com
REACT_APP_WS_URL=wss://yourdomain.com
REACT_APP_ENV=production
EOF

# 3. ÐŸÐµÑ€ÐµÑÐ¾Ð±ÐµÑ€Ð¸Ñ‚Ðµ
npm run build

# 4. Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ build Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€
scp -r build/ user@server:/path/to/advakod/frontend/

# 5. ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ nginx
docker-compose -f docker-compose.prod.yml restart nginx
```

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð‘: ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ

```bash
# SSH Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€
ssh user@your-server

cd /path/to/advakod

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ .env.production Ð´Ð»Ñ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð°
cat > frontend/.env.production << 'EOF'
REACT_APP_API_URL=https://yourdomain.com
REACT_APP_WS_URL=wss://yourdomain.com
REACT_APP_ENV=production
EOF

# ÐŸÐµÑ€ÐµÑÐ¾Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‡ÐµÑ€ÐµÐ· Docker
docker-compose -f docker-compose.prod.yml build frontend
docker-compose -f docker-compose.prod.yml up -d frontend

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ nginx
docker-compose -f docker-compose.prod.yml restart nginx
```

---

## 6. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ api.js**

ÐÐ°Ñˆ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¹ `frontend/src/config/api.js` Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ:

```javascript
// âœ… ÐŸÐ ÐÐ’Ð˜Ð›Ð¬ÐÐž - Ñ‡Ð¸Ñ‚Ð°ÐµÑ‚ Ð¸Ð· .env.production Ð¿Ñ€Ð¸ ÑÐ±Ð¾Ñ€ÐºÐµ
export const API_BASE_URL = process.env.REACT_APP_API_URL 
  ? `${process.env.REACT_APP_API_URL}/api/v1`
  : 'http://localhost:8000/api/v1';
```

Ð­Ñ‚Ð¾ Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ Ð¿Ñ€Ð¸ ÑÐ±Ð¾Ñ€ÐºÐµ Ñ `.env.production` URL Ð±ÑƒÐ´ÐµÑ‚ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹!

---

## 7. **Ð”ÐµÐ±Ð°Ð³ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ**

ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ ÑÐ°Ð¹Ñ‚ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ:

### Ð) Console (F12 â†’ Console)
```javascript
// ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÐºÐ°ÐºÐ¾Ð¹ API URL Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´
console.log('API URL:', window.location.origin);
```

Ð˜Ñ‰Ð¸Ñ‚Ðµ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ñ‚Ð¸Ð¿Ð°:
- `Mixed Content` - Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ Ð¿Ñ‹Ñ‚Ð°ÐµÑ‚ÑÑ Ð¾Ð±Ñ€Ð°Ñ‚Ð¸Ñ‚ÑŒÑÑ Ðº http Ð²Ð¼ÐµÑÑ‚Ð¾ https
- `CORS Error` - Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ backend Ð±Ð»Ð¾ÐºÐ¸Ñ€ÑƒÐµÑ‚ Ð´Ð¾Ð¼ÐµÐ½
- `Failed to fetch` - Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ backend Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½

### Ð‘) Network (F12 â†’ Network)
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ðº `/api/v1/*`
- Ð¡Ñ‚Ð°Ñ‚ÑƒÑ 200 = ÐžÐš
- Ð¡Ñ‚Ð°Ñ‚ÑƒÑ 404 = Ð¿ÑƒÑ‚ÑŒ Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹
- Ð¡Ñ‚Ð°Ñ‚ÑƒÑ 403/401 = Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð° Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸ÐµÐ¹
- Ð¡Ñ‚Ð°Ñ‚ÑƒÑ 500 = Ð¾ÑˆÐ¸Ð±ÐºÐ° Ð½Ð° backend

---

## 8. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Nginx**

ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ nginx ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ:

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ„Ð¸Ð³Ð°
docker exec advakod_nginx nginx -t

# Ð•ÑÐ»Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ¸, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿ÑƒÑ‚Ð¸:
docker exec advakod_nginx cat /etc/nginx/nginx.conf | grep location

# ÐŸÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° nginx
docker-compose -f docker-compose.prod.yml restart nginx
```

---

## ðŸŽ¯ ÐŸÐžÐ›ÐÐÐ¯ ÐŸÐžÐ¡Ð›Ð•Ð”ÐžÐ’ÐÐ¢Ð•Ð›Ð¬ÐÐžÐ¡Ð¢Ð¬ Ð”Ð•Ð™Ð¡Ð¢Ð’Ð˜Ð™

### ÐÐ° Ð²Ð°ÑˆÐµÐ¹ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ð¼Ð°ÑˆÐ¸Ð½Ðµ (advakod):

```bash
cd /Users/macbook/Desktop/advakod

# 1. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ production .env Ð´Ð»Ñ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð°
cat > frontend/.env.production << 'EOF'
REACT_APP_API_URL=https://Ð’ÐÐ¨_Ð”ÐžÐœÐ•Ð.com
REACT_APP_WS_URL=wss://Ð’ÐÐ¨_Ð”ÐžÐœÐ•Ð.com
REACT_APP_ENV=production
EOF

# 2. ÐŸÐµÑ€ÐµÑÐ¾Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´
cd frontend
npm run build

# 3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ‡Ñ‚Ð¾ build ÑÐ¾Ð·Ð´Ð°Ð»ÑÑ
ls -la build/
```

### ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ:

```bash
# 1. Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ build (Ñ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ð¼Ð°ÑˆÐ¸Ð½Ñ‹)
scp -r /Users/macbook/Desktop/advakod/frontend/build/ user@server:/path/to/advakod/frontend/

# 2. Ð˜Ð»Ð¸ Ð¿ÐµÑ€ÐµÑÐ¾Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ:
ssh user@server
cd /path/to/advakod
docker-compose -f docker-compose.prod.yml build frontend
docker-compose -f docker-compose.prod.yml up -d frontend

# 3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ backend .env
cat backend/.env | grep CORS_ORIGINS
# Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ: CORS_ORIGINS=https://Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.com

# 4. ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ Ð²ÑÑ‘
docker-compose -f docker-compose.prod.yml restart
```

---

## âœ… Ð§Ð•ÐšÐ›Ð˜Ð¡Ð¢ ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ˜

- [ ] Frontend ÑÐ¾Ð±Ñ€Ð°Ð½ Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¼ `REACT_APP_API_URL` (https://, ÐÐ• localhost)
- [ ] Backend `.env` ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ `CORS_ORIGINS`
- [ ] Nginx Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑ‰ÐµÐ½
- [ ] SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹ (https Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚)
- [ ] Backend Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚: `curl https://Ð´Ð¾Ð¼ÐµÐ½/api/v1/health`
- [ ] Frontend Ð¾Ñ‚Ð´Ð°ÐµÑ‚ÑÑ: `curl https://Ð´Ð¾Ð¼ÐµÐ½`
- [ ] Ð’ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ Ð½ÐµÑ‚ CORS Ð¾ÑˆÐ¸Ð±Ð¾Ðº (F12 â†’ Console)
- [ ] Ð’ Network Ð²Ð¸Ð´Ð½Ñ‹ ÑƒÑÐ¿ÐµÑˆÐ½Ñ‹Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ðº `/api/v1/*`

---

## ðŸ†˜ Ð•Ð¡Ð›Ð˜ ÐÐ˜Ð§Ð•Ð“Ðž ÐÐ• ÐŸÐžÐœÐžÐ“Ð›Ðž

ÐžÑ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ Ð¼Ð½Ðµ Ð²Ñ‹Ð²Ð¾Ð´ ÑÑ‚Ð¸Ñ… ÐºÐ¾Ð¼Ð°Ð½Ð´:

```bash
# ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ:
docker-compose -f docker-compose.prod.yml ps
docker-compose -f docker-compose.prod.yml logs backend --tail=50
docker-compose -f docker-compose.prod.yml logs frontend --tail=50
docker-compose -f docker-compose.prod.yml logs nginx --tail=50

curl -I https://Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.com
curl https://Ð²Ð°Ñˆ-Ð´Ð¾Ð¼ÐµÐ½.com/api/v1/health

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ frontend build
grep -r "localhost" frontend/build/static/js/*.js | head -5
```

Ð˜ Ñ Ð¿Ð¾Ð¼Ð¾Ð³Ñƒ Ð½Ð°Ð¹Ñ‚Ð¸ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñƒ!

