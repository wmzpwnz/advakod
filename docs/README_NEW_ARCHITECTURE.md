# –ê–î–í–ê–ö–û–î - –ò–ò-–Æ—Ä–∏—Å—Ç –¥–ª—è –†–§ (–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)

## üöÄ –û–±–∑–æ—Ä

–ê–î–í–ê–ö–û–î - —ç—Ç–æ AI-powered —é—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ AI-—Å–µ—Ä–≤–∏—Å–æ–≤.

### ‚ú® –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **ü§ñ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ AI-—Å–µ—Ä–≤–∏—Å—ã**: 2 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–∞ –≤–º–µ—Å—Ç–æ 7
- **‚ö° –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 10-15 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É, P95 < 20 —Å–µ–∫—É–Ω–¥
- **üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**: ServiceManager —Å health checks
- **üìä –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ú–µ—Ç—Ä–∏–∫–∏, –∞–ª–µ—Ä—Ç—ã, –¥–∞—à–±–æ—Ä–¥—ã
- **üéØ Vistral-24B**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–∞—è –º–æ–¥–µ–ª—å

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ AI-—Å–µ—Ä–≤–∏—Å—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    ServiceManager                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ UnifiedLLMService‚îÇ  ‚îÇ UnifiedRAGService‚îÇ  ‚îÇ Monitoring   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ Service      ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Vistral-24B   ‚îÇ  ‚îÇ ‚Ä¢ Hybrid Search ‚îÇ  ‚îÇ ‚Ä¢ Metrics    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Queue Mgmt    ‚îÇ  ‚îÇ ‚Ä¢ RRF Fusion    ‚îÇ  ‚îÇ ‚Ä¢ Alerts     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Streaming     ‚îÇ  ‚îÇ ‚Ä¢ Caching       ‚îÇ  ‚îÇ ‚Ä¢ Health     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ 2-3 Concurrent‚îÇ  ‚îÇ ‚Ä¢ Re-ranking    ‚îÇ  ‚îÇ ‚Ä¢ Dashboard  ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. **UnifiedLLMService**
- **–ú–æ–¥–µ–ª—å**: Vistral-24B-Instruct (—Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–∞—è)
- **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å**: 2-3 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞
- **–û—á–µ—Ä–µ–¥—å**: –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- **Streaming**: Real-time –æ—Ç–≤–µ—Ç—ã
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 2. **UnifiedRAGService**
- **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫**: Semantic + Keyword
- **RRF**: Reciprocal Rank Fusion
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: 5-–º–∏–Ω—É—Ç–Ω—ã–π TTL
- **Re-ranking**: Cross-Encoder –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- **Chunking**: –£–º–Ω–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

#### 3. **ServiceManager**
- **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
- **Health Checks**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **Auto Recovery**: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö (–¥–æ 3 –ø–æ–ø—ã—Ç–æ–∫)
- **Graceful Shutdown**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ

#### 4. **UnifiedMonitoringService**
- **–ú–µ—Ç—Ä–∏–∫–∏**: Prometheus —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ
- **–ê–ª–µ—Ä—Ç—ã**: 6 –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª
- **Dashboard**: JSON API –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- **–ò—Å—Ç–æ—Ä–∏—è**: 1000 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–±—ã—Ç–∏–π

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```bash
# Vistral LLM
VISTRAL_MODEL_PATH=/opt/advakod/models/vistral-24b-instruct-q4_K_M.gguf
VISTRAL_MAX_CONCURRENCY=3
VISTRAL_N_CTX=8192
VISTRAL_INFERENCE_TIMEOUT=900

# RAG System
RAG_MAX_RESULTS=20
RAG_SIMILARITY_THRESHOLD=0.7
RAG_ENABLE_HYBRID_SEARCH=true
RAG_ENABLE_RERANKING=true

# Monitoring
SERVICE_HEALTH_CHECK_INTERVAL=30
MONITORING_COLLECTION_INTERVAL=30
```

## üìä API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ endpoints

- `POST /api/v1/chat/enhanced` - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —á–∞—Ç —Å RAG
- `GET /ready` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã
- `GET /metrics` - Prometheus –º–µ—Ç—Ä–∏–∫–∏
- `GET /metrics/json` - JSON –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- `GET /health` - Liveness probe
- `GET /ready` - Readiness probe —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º
- `GET /metrics/json` - –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã

## üöÄ –ó–∞–ø—É—Å–∫

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# Backend
cd backend
python main.py

# Frontend
cd frontend
npm start
```

### Production

```bash
# Docker Compose
docker-compose -f docker-compose.prod.yml up -d

# –ò–ª–∏ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã
./scripts/deploy/DEPLOY_ALL_IN_ONE.sh
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

- **Throughput**: 10-15 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É
- **Response Time**: P95 < 20 —Å–µ–∫—É–Ω–¥
- **Concurrency**: 2-3 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞
- **Memory**: -30% –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è
- **Startup**: < 30 —Å–µ–∫—É–Ω–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **LLM –º–µ—Ç—Ä–∏–∫–∏**: requests/min, response time, error rate, queue length
- **RAG –º–µ—Ç—Ä–∏–∫–∏**: search time, cache hit rate, vector store size
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ**: CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫, —Å–µ—Ç–µ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **–ê–ª–µ—Ä—Ç—ã**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

- **7 —Å–µ—Ä–≤–∏—Å–æ–≤ ‚Üí 2**: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **Saiga ‚Üí Vistral**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω–∞—è –º–æ–¥–µ–ª—å
- **–†—É—á–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí ServiceManager**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- **–†–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚Üí –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è

### Legacy –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–°—Ç–∞—Ä—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω—ã –≤ `app/services/legacy/` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ unified_llm_service.py      # –ï–¥–∏–Ω—ã–π LLM —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ unified_rag_service.py      # –ï–¥–∏–Ω—ã–π RAG —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service_manager.py          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ unified_monitoring_service.py # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ legacy/                     # –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ api/                           # REST API endpoints
‚îÇ   ‚îî‚îÄ‚îÄ core/                          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —É—Ç–∏–ª–∏—Ç—ã
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

1. **LLM —Ñ—É–Ω–∫—Ü–∏–∏**: –†–∞—Å—à–∏—Ä—è–π—Ç–µ `UnifiedLLMService`
2. **RAG —Ñ—É–Ω–∫—Ü–∏–∏**: –†–∞—Å—à–∏—Ä—è–π—Ç–µ `UnifiedRAGService`
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –î–æ–±–∞–≤–ª—è–π—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ `UnifiedMonitoringService`
4. **API**: –°–æ–∑–¥–∞–≤–∞–π—Ç–µ endpoints –≤ `app/api/`

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **API**: `/docs` - Swagger UI
- **–ú–µ—Ç—Ä–∏–∫–∏**: `/metrics` - Prometheus format
- **–°—Ç–∞—Ç—É—Å**: `/ready` - –î–µ—Ç–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **Rate Limiting**: ML-based –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- **Input Validation**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Security Headers**: –ó–∞—â–∏—Ç–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
- **Audit Logging**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `/ready` endpoint –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
2. –ò–∑—É—á–∏—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ `/metrics/json`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ ServiceManager
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ legacy —Å–µ—Ä–≤–∏—Å–æ–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

**–í–µ—Ä—Å–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**: 2.0 (–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: ${new Date().toISOString().split('T')[0]}  
**–°—Ç–∞—Ç—É—Å**: Production Ready ‚úÖ