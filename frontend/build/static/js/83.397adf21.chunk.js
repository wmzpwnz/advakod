/*! For license information please see 83.397adf21.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkai_lawyer_frontend=self.webpackChunkai_lawyer_frontend||[]).push([[83],{3002:(e,a,r)=>{r.d(a,{A:()=>t});const t=(0,r(1639).A)("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]])},4083:(e,a,r)=>{r.r(a),r.d(a,{default:()=>u});var t=r(9379),s=r(5043),l=r(1680),n=r(1639);const d=(0,n.A)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),c=(0,n.A)("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);var i=r(3002),o=r(797),p=r(614),m=r(3005),x=r(9722),h=r(579);const u=e=>{let{onFileUpload:a,onFileRemove:r,maxFiles:n=5,maxSize:u=10}=e;const[g,y]=(0,s.useState)(!1),[f,b]=(0,s.useState)(!1),[k,v]=(0,s.useState)([]),[j,w]=(0,s.useState)(null),N=(0,s.useRef)(null),{isDark:C}=(0,m.D)(),M=e=>{switch(e.split(".").pop().toLowerCase()){case"pdf":case"doc":case"docx":case"txt":case"rtf":return(0,h.jsx)(l.A,{className:"h-5 w-5"});case"jpg":case"jpeg":case"png":case"gif":case"bmp":return(0,h.jsx)(d,{className:"h-5 w-5"});case"xls":case"xlsx":case"csv":return(0,h.jsx)(c,{className:"h-5 w-5"});default:return(0,h.jsx)(i.A,{className:"h-5 w-5"})}},D=e=>{if(0===e)return"0 Bytes";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]},A=(0,s.useCallback)(async e=>{const r=Array.from(e);if(r.length+k.length>n)w("\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c ".concat(n," \u0444\u0430\u0439\u043b\u043e\u0432"));else{w(null),b(!0);try{const e=r.map(async e=>{const a=(e=>{const a=1024*u*1024;return["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","application/rtf","image/jpeg","image/png","image/gif","image/bmp","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv"].includes(e.type)?e.size>a?"\u0420\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 ".concat(u,"MB"):null:"\u0422\u0438\u043f \u0444\u0430\u0439\u043b\u0430 ".concat(e.type," \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f")})(e);if(a)throw new Error(a);const r=await(async e=>{const a=new FormData;a.append("file",e);try{return(await x.A.post("/api/v1/files/upload",a,{headers:{"Content-Type":"multipart/form-data"},timeout:3e4})).data}catch(j){var r,t;throw console.error("Upload error:",j),new Error((null===(r=j.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.detail)||"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0444\u0430\u0439\u043b\u0430")}})(e);return(0,t.A)((0,t.A)({},r),{},{originalFile:e,id:Date.now()+Math.random()})}),s=await Promise.all(e),l=[...k,...s];v(l),a&&a(s)}catch(j){w(j.message)}finally{b(!1)}}},[k,n,a]),F=(0,s.useCallback)(e=>{e.preventDefault(),y(!0)},[]),S=(0,s.useCallback)(e=>{e.preventDefault(),y(!1)},[]),B=(0,s.useCallback)(e=>{e.preventDefault(),y(!1);const a=e.dataTransfer.files;a.length>0&&A(a)},[A]),L=(0,s.useCallback)(e=>{const a=e.target.files;a.length>0&&A(a),e.target.value=""},[A]),z=(0,s.useCallback)(e=>{const a=k.find(a=>a.id===e);a&&(v(a=>a.filter(a=>a.id!==e)),r&&r(a))},[k,r]);return(0,h.jsxs)("div",{className:"w-full",children:[(0,h.jsxs)("div",{className:"\n          relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer\n          transition-all duration-200 ease-in-out\n          ".concat(g?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-300 dark:border-gray-600 hover:border-primary-400 dark:hover:border-primary-500","\n          ").concat(f?"opacity-50 cursor-not-allowed":"","\n        "),onDragOver:F,onDragLeave:S,onDrop:B,onClick:()=>{var e;null===(e=N.current)||void 0===e||e.click()},children:[(0,h.jsx)("input",{ref:N,type:"file",multiple:!0,accept:".pdf,.doc,.docx,.txt,.rtf,.jpg,.jpeg,.png,.gif,.bmp,.xls,.xlsx,.csv",onChange:L,className:"hidden",disabled:f}),(0,h.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,h.jsx)(o.A,{className:"h-8 w-8 ".concat(g?"text-primary-500":"text-gray-400 dark:text-gray-500")}),(0,h.jsxs)("div",{className:"text-sm",children:[(0,h.jsx)("span",{className:"text-primary-600 dark:text-primary-400 font-medium",children:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0432\u044b\u0431\u043e\u0440\u0430 \u0444\u0430\u0439\u043b\u043e\u0432"})," ","\u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0438\u0445 \u0441\u044e\u0434\u0430"]}),(0,h.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f: PDF, DOC, DOCX, TXT, RTF, JPG, PNG, XLS, XLSX, CSV",(0,h.jsx)("br",{}),"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c ",n," \u0444\u0430\u0439\u043b\u043e\u0432, \u0434\u043e ",u,"MB \u043a\u0430\u0436\u0434\u044b\u0439"]})]})]}),j&&(0,h.jsx)("div",{className:"mt-2 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:(0,h.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:j})}),k.length>0&&(0,h.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,h.jsxs)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["\u0417\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b (",k.length,")"]}),k.map(e=>(0,h.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:M(e.filename)}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.filename}),(0,h.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:D(e.file_size)})]})]}),(0,h.jsx)("button",{onClick:a=>{a.stopPropagation(),z(e.id)},className:"p-1 text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors duration-200",children:(0,h.jsx)(p.A,{className:"h-4 w-4"})})]},e.id))]}),f&&(0,h.jsx)("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,h.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0444\u0430\u0439\u043b\u043e\u0432..."})]})})]})}}}]);
//# sourceMappingURL=83.397adf21.chunk.js.map