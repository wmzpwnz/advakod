{"version":3,"file":"static/js/858.0ac69179.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/chevron-up.ts","components/MessageSearch.js"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ChevronUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTggMTUtNi02LTYgNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronUp = createLucideIcon('ChevronUp', [['path', { d: 'm18 15-6-6-6 6', key: '153udz' }]]);\n\nexport default ChevronUp;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Search, X, Clock, MessageSquare, ChevronUp, ChevronDown } from 'lucide-react';\nimport { useTheme } from '../contexts/ThemeContext';\n\nconst MessageSearch = ({ messages, onMessageSelect, isVisible, onClose }) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n  const [showResults, setShowResults] = useState(false);\n  const searchInputRef = useRef(null);\n  const { isDark } = useTheme();\n\n  useEffect(() => {\n    if (isVisible && searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n  }, [isVisible]);\n\n  useEffect(() => {\n    if (searchQuery.trim()) {\n      const results = messages\n        .filter(message => \n          message.content.toLowerCase().includes(searchQuery.toLowerCase()) ||\n          (message.role === 'user' && message.content.toLowerCase().includes(searchQuery.toLowerCase()))\n        )\n        .map((message, index) => ({\n          ...message,\n          searchIndex: index,\n          highlightedContent: highlightText(message.content, searchQuery)\n        }))\n        .slice(0, 20); // Ограничиваем результаты\n      \n      setSearchResults(results);\n      setShowResults(true);\n      setSelectedIndex(-1);\n    } else {\n      setSearchResults([]);\n      setShowResults(false);\n    }\n  }, [searchQuery, messages]);\n\n  const highlightText = (text, query) => {\n    if (!query.trim()) return text;\n    \n    const regex = new RegExp(`(${query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')})`, 'gi');\n    const parts = text.split(regex);\n    \n    return parts.map((part, index) => \n      regex.test(part) ? (\n        <mark key={index} className=\"bg-yellow-200 dark:bg-yellow-800 px-1 rounded\">\n          {part}\n        </mark>\n      ) : part\n    );\n  };\n\n  const handleKeyDown = (e) => {\n    if (!showResults || searchResults.length === 0) return;\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setSelectedIndex(prev => \n          prev < searchResults.length - 1 ? prev + 1 : 0\n        );\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        setSelectedIndex(prev => \n          prev > 0 ? prev - 1 : searchResults.length - 1\n        );\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (selectedIndex >= 0 && selectedIndex < searchResults.length) {\n          handleMessageSelect(searchResults[selectedIndex]);\n        }\n        break;\n      case 'Escape':\n        onClose();\n        break;\n    }\n  };\n\n  const handleMessageSelect = (message) => {\n    onMessageSelect(message);\n    setSearchQuery('');\n    setSearchResults([]);\n    setShowResults(false);\n    onClose();\n  };\n\n  const formatTime = (timestamp) => {\n    return new Date(timestamp).toLocaleString('ru-RU', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const truncateText = (text, maxLength = 100) => {\n    if (text.length <= maxLength) return text;\n    return text.substring(0, maxLength) + '...';\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center pt-20 animate-fade-in\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl mx-4 animate-scale-in\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center\">\n            <Search className=\"h-5 w-5 mr-2 text-primary-600\" />\n            Поиск по истории\n          </h3>\n          <button\n            onClick={onClose}\n            className=\"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors\"\n          >\n            <X className=\"h-5 w-5\" />\n          </button>\n        </div>\n\n        {/* Search Input */}\n        <div className=\"p-4\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n            <input\n              ref={searchInputRef}\n              type=\"text\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              onKeyDown={handleKeyDown}\n              placeholder=\"Поиск по сообщениям...\"\n              className=\"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\n            />\n          </div>\n          \n          {searchQuery && (\n            <div className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n              {searchResults.length > 0 ? (\n                `Найдено ${searchResults.length} сообщений`\n              ) : (\n                'Сообщения не найдены'\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Search Results */}\n        {showResults && searchResults.length > 0 && (\n          <div className=\"max-h-96 overflow-y-auto border-t border-gray-200 dark:border-gray-700\">\n            {searchResults.map((message, index) => (\n              <div\n                key={`${message.id}-${index}`}\n                className={`p-4 border-b border-gray-100 dark:border-gray-700 cursor-pointer transition-colors ${\n                  index === selectedIndex\n                    ? 'bg-primary-50 dark:bg-primary-900/30'\n                    : 'hover:bg-gray-50 dark:hover:bg-gray-700'\n                }`}\n                onClick={() => handleMessageSelect(message)}\n              >\n                <div className=\"flex items-start space-x-3\">\n                  <div className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${\n                    message.role === 'user'\n                      ? 'bg-primary-600 text-white'\n                      : 'bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300'\n                  }`}>\n                    {message.role === 'user' ? (\n                      <MessageSquare className=\"h-4 w-4\" />\n                    ) : (\n                      <MessageSquare className=\"h-4 w-4\" />\n                    )}\n                  </div>\n                  \n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center justify-between mb-1\">\n                      <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">\n                        {message.role === 'user' ? 'Вы' : 'ИИ-Юрист'}\n                      </span>\n                      <span className=\"text-xs text-gray-500 dark:text-gray-400 flex items-center\">\n                        <Clock className=\"h-3 w-3 mr-1\" />\n                        {formatTime(message.created_at)}\n                      </span>\n                    </div>\n                    \n                    <div className=\"text-sm text-gray-700 dark:text-gray-300\">\n                      {highlightText(truncateText(message.content), searchQuery)}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Footer */}\n        <div className=\"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700 rounded-b-lg\">\n          <div className=\"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400\">\n            <div className=\"flex items-center space-x-4\">\n              <span className=\"flex items-center\">\n                <ChevronUp className=\"h-4 w-4 mr-1\" />\n                <ChevronDown className=\"h-4 w-4 mr-1\" />\n                Навигация\n              </span>\n              <span>Enter - Выбрать</span>\n            </div>\n            <span>Esc - Закрыть</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MessageSearch;\n"],"names":["ChevronUp","createLucideIcon","d","key","_ref","messages","onMessageSelect","isVisible","onClose","searchQuery","setSearchQuery","useState","searchResults","setSearchResults","selectedIndex","setSelectedIndex","showResults","setShowResults","searchInputRef","useRef","isDark","useTheme","useEffect","current","focus","trim","results","filter","message","content","toLowerCase","includes","role","map","index","_objectSpread","searchIndex","highlightedContent","highlightText","slice","text","query","regex","RegExp","concat","replace","split","part","test","_jsx","className","children","handleMessageSelect","truncateText","maxLength","arguments","length","undefined","substring","_jsxs","Search","onClick","X","ref","type","value","onChange","e","target","onKeyDown","preventDefault","prev","placeholder","MessageSquare","Clock","timestamp","created_at","Date","toLocaleString","day","month","year","hour","minute","id","ChevronDown"],"sourceRoot":""}