/*! For license information please see 858.0ac69179.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkai_lawyer_frontend=self.webpackChunkai_lawyer_frontend||[]).push([[858],{5711:(e,r,t)=>{t.d(r,{A:()=>a});const a=(0,t(1639).A)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},5858:(e,r,t)=>{t.r(r),t.d(r,{default:()=>m});var a=t(9379),s=t(5043),n=t(2382),l=t(5711),c=t(5088),i=t(4669),d=t(9292),o=t(614),g=t(3005),x=t(579);const m=e=>{let{messages:r,onMessageSelect:t,isVisible:m,onClose:h}=e;const[u,y]=(0,s.useState)(""),[b,f]=(0,s.useState)([]),[p,j]=(0,s.useState)(-1),[w,k]=(0,s.useState)(!1),v=(0,s.useRef)(null),{isDark:N}=(0,g.D)();(0,s.useEffect)(()=>{m&&v.current&&v.current.focus()},[m]),(0,s.useEffect)(()=>{if(u.trim()){const e=r.filter(e=>e.content.toLowerCase().includes(u.toLowerCase())||"user"===e.role&&e.content.toLowerCase().includes(u.toLowerCase())).map((e,r)=>(0,a.A)((0,a.A)({},e),{},{searchIndex:r,highlightedContent:A(e.content,u)})).slice(0,20);f(e),k(!0),j(-1)}else f([]),k(!1)},[u,r]);const A=(e,r)=>{if(!r.trim())return e;const t=new RegExp("(".concat(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),")"),"gi");return e.split(t).map((e,r)=>t.test(e)?(0,x.jsx)("mark",{className:"bg-yellow-200 dark:bg-yellow-800 px-1 rounded",children:e},r):e)},C=e=>{t(e),y(""),f([]),k(!1),h()},D=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length<=r?e:e.substring(0,r)+"..."};return m?(0,x.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center pt-20 animate-fade-in",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl mx-4 animate-scale-in",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,x.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 flex items-center",children:[(0,x.jsx)(d.A,{className:"h-5 w-5 mr-2 text-primary-600"}),"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0438\u0441\u0442\u043e\u0440\u0438\u0438"]}),(0,x.jsx)("button",{onClick:h,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:(0,x.jsx)(o.A,{className:"h-5 w-5"})})]}),(0,x.jsxs)("div",{className:"p-4",children:[(0,x.jsxs)("div",{className:"relative",children:[(0,x.jsx)(d.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,x.jsx)("input",{ref:v,type:"text",value:u,onChange:e=>y(e.target.value),onKeyDown:e=>{if(w&&0!==b.length)switch(e.key){case"ArrowDown":e.preventDefault(),j(e=>e<b.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),j(e=>e>0?e-1:b.length-1);break;case"Enter":e.preventDefault(),p>=0&&p<b.length&&C(b[p]);break;case"Escape":h()}},placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})]}),u&&(0,x.jsx)("div",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:b.length>0?"\u041d\u0430\u0439\u0434\u0435\u043d\u043e ".concat(b.length," \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"):"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"})]}),w&&b.length>0&&(0,x.jsx)("div",{className:"max-h-96 overflow-y-auto border-t border-gray-200 dark:border-gray-700",children:b.map((e,r)=>{return(0,x.jsx)("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 cursor-pointer transition-colors ".concat(r===p?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-gray-50 dark:hover:bg-gray-700"),onClick:()=>C(e),children:(0,x.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,x.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ".concat("user"===e.role?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300"),children:(e.role,(0,x.jsx)(i.A,{className:"h-4 w-4"}))}),(0,x.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,x.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"user"===e.role?"\u0412\u044b":"\u0418\u0418-\u042e\u0440\u0438\u0441\u0442"}),(0,x.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center",children:[(0,x.jsx)(c.A,{className:"h-3 w-3 mr-1"}),(t=e.created_at,new Date(t).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))]})]}),(0,x.jsx)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:A(D(e.content),u)})]})]})},"".concat(e.id,"-").concat(r));var t})}),(0,x.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700 rounded-b-lg",children:(0,x.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,x.jsxs)("span",{className:"flex items-center",children:[(0,x.jsx)(l.A,{className:"h-4 w-4 mr-1"}),(0,x.jsx)(n.A,{className:"h-4 w-4 mr-1"}),"\u041d\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u044f"]}),(0,x.jsx)("span",{children:"Enter - \u0412\u044b\u0431\u0440\u0430\u0442\u044c"})]}),(0,x.jsx)("span",{children:"Esc - \u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})})]})}):null}}}]);
//# sourceMappingURL=858.0ac69179.chunk.js.map