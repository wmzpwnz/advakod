{"version":3,"file":"static/js/721.c8ee9f1a.chunk.js","mappings":"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","sources":["../node_modules/lucide-react/src/icons/lightbulb.ts","../node_modules/lucide-react/src/icons/file.ts","../node_modules/lucide-react/src/icons/pen-line.ts","../node_modules/lucide-react/src/icons/chevron-up.ts","../node_modules/lucide-react/src/icons/check.ts","../node_modules/lucide-react/src/icons/bot.ts","../node_modules/lucide-react/src/icons/mic.ts","../node_modules/lucide-react/src/icons/send.ts","services/ResilientWebSocket.js","hooks/useChatWebSocket.js","hooks/useStatusNotifications.js","components/VoiceRecorder.js","../node_modules/lucide-react/src/icons/eraser.ts","components/ChatHistory.js","components/EnhancedResponse.js","components/FeedbackButtons.js","../node_modules/lucide-react/src/icons/server.ts","../node_modules/lucide-react/src/icons/wifi.ts","components/ErrorMessage.js","components/AIThinkingIndicator.js","components/EnhancedConnectionStatus.js","components/StatusNotificationSystem.js","pages/Chat.js"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Lightbulb\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgMTRjLjItMSAuNy0xLjcgMS41LTIuNSAxLS45IDEuNS0yLjIgMS41LTMuNUE2IDYgMCAwIDAgNiA4YzAgMSAuMiAyLjIgMS41IDMuNS43LjcgMS4zIDEuNSAxLjUgMi41IiAvPgogIDxwYXRoIGQ9Ik05IDE4aDYiIC8+CiAgPHBhdGggZD0iTTEwIDIyaDQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/lightbulb\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Lightbulb = createLucideIcon('Lightbulb', [\n  [\n    'path',\n    {\n      d: 'M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5',\n      key: '1gvzjb',\n    },\n  ],\n  ['path', { d: 'M9 18h6', key: 'x1upvd' }],\n  ['path', { d: 'M10 22h4', key: 'ceow96' }],\n]);\n\nexport default Lightbulb;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name File\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTQuNSAySDZhMiAyIDAgMCAwLTIgMnYxNmEyIDIgMCAwIDAgMiAyaDEyYTIgMiAwIDAgMCAyLTJWNy41TDE0LjUgMnoiIC8+CiAgPHBvbHlsaW5lIHBvaW50cz0iMTQgMiAxNCA4IDIwIDgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/file\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst File = createLucideIcon('File', [\n  [\n    'path',\n    { d: 'M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z', key: '1nnpy2' },\n  ],\n  ['polyline', { points: '14 2 14 8 20 8', key: '1ew0cm' }],\n]);\n\nexport default File;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name PenLine\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMjBoOSIgLz4KICA8cGF0aCBkPSJNMTYuNSAzLjVhMi4xMiAyLjEyIDAgMCAxIDMgM0w3IDE5bC00IDEgMS00WiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pen-line\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PenLine = createLucideIcon('PenLine', [\n  ['path', { d: 'M12 20h9', key: 't2du7b' }],\n  ['path', { d: 'M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z', key: 'ymcmye' }],\n]);\n\nexport default PenLine;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ChevronUp\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTggMTUtNi02LTYgNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/chevron-up\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ChevronUp = createLucideIcon('ChevronUp', [['path', { d: 'm18 15-6-6-6 6', key: '153udz' }]]);\n\nexport default ChevronUp;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Check\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgNiA5IDE3bC01LTUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Check = createLucideIcon('Check', [['path', { d: 'M20 6 9 17l-5-5', key: '1gmf2c' }]]);\n\nexport default Check;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Bot\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgOFY0SDgiIC8+CiAgPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjEyIiB4PSI0IiB5PSI4IiByeD0iMiIgLz4KICA8cGF0aCBkPSJNMiAxNGgyIiAvPgogIDxwYXRoIGQ9Ik0yMCAxNGgyIiAvPgogIDxwYXRoIGQ9Ik0xNSAxM3YyIiAvPgogIDxwYXRoIGQ9Ik05IDEzdjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/bot\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Bot = createLucideIcon('Bot', [\n  ['path', { d: 'M12 8V4H8', key: 'hb8ula' }],\n  ['rect', { width: '16', height: '12', x: '4', y: '8', rx: '2', key: 'enze0r' }],\n  ['path', { d: 'M2 14h2', key: 'vft8re' }],\n  ['path', { d: 'M20 14h2', key: '4cs60a' }],\n  ['path', { d: 'M15 13v2', key: '1xurst' }],\n  ['path', { d: 'M9 13v2', key: 'rq6x2g' }],\n]);\n\nexport default Bot;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Mic\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMmEzIDMgMCAwIDAtMyAzdjdhMyAzIDAgMCAwIDYgMFY1YTMgMyAwIDAgMC0zLTNaIiAvPgogIDxwYXRoIGQ9Ik0xOSAxMHYyYTcgNyAwIDAgMS0xNCAwdi0yIiAvPgogIDxsaW5lIHgxPSIxMiIgeDI9IjEyIiB5MT0iMTkiIHkyPSIyMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/mic\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Mic = createLucideIcon('Mic', [\n  ['path', { d: 'M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z', key: '131961' }],\n  ['path', { d: 'M19 10v2a7 7 0 0 1-14 0v-2', key: '1vc78b' }],\n  ['line', { x1: '12', x2: '12', y1: '19', y2: '22', key: 'x3vr5v' }],\n]);\n\nexport default Mic;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Send\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMjIgMi03IDIwLTQtOS05LTRaIiAvPgogIDxwYXRoIGQ9Ik0yMiAyIDExIDEzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/send\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Send = createLucideIcon('Send', [\n  ['path', { d: 'm22 2-7 20-4-9-9-4Z', key: '1q3vgg' }],\n  ['path', { d: 'M22 2 11 13', key: 'nzbqef' }],\n]);\n\nexport default Send;\n","/**\n * ResilientWebSocket -  WebSocket    \n *   2.2, 2.3, 6.3  \n */\nclass ResilientWebSocket {\n  constructor(url, options = {}) {\n    this.url = url;\n    this.options = {\n      maxReconnectAttempts: 10,\n      reconnectDelay: 1000,\n      maxReconnectDelay: 30000,\n      pingInterval: 30000,\n      pongTimeout: 10000,\n      connectionTimeout: 10000,\n      maxMessageSize: 65536, // 64KB\n      enableHeartbeat: true,\n      enableAutoReconnect: true,\n      enableErrorRecovery: true,\n      ...options\n    };\n\n    this.ws = null;\n    this.reconnectAttempts = 0;\n    this.isConnected = false;\n    this.isConnecting = false;\n    this.shouldReconnect = true;\n\n    // Event listeners\n    this.listeners = new Map();\n\n    // Ping/Pong   \n    this.pingInterval = null;\n    this.pongTimeout = null;\n    this.lastPong = null;\n\n    //      \n    this.messageQueue = [];\n    this.maxQueueSize = 100;\n\n    //  \n    this.connectionStats = {\n      totalConnections: 0,\n      totalReconnections: 0,\n      totalMessages: 0,\n      totalErrors: 0,\n      lastConnectedAt: null,\n      lastDisconnectedAt: null,\n      connectionDuration: 0,\n      averageLatency: 0,\n      errorRate: 0\n    };\n\n    //    UI\n    this.connectionState = 'disconnected'; // 'connecting', 'connected', 'reconnecting', 'disconnected', 'failed'\n    \n    //    \n    this.errorRecovery = {\n      consecutiveErrors: 0,\n      lastErrorTime: null,\n      errorTypes: new Map(),\n      recoveryStrategies: new Map()\n    };\n    \n    //   \n    this.initializeRecoveryStrategies();\n  }\n\n  /**\n   *     \n   */\n  initializeRecoveryStrategies() {\n    //    \n    this.errorRecovery.recoveryStrategies.set('auth_error', {\n      maxAttempts: 3,\n      delay: 5000,\n      action: async () => {\n        console.log('ResilientWebSocket: Attempting auth recovery...');\n        //     \n        this.emit('authRecoveryNeeded');\n      }\n    });\n    \n    //    \n    this.errorRecovery.recoveryStrategies.set('network_error', {\n      maxAttempts: 5,\n      delay: 2000,\n      action: async () => {\n        console.log('ResilientWebSocket: Attempting network recovery...');\n        //   \n        if (navigator.onLine) {\n          return true; //  ,  \n        }\n        return false; //  , \n      }\n    });\n    \n    //    \n    this.errorRecovery.recoveryStrategies.set('server_error', {\n      maxAttempts: 3,\n      delay: 10000,\n      action: async () => {\n        console.log('ResilientWebSocket: Attempting server error recovery...');\n        //     \n        return true;\n      }\n    });\n  }\n\n  /**\n   *   WebSocket\n   */\n  async connect() {\n    if (this.isConnecting || this.isConnected) {\n      return Promise.resolve();\n    }\n\n    this.isConnecting = true;\n    this.shouldReconnect = true;\n\n    return new Promise((resolve, reject) => {\n      try {\n        console.log('ResilientWebSocket: Connecting to', this.url);\n        this.ws = new WebSocket(this.url);\n\n        this.connectionState = 'connecting';\n        this.emit('stateChange', this.connectionState);\n\n        const connectTimeout = setTimeout(() => {\n          if (this.ws && this.ws.readyState === WebSocket.CONNECTING) {\n            this.ws.close();\n            this.connectionState = 'failed';\n            this.emit('stateChange', this.connectionState);\n            reject(new Error('Connection timeout'));\n          }\n        }, this.options.connectionTimeout);\n\n        this.ws.onopen = () => {\n          clearTimeout(connectTimeout);\n          console.log('ResilientWebSocket: Connected successfully');\n          this.isConnected = true;\n          this.isConnecting = false;\n          this.reconnectAttempts = 0;\n          this.connectionState = 'connected';\n\n          //  \n          this.connectionStats.totalConnections++;\n          this.connectionStats.lastConnectedAt = new Date();\n\n          this.startPingPong();\n          this.flushMessageQueue();\n          this.emit('open');\n          this.emit('stateChange', this.connectionState);\n          resolve();\n        };\n\n        this.ws.onmessage = (event) => {\n          try {\n            const data = JSON.parse(event.data);\n\n            //  pong \n            if (data.type === 'pong') {\n              this.handlePong(data);\n              return;\n            }\n\n            this.emit('message', data);\n          } catch (error) {\n            console.error('ResilientWebSocket: Error parsing message:', error);\n            this.emit('error', error);\n          }\n        };\n\n        this.ws.onclose = (event) => {\n          clearTimeout(connectTimeout);\n          console.log('ResilientWebSocket: Connection closed:', event.code, event.reason);\n\n          this.isConnected = false;\n          this.isConnecting = false;\n          this.stopPingPong();\n\n          //  \n          this.connectionStats.lastDisconnectedAt = new Date();\n          if (this.connectionStats.lastConnectedAt) {\n            this.connectionStats.connectionDuration +=\n              this.connectionStats.lastDisconnectedAt - this.connectionStats.lastConnectedAt;\n          }\n\n          const shouldReconnect = this.handleClose(event.code, event.reason);\n\n          if (shouldReconnect && this.shouldReconnect) {\n            this.connectionState = 'reconnecting';\n            this.connectionStats.totalReconnections++;\n            this.emit('stateChange', this.connectionState);\n            this.scheduleReconnect();\n          } else {\n            this.connectionState = event.code === 1000 ? 'disconnected' : 'failed';\n            this.emit('stateChange', this.connectionState);\n          }\n\n          this.emit('close', { code: event.code, reason: event.reason, shouldReconnect });\n        };\n\n        this.ws.onerror = (error) => {\n          clearTimeout(connectTimeout);\n          console.error('ResilientWebSocket: Connection error:', error);\n          \n          //   \n          this.connectionStats.totalErrors++;\n          this.errorRecovery.consecutiveErrors++;\n          this.errorRecovery.lastErrorTime = Date.now();\n          \n          //       \n          const errorType = this.classifyError(error);\n          this.handleErrorRecovery(errorType);\n          \n          this.isConnecting = false;\n          this.connectionState = 'failed';\n          this.emit('stateChange', this.connectionState);\n          this.emit('error', { ...error, type: errorType, recoverable: this.isErrorRecoverable(errorType) });\n          reject(error);\n        };\n\n      } catch (error) {\n        this.isConnecting = false;\n        console.error('ResilientWebSocket: Failed to create connection:', error);\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   *   WebSocket\n   */\n  disconnect() {\n    console.log('ResilientWebSocket: Disconnecting...');\n    this.shouldReconnect = false;\n    this.stopPingPong();\n\n    if (this.ws) {\n      this.ws.close(1000, 'Client disconnect');\n      this.ws = null;\n    }\n\n    this.isConnected = false;\n    this.isConnecting = false;\n    this.messageQueue = [];\n  }\n\n  /**\n   *      \n   */\n  send(data) {\n    const message = typeof data === 'string' ? data : JSON.stringify(data);\n\n    //   \n    if (message.length > this.options.maxMessageSize) {\n      console.error('ResilientWebSocket: Message too large:', message.length, 'bytes');\n      this.emit('error', {\n        type: 'message_too_large',\n        message: 'Message exceeds maximum size',\n        size: message.length,\n        maxSize: this.options.maxMessageSize\n      });\n      return false;\n    }\n\n    if (this.isConnected && this.ws && this.ws.readyState === WebSocket.OPEN) {\n      try {\n        this.ws.send(message);\n        this.connectionStats.totalMessages++;\n        this.emit('messageSent', { size: message.length });\n        return true;\n      } catch (error) {\n        console.error('ResilientWebSocket: Error sending message:', error);\n        this.connectionStats.totalErrors++;\n        \n        //   \n        const errorType = this.classifyError(error);\n        this.handleErrorRecovery(errorType);\n        \n        //      \n        this.queueMessage(message);\n        \n        this.emit('error', {\n          type: 'send_error',\n          originalError: error,\n          message: 'Failed to send message',\n          queued: true\n        });\n        \n        return false;\n      }\n    } else {\n      //    -   \n      this.queueMessage(message);\n      \n      //    \n      if (!this.isConnecting && this.shouldReconnect && this.options.enableAutoReconnect) {\n        console.log('ResilientWebSocket: Connection lost, attempting to reconnect for message delivery');\n        this.connect().catch(error => {\n          console.error('ResilientWebSocket: Failed to reconnect for message delivery:', error);\n        });\n      }\n      \n      return false;\n    }\n  }\n\n  /**\n   *    \n   */\n  queueMessage(message) {\n    if (this.messageQueue.length >= this.maxQueueSize) {\n      this.messageQueue.shift(); //   \n    }\n    this.messageQueue.push(message);\n  }\n\n  /**\n   *     \n   */\n  flushMessageQueue() {\n    while (this.messageQueue.length > 0 && this.isConnected) {\n      const message = this.messageQueue.shift();\n      try {\n        this.ws.send(message);\n      } catch (error) {\n        console.error('ResilientWebSocket: Error flushing message queue:', error);\n        //    \n        this.messageQueue.unshift(message);\n        break;\n      }\n    }\n  }\n\n  /**\n   *      \n   */\n  classifyError(error) {\n    if (error.code === 1008 || error.code === 1003) {\n      return 'auth_error';\n    } else if (error.code === 1011 || error.code === 1001) {\n      return 'server_error';\n    } else if (error.code === 1006 || !navigator.onLine) {\n      return 'network_error';\n    } else {\n      return 'unknown_error';\n    }\n  }\n\n  /**\n   * ,     \n   */\n  isErrorRecoverable(errorType) {\n    const nonRecoverableErrors = ['auth_error'];\n    return !nonRecoverableErrors.includes(errorType) && this.options.enableErrorRecovery;\n  }\n\n  /**\n   *    \n   */\n  async handleErrorRecovery(errorType) {\n    if (!this.options.enableErrorRecovery) {\n      return false;\n    }\n\n    const strategy = this.errorRecovery.recoveryStrategies.get(errorType);\n    if (!strategy) {\n      console.warn(`ResilientWebSocket: No recovery strategy for error type: ${errorType}`);\n      return false;\n    }\n\n    //   \n    const errorCount = this.errorRecovery.errorTypes.get(errorType) || 0;\n    if (errorCount >= strategy.maxAttempts) {\n      console.warn(`ResilientWebSocket: Max recovery attempts reached for ${errorType}`);\n      this.emit('maxRecoveryAttemptsReached', { errorType, attempts: errorCount });\n      return false;\n    }\n\n    //   \n    this.errorRecovery.errorTypes.set(errorType, errorCount + 1);\n\n    try {\n      //   \n      const canRecover = await strategy.action();\n      \n      if (canRecover !== false) {\n        console.log(`ResilientWebSocket: Recovery strategy for ${errorType} completed`);\n        this.emit('errorRecoveryAttempt', { errorType, attempt: errorCount + 1 });\n        return true;\n      }\n    } catch (recoveryError) {\n      console.error(`ResilientWebSocket: Recovery strategy failed for ${errorType}:`, recoveryError);\n    }\n\n    return false;\n  }\n\n  /**\n   *   \n   */\n  handleClose(code, reason) {\n    const errorMap = {\n      1008: 'Authentication failed',\n      1003: 'Access denied', \n      1011: 'Server error',\n      1006: 'Connection lost',\n      1000: 'Normal closure',\n      1001: 'Going away',\n      1009: 'Message too big'\n    };\n\n    const message = errorMap[code] || 'Unknown error';\n    console.log(`ResilientWebSocket closed: ${code} - ${message} (${reason})`);\n\n    //  \n    const errorType = this.classifyError({ code, reason });\n    \n    //  \n    if (code !== 1000) { //     \n      this.connectionStats.totalErrors++;\n      this.errorRecovery.consecutiveErrors++;\n    } else {\n      this.errorRecovery.consecutiveErrors = 0; //    \n    }\n\n    // ,   \n    const permanentErrors = [1008, 1003]; //    \n    const shouldReconnect = !permanentErrors.includes(code) && this.isErrorRecoverable(errorType);\n    \n    if (shouldReconnect) {\n      //   \n      this.handleErrorRecovery(errorType);\n    }\n\n    return shouldReconnect;\n  }\n\n  /**\n   *      \n   */\n  scheduleReconnect() {\n    if (!this.options.enableAutoReconnect) {\n      console.log('ResilientWebSocket: Auto-reconnect disabled');\n      return;\n    }\n\n    if (this.reconnectAttempts >= this.options.maxReconnectAttempts) {\n      console.log('ResilientWebSocket: Max reconnection attempts reached');\n      this.connectionState = 'failed';\n      this.emit('stateChange', this.connectionState);\n      this.emit('maxReconnectAttemptsReached', {\n        attempts: this.reconnectAttempts,\n        consecutiveErrors: this.errorRecovery.consecutiveErrors\n      });\n      return;\n    }\n\n    //     \n    if (!navigator.onLine) {\n      console.log('ResilientWebSocket: Network offline, waiting for connection...');\n      this.waitForNetworkRecovery();\n      return;\n    }\n\n    this.reconnectAttempts++;\n    \n    //      \n    let baseDelay = this.options.reconnectDelay;\n    \n    //     \n    if (this.errorRecovery.consecutiveErrors > 3) {\n      baseDelay *= 2;\n    }\n    \n    const delay = Math.min(\n      baseDelay * Math.pow(2, this.reconnectAttempts - 1),\n      this.options.maxReconnectDelay\n    );\n\n    console.log(`ResilientWebSocket: Scheduling reconnect attempt ${this.reconnectAttempts} in ${delay}ms`);\n    \n    this.emit('reconnectScheduled', {\n      attempt: this.reconnectAttempts,\n      delay: delay,\n      consecutiveErrors: this.errorRecovery.consecutiveErrors\n    });\n\n    setTimeout(() => {\n      if (this.shouldReconnect && !this.isConnected && !this.isConnecting) {\n        this.attemptReconnect();\n      }\n    }, delay);\n  }\n\n  /**\n   *     \n   */\n  async attemptReconnect() {\n    try {\n      //   \n      if (!navigator.onLine) {\n        console.log('ResilientWebSocket: Network still offline, postponing reconnect');\n        this.scheduleReconnect();\n        return;\n      }\n\n      // ,     \n      if (this.errorRecovery.consecutiveErrors > 10) {\n        console.warn('ResilientWebSocket: Too many consecutive errors, extending delay');\n        setTimeout(() => this.scheduleReconnect(), 30000); // 30   \n        return;\n      }\n\n      console.log(`ResilientWebSocket: Attempting reconnect ${this.reconnectAttempts}/${this.options.maxReconnectAttempts}`);\n      await this.connect();\n      \n      //   -   \n      this.errorRecovery.consecutiveErrors = 0;\n      this.errorRecovery.errorTypes.clear();\n      \n    } catch (error) {\n      console.error('ResilientWebSocket: Reconnection failed:', error);\n      // scheduleReconnect      \n    }\n  }\n\n  /**\n   *    \n   */\n  waitForNetworkRecovery() {\n    const checkNetwork = () => {\n      if (navigator.onLine && this.shouldReconnect) {\n        console.log('ResilientWebSocket: Network recovered, attempting reconnect');\n        window.removeEventListener('online', checkNetwork);\n        this.scheduleReconnect();\n      }\n    };\n\n    window.addEventListener('online', checkNetwork);\n    \n    //     ,    \n    const intervalCheck = setInterval(() => {\n      if (navigator.onLine && this.shouldReconnect) {\n        clearInterval(intervalCheck);\n        window.removeEventListener('online', checkNetwork);\n        this.scheduleReconnect();\n      } else if (!this.shouldReconnect) {\n        clearInterval(intervalCheck);\n        window.removeEventListener('online', checkNetwork);\n      }\n    }, 5000);\n  }\n\n  /**\n   *  ping/pong \n   */\n  startPingPong() {\n    this.stopPingPong();\n\n    this.pingInterval = setInterval(() => {\n      if (this.isConnected && this.ws && this.ws.readyState === WebSocket.OPEN) {\n        const pingData = {\n          type: 'ping',\n          timestamp: Date.now()\n        };\n\n        this.ws.send(JSON.stringify(pingData));\n\n        //    pong\n        this.pongTimeout = setTimeout(() => {\n          console.warn('ResilientWebSocket: Pong timeout, reconnecting...');\n          this.ws.close(1006, 'Pong timeout');\n        }, this.options.pongTimeout);\n      }\n    }, this.options.pingInterval);\n  }\n\n  /**\n   *  ping/pong \n   */\n  stopPingPong() {\n    if (this.pingInterval) {\n      clearInterval(this.pingInterval);\n      this.pingInterval = null;\n    }\n\n    if (this.pongTimeout) {\n      clearTimeout(this.pongTimeout);\n      this.pongTimeout = null;\n    }\n  }\n\n  /**\n   *  pong \n   */\n  handlePong(data) {\n    if (this.pongTimeout) {\n      clearTimeout(this.pongTimeout);\n      this.pongTimeout = null;\n    }\n\n    this.lastPong = Date.now();\n    console.log('ResilientWebSocket: Pong received');\n  }\n\n  /**\n   *   \n   */\n  on(event, callback) {\n    if (!this.listeners.has(event)) {\n      this.listeners.set(event, new Set());\n    }\n    this.listeners.get(event).add(callback);\n  }\n\n  /**\n   *   \n   */\n  off(event, callback) {\n    if (this.listeners.has(event)) {\n      this.listeners.get(event).delete(callback);\n    }\n  }\n\n  /**\n   *   \n   */\n  emit(event, ...args) {\n    if (this.listeners.has(event)) {\n      this.listeners.get(event).forEach(callback => {\n        try {\n          callback(...args);\n        } catch (error) {\n          console.error(`ResilientWebSocket: Error in event listener for ${event}:`, error);\n        }\n      });\n    }\n  }\n\n  /**\n   *   \n   */\n  getStatus() {\n    return {\n      connected: this.isConnected,\n      connecting: this.isConnecting,\n      readyState: this.ws ? this.ws.readyState : WebSocket.CLOSED,\n      reconnectAttempts: this.reconnectAttempts,\n      lastPong: this.lastPong,\n      queuedMessages: this.messageQueue.length,\n      connectionState: this.connectionState,\n      stats: { ...this.connectionStats }\n    };\n  }\n\n  /**\n   *     UI\n   */\n  getUserFriendlyStatus() {\n    const statusMap = {\n      'connecting': { text: '...', color: 'yellow', icon: 'connecting' },\n      'connected': { text: '', color: 'green', icon: 'connected' },\n      'reconnecting': { text: '...', color: 'orange', icon: 'reconnecting' },\n      'disconnected': { text: '', color: 'gray', icon: 'disconnected' },\n      'failed': { text: ' ', color: 'red', icon: 'error' }\n    };\n\n    return statusMap[this.connectionState] || statusMap['disconnected'];\n  }\n\n  /**\n   *  \n   */\n  reconnect() {\n    console.log('ResilientWebSocket: Force reconnecting...');\n    \n    //      \n    this.errorRecovery.consecutiveErrors = 0;\n    this.errorRecovery.errorTypes.clear();\n    this.reconnectAttempts = 0;\n    \n    if (this.ws) {\n      this.ws.close(1000, 'Force reconnect');\n    }\n    \n    this.shouldReconnect = true;\n    this.connect();\n  }\n\n  /**\n   *     \n   */\n  resetErrorRecovery() {\n    console.log('ResilientWebSocket: Resetting error recovery system');\n    this.errorRecovery.consecutiveErrors = 0;\n    this.errorRecovery.lastErrorTime = null;\n    this.errorRecovery.errorTypes.clear();\n    this.reconnectAttempts = 0;\n    this.emit('errorRecoveryReset');\n  }\n\n  /**\n   *   \n   */\n  checkConnectionHealth() {\n    const now = Date.now();\n    const health = {\n      connected: this.isConnected,\n      connectionState: this.connectionState,\n      consecutiveErrors: this.errorRecovery.consecutiveErrors,\n      reconnectAttempts: this.reconnectAttempts,\n      queuedMessages: this.messageQueue.length,\n      lastPong: this.lastPong,\n      timeSinceLastPong: this.lastPong ? now - this.lastPong : null,\n      networkOnline: navigator.onLine,\n      stats: { ...this.connectionStats }\n    };\n\n    //   \n    health.isHealthy = this.isConnected && \n                      this.errorRecovery.consecutiveErrors < 3 &&\n                      (!this.lastPong || (now - this.lastPong) < 60000); //  pong   \n\n    health.errorRate = this.connectionStats.totalMessages > 0 ? \n                      this.connectionStats.totalErrors / this.connectionStats.totalMessages : 0;\n\n    return health;\n  }\n\n  /**\n   *    \n   */\n  getRecoveryRecommendations() {\n    const health = this.checkConnectionHealth();\n    const recommendations = [];\n\n    if (!navigator.onLine) {\n      recommendations.push({\n        type: 'network',\n        message: '   ',\n        action: 'checkNetwork'\n      });\n    }\n\n    if (health.consecutiveErrors > 5) {\n      recommendations.push({\n        type: 'errors',\n        message: '   .   ',\n        action: 'pageReload'\n      });\n    }\n\n    if (health.reconnectAttempts > 5) {\n      recommendations.push({\n        type: 'reconnect',\n        message: '  .  ',\n        action: 'checkServer'\n      });\n    }\n\n    if (health.queuedMessages > 10) {\n      recommendations.push({\n        type: 'queue',\n        message: '   ',\n        action: 'clearQueue'\n      });\n    }\n\n    if (health.errorRate > 0.1) {\n      recommendations.push({\n        type: 'errorRate',\n        message: '  .    ',\n        action: 'contactSupport'\n      });\n    }\n\n    return recommendations;\n  }\n\n  /**\n   *    \n   */\n  applyRecoveryRecommendation(action) {\n    switch (action) {\n      case 'checkNetwork':\n        //     \n        this.waitForNetworkRecovery();\n        break;\n        \n      case 'pageReload':\n        //   \n        this.emit('recommendPageReload');\n        break;\n        \n      case 'checkServer':\n        //   \n        this.options.reconnectDelay = Math.min(this.options.reconnectDelay * 2, 30000);\n        break;\n        \n      case 'clearQueue':\n        //   \n        this.messageQueue = [];\n        this.emit('queueCleared');\n        break;\n        \n      case 'contactSupport':\n        //      \n        this.emit('contactSupportRecommended', {\n          errorRate: this.connectionStats.totalErrors / this.connectionStats.totalMessages,\n          totalErrors: this.connectionStats.totalErrors\n        });\n        break;\n    }\n  }\n}\n\nexport default ResilientWebSocket;","import { useAuth } from '../contexts/AuthContext';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport ResilientWebSocket from '../services/ResilientWebSocket';\nimport { WS_BASE_URL } from '../config/api';\n\n/**\n *   WebSocket \n */\nconst handleWebSocketClose = (code, reason) => {\n  const errorMap = {\n    1008: 'Authentication failed',\n    1003: 'Access denied', \n    1011: 'Server error',\n    1006: 'Connection lost',\n    1000: 'Normal closure'\n  };\n  \n  const message = errorMap[code] || 'Unknown error';\n  console.log(`WebSocket closed: ${code} - ${message} (${reason})`);\n  \n  //       \n  const permanentErrors = [1008, 1003];\n  return !permanentErrors.includes(code);\n};\n\n/**\n *   WebSocket    ResilientWebSocket\n *   2.2, 2.3, 6.3  \n */\nexport const useChatWebSocket = (sessionId, onNewMessage, onTyping, onSessionUpdate) => {\n  const { user } = useAuth();\n  const typingTimeoutRef = useRef(null);\n  const isTypingRef = useRef(false);\n  const websocketRef = useRef(null);\n  const [isConnected, setIsConnected] = useState(false);\n  const [connectionState, setConnectionState] = useState('disconnected');\n\n  //   ResilientWebSocket \n  const createWebSocket = useCallback(() => {\n    if (!user) return null;\n    \n    const token = localStorage.getItem('token');\n    if (!token) return null;\n    \n    //      \n    if (websocketRef.current) {\n      websocketRef.current.disconnect();\n      websocketRef.current = null;\n    }\n    \n    //    sessionId\n    const cleanSessionId = sessionId ? String(sessionId).replace(/[^0-9]/g, '') : null;\n    \n    //     WebSocket URL ( localhost  )\n    const wsBaseUrl = process.env.REACT_APP_WS_URL || WS_BASE_URL;\n    \n    let url;\n    if (cleanSessionId && cleanSessionId.length > 0) {\n      url = `${wsBaseUrl}/session/${cleanSessionId}?token=${token}`;\n    } else {\n      url = `${wsBaseUrl}/general?token=${token}`;\n    }\n    \n    console.log('Creating ResilientWebSocket connection to:', url);\n    \n    try {\n      const ws = new ResilientWebSocket(url, {\n        maxReconnectAttempts: 10,\n        reconnectDelay: 1000,\n        maxReconnectDelay: 30000,\n        pingInterval: 30000,\n        pongTimeout: 10000\n      });\n      \n      websocketRef.current = ws;\n      \n      //  \n      ws.on('open', () => {\n        console.log('ResilientWebSocket connected successfully');\n        setIsConnected(true);\n      });\n      \n      ws.on('close', ({ code, reason }) => {\n        console.log('ResilientWebSocket closed:', code, reason);\n        setIsConnected(false);\n      });\n      \n      ws.on('stateChange', (state) => {\n        console.log('ResilientWebSocket state changed:', state);\n        setConnectionState(state);\n        setIsConnected(state === 'connected');\n      });\n      \n      ws.on('message', (data) => {\n        console.log('ResilientWebSocket message received:', data);\n        \n        if (data.type === 'pong') {\n          console.log('Pong received');\n          return;\n        }\n        \n        //   \n        switch (data.type) {\n          case 'new_message':\n            onNewMessage?.(data.data);\n            break;\n          case 'typing':\n            onTyping?.(data.user_id, data.is_typing);\n            break;\n          case 'session_update':\n            onSessionUpdate?.(data.data);\n            break;\n          case 'generation_stopped':\n            console.log('Generation stopped:', data.message);\n            break;\n          default:\n            console.log('Unknown message type:', data.type);\n            break;\n        }\n      });\n      \n      ws.on('error', (error) => {\n        console.error('ResilientWebSocket error:', error);\n      });\n      \n      // \n      ws.connect().catch(error => {\n        console.error('Failed to connect ResilientWebSocket:', error);\n      });\n      \n      return ws;\n    } catch (err) {\n      console.error('Failed to create ResilientWebSocket:', err);\n      return null;\n    }\n  }, [user, sessionId, onNewMessage, onTyping, onSessionUpdate]);\n\n  // Ping/pong    ResilientWebSocket\n\n  //   \n  useEffect(() => {\n    if (user && sessionId !== undefined) {\n      createWebSocket();\n    }\n\n    return () => {\n      //   \n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current);\n      }\n      if (websocketRef.current) {\n        websocketRef.current.disconnect();\n        websocketRef.current = null;\n      }\n    };\n  }, [user, sessionId, createWebSocket]);\n\n  //    \n  const sendMessage = useCallback((message) => {\n    if (websocketRef.current) {\n      //  sessionId   \n      const payload = {\n        ...message,\n        session_id: sessionId\n      };\n      return websocketRef.current.send(payload);\n    }\n    console.warn('ResilientWebSocket not available, message queued');\n    return false;\n  }, [sessionId]);\n\n  //        debounce\n  const sendTyping = useCallback((isTyping) => {\n    if (isTypingRef.current === isTyping) return;\n\n    //      \n    if (isTyping) {\n      isTypingRef.current = true;\n      sendMessage({ type: 'typing', is_typing: true });\n\n      // -  3 \n      clearTimeout(typingTimeoutRef.current);\n      typingTimeoutRef.current = setTimeout(() => {\n        sendTyping(false);\n      }, 3000);\n    } else {\n      //     ,      \n      clearTimeout(typingTimeoutRef.current);\n      typingTimeoutRef.current = setTimeout(() => {\n        isTypingRef.current = false;\n        sendMessage({ type: 'typing', is_typing: false });\n      }, 300);\n    }\n  }, [sendMessage]);\n\n  //      \n  const joinSession = useCallback((newSessionId) => {\n    sendMessage({\n      type: 'join_session',\n      session_id: newSessionId\n    });\n  }, [sendMessage]);\n\n  //    -\n  const sendChatMessage = useCallback((content) => {\n    return sendMessage({\n      type: 'new_message',\n      content: content\n    });\n  }, [sendMessage]);\n\n  //    \n  const stopGeneration = useCallback(() => {\n    return sendMessage({\n      type: 'stop_generation'\n    });\n  }, [sendMessage]);\n\n  //    \n  const connect = useCallback(() => {\n    if (websocketRef.current && websocketRef.current.isConnected) {\n      console.log('ResilientWebSocket already connected');\n      return;\n    }\n    createWebSocket();\n  }, [createWebSocket]);\n\n  //   \n  const disconnect = useCallback(() => {\n    if (websocketRef.current) {\n      websocketRef.current.disconnect();\n      websocketRef.current = null;\n    }\n    setIsConnected(false);\n    setConnectionState('disconnected');\n  }, []);\n\n  //    \n  const forceReconnect = useCallback(() => {\n    if (websocketRef.current) {\n      websocketRef.current.reconnect();\n    } else {\n      createWebSocket();\n    }\n  }, [createWebSocket]);\n\n  return {\n    isConnected,\n    connectionState,\n    websocket: websocketRef.current,\n    sendTyping,\n    joinSession,\n    sendChatMessage,\n    stopGeneration,\n    connect,\n    disconnect,\n    forceReconnect\n  };\n};\n","import { useCallback } from 'react';\n\n/**\n *        \n *   API     \n */\nexport const useStatusNotifications = () => {\n  const showError = useCallback((error, options = {}) => {\n    if (window.statusNotifications) {\n      return window.statusNotifications.showError(error, options);\n    }\n    console.error('Status notifications not available:', error);\n  }, []);\n\n  const showSuccess = useCallback((message, options = {}) => {\n    if (window.statusNotifications) {\n      return window.statusNotifications.showSuccess(message, options);\n    }\n    console.log('Success:', message);\n  }, []);\n\n  const showInfo = useCallback((message, options = {}) => {\n    if (window.statusNotifications) {\n      return window.statusNotifications.showInfo(message, options);\n    }\n    console.info('Info:', message);\n  }, []);\n\n  const showModelUnavailable = useCallback(() => {\n    if (window.statusNotifications) {\n      return window.statusNotifications.showModelUnavailable();\n    }\n    console.error('Model unavailable');\n  }, []);\n\n  const removeNotification = useCallback((id) => {\n    if (window.statusNotifications) {\n      return window.statusNotifications.removeNotification(id);\n    }\n  }, []);\n\n  //     \n  const showConnectionError = useCallback((error) => {\n    return showError(error, {\n      title: ' ',\n      autoHide: false,\n      actions: [\n        {\n          label: '',\n          action: () => window.location.reload(),\n          primary: true\n        }\n      ]\n    });\n  }, [showError]);\n\n  const showAuthError = useCallback(() => {\n    return showError('  ', {\n      title: ' ',\n      autoHide: false,\n      actions: [\n        {\n          label: '',\n          action: () => window.location.href = '/login',\n          primary: true\n        }\n      ]\n    });\n  }, [showError]);\n\n  const showGenerationStopped = useCallback(() => {\n    return showInfo('   ', {\n      duration: 3000\n    });\n  }, [showInfo]);\n\n  const showGenerationTimeout = useCallback(() => {\n    return showError('   ', {\n      title: ' ',\n      autoHide: false,\n      actions: [\n        {\n          label: ' ',\n          action: () => window.location.reload(),\n          primary: true\n        }\n      ]\n    });\n  }, [showError]);\n\n  return {\n    showError,\n    showSuccess,\n    showInfo,\n    showModelUnavailable,\n    removeNotification,\n    //  \n    showConnectionError,\n    showAuthError,\n    showGenerationStopped,\n    showGenerationTimeout\n  };\n};\n\nexport default useStatusNotifications;","import React, { useState, useRef, useEffect } from 'react';\nimport { Mic, MicOff, Play, Pause, Square, Trash2, Send, Volume2, VolumeX } from 'lucide-react';\nimport { useTheme } from '../contexts/ThemeContext';\n\nconst VoiceRecorder = ({ onSendVoiceMessage, onCancel, maxDuration = 300 }) => {\n  const [isRecording, setIsRecording] = useState(false);\n  const [isPaused, setIsPaused] = useState(false);\n  const [recordingTime, setRecordingTime] = useState(0);\n  const [audioBlob, setAudioBlob] = useState(null);\n  const [audioUrl, setAudioUrl] = useState(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [volume, setVolume] = useState(1);\n  const [isMuted, setIsMuted] = useState(false);\n  const [error, setError] = useState(null);\n  \n  const mediaRecorderRef = useRef(null);\n  const audioRef = useRef(null);\n  const streamRef = useRef(null);\n  const timerRef = useRef(null);\n  const chunksRef = useRef([]);\n  \n  const { isDark } = useTheme();\n\n  //    \n  useEffect(() => {\n    return () => {\n      if (streamRef.current) {\n        streamRef.current.getTracks().forEach(track => track.stop());\n      }\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n      if (audioUrl) {\n        URL.revokeObjectURL(audioUrl);\n      }\n    };\n  }, [audioUrl]);\n\n  //   \n  const checkBrowserSupport = () => {\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n      setError('     ');\n      return false;\n    }\n    return true;\n  };\n\n  //  \n  const startRecording = async () => {\n    if (!checkBrowserSupport()) return;\n\n    try {\n      setError(null);\n      const stream = await navigator.mediaDevices.getUserMedia({ \n        audio: {\n          echoCancellation: true,\n          noiseSuppression: true,\n          sampleRate: 44100\n        } \n      });\n      \n      streamRef.current = stream;\n      \n      const mediaRecorder = new MediaRecorder(stream, {\n        mimeType: 'audio/webm;codecs=opus'\n      });\n      \n      mediaRecorderRef.current = mediaRecorder;\n      chunksRef.current = [];\n      \n      mediaRecorder.ondataavailable = (event) => {\n        if (event.data.size > 0) {\n          chunksRef.current.push(event.data);\n        }\n      };\n      \n      mediaRecorder.onstop = () => {\n        const blob = new Blob(chunksRef.current, { type: 'audio/webm' });\n        setAudioBlob(blob);\n        const url = URL.createObjectURL(blob);\n        setAudioUrl(url);\n        \n        //   \n        stream.getTracks().forEach(track => track.stop());\n      };\n      \n      mediaRecorder.start(100); //   100\n      setIsRecording(true);\n      setRecordingTime(0);\n      \n      //  \n      timerRef.current = setInterval(() => {\n        setRecordingTime(prev => {\n          if (prev >= maxDuration) {\n            stopRecording();\n            return maxDuration;\n          }\n          return prev + 1;\n        });\n      }, 1000);\n      \n    } catch (err) {\n      console.error('Error starting recording:', err);\n      setError('   .   .');\n    }\n  };\n\n  // / \n  const togglePause = () => {\n    if (!mediaRecorderRef.current) return;\n    \n    if (isPaused) {\n      mediaRecorderRef.current.resume();\n      setIsPaused(false);\n      //  \n      timerRef.current = setInterval(() => {\n        setRecordingTime(prev => {\n          if (prev >= maxDuration) {\n            stopRecording();\n            return maxDuration;\n          }\n          return prev + 1;\n        });\n      }, 1000);\n    } else {\n      mediaRecorderRef.current.pause();\n      setIsPaused(true);\n      clearInterval(timerRef.current);\n    }\n  };\n\n  //  \n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n      setIsPaused(false);\n      clearInterval(timerRef.current);\n    }\n  };\n\n  //  \n  const togglePlayback = () => {\n    if (!audioRef.current || !audioUrl) return;\n    \n    if (isPlaying) {\n      audioRef.current.pause();\n      setIsPlaying(false);\n    } else {\n      audioRef.current.play();\n      setIsPlaying(true);\n    }\n  };\n\n  //  \n  useEffect(() => {\n    const audio = audioRef.current;\n    if (!audio) return;\n\n    const handleEnded = () => setIsPlaying(false);\n    const handlePlay = () => setIsPlaying(true);\n    const handlePause = () => setIsPlaying(false);\n\n    audio.addEventListener('ended', handleEnded);\n    audio.addEventListener('play', handlePlay);\n    audio.addEventListener('pause', handlePause);\n\n    return () => {\n      audio.removeEventListener('ended', handleEnded);\n      audio.removeEventListener('play', handlePlay);\n      audio.removeEventListener('pause', handlePause);\n    };\n  }, [audioUrl]);\n\n  //   \n  const sendVoiceMessage = () => {\n    if (audioBlob && onSendVoiceMessage) {\n      onSendVoiceMessage(audioBlob, recordingTime);\n      //  \n      setAudioBlob(null);\n      setAudioUrl(null);\n      setRecordingTime(0);\n      if (audioUrl) {\n        URL.revokeObjectURL(audioUrl);\n      }\n    }\n  };\n\n  //  \n  const cancelRecording = () => {\n    stopRecording();\n    setAudioBlob(null);\n    setAudioUrl(null);\n    setRecordingTime(0);\n    if (audioUrl) {\n      URL.revokeObjectURL(audioUrl);\n    }\n    if (onCancel) {\n      onCancel();\n    }\n  };\n\n  //  \n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  return (\n    <div className={`p-4 ${isDark ? 'bg-gray-800' : 'bg-white'} rounded-lg border border-gray-200 dark:border-gray-700 shadow-lg`}>\n      {error && (\n        <div className=\"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg\">\n          <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n        </div>\n      )}\n\n      {/*     */}\n      {audioUrl && (\n        <audio\n          ref={audioRef}\n          src={audioUrl}\n          volume={isMuted ? 0 : volume}\n          onVolumeChange={(e) => setVolume(e.target.volume)}\n        />\n      )}\n\n      {/*   */}\n      {isRecording && (\n        <div className=\"mb-4 flex items-center justify-center space-x-2\">\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-3 h-3 bg-red-500 rounded-full animate-pulse\"></div>\n            <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n              {isPaused ? '' : ''}\n            </span>\n          </div>\n          <div className=\"text-lg font-mono text-gray-900 dark:text-gray-100\">\n            {formatTime(recordingTime)}\n          </div>\n        </div>\n      )}\n\n      {/*   */}\n      {isRecording && (\n        <div className=\"mb-4 flex items-center justify-center space-x-1\">\n          {[...Array(20)].map((_, i) => (\n            <div\n              key={i}\n              className={`w-1 bg-primary-500 rounded-full animate-pulse`}\n              style={{\n                height: `${Math.random() * 20 + 10}px`,\n                animationDelay: `${i * 0.1}s`\n              }}\n            />\n          ))}\n        </div>\n      )}\n\n      {/*   */}\n      <div className=\"flex items-center justify-center space-x-4\">\n        {!isRecording && !audioBlob && (\n          <button\n            onClick={startRecording}\n            className=\"p-3 bg-red-500 hover:bg-red-600 text-white rounded-full transition-colors duration-200 shadow-lg\"\n            title=\" \"\n          >\n            <Mic className=\"h-6 w-6\" />\n          </button>\n        )}\n\n        {isRecording && (\n          <>\n            <button\n              onClick={togglePause}\n              className=\"p-3 bg-yellow-500 hover:bg-yellow-600 text-white rounded-full transition-colors duration-200\"\n              title={isPaused ? ' ' : ''}\n            >\n              {isPaused ? <Play className=\"h-6 w-6\" /> : <Pause className=\"h-6 w-6\" />}\n            </button>\n            \n            <button\n              onClick={stopRecording}\n              className=\"p-3 bg-gray-500 hover:bg-gray-600 text-white rounded-full transition-colors duration-200\"\n              title=\" \"\n            >\n              <Square className=\"h-6 w-6\" />\n            </button>\n          </>\n        )}\n\n        {audioBlob && (\n          <>\n            <button\n              onClick={togglePlayback}\n              className=\"p-3 bg-blue-500 hover:bg-blue-600 text-white rounded-full transition-colors duration-200\"\n              title={isPlaying ? '' : ''}\n            >\n              {isPlaying ? <Pause className=\"h-6 w-6\" /> : <Play className=\"h-6 w-6\" />}\n            </button>\n            \n            <button\n              onClick={() => setIsMuted(!isMuted)}\n              className=\"p-3 bg-gray-500 hover:bg-gray-600 text-white rounded-full transition-colors duration-200\"\n              title={isMuted ? ' ' : ' '}\n            >\n              {isMuted ? <VolumeX className=\"h-6 w-6\" /> : <Volume2 className=\"h-6 w-6\" />}\n            </button>\n            \n            <button\n              onClick={sendVoiceMessage}\n              className=\"p-3 bg-green-500 hover:bg-green-600 text-white rounded-full transition-colors duration-200\"\n              title=\"  \"\n            >\n              <Send className=\"h-6 w-6\" />\n            </button>\n            \n            <button\n              onClick={cancelRecording}\n              className=\"p-3 bg-red-500 hover:bg-red-600 text-white rounded-full transition-colors duration-200\"\n              title=\" \"\n            >\n              <Trash2 className=\"h-6 w-6\" />\n            </button>\n          </>\n        )}\n      </div>\n\n      {/*    */}\n      {audioBlob && (\n        <div className=\"mt-4 text-center\">\n          <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n            : {formatTime(recordingTime)} | \n            : {(audioBlob.size / 1024).toFixed(1)} KB\n          </p>\n        </div>\n      )}\n\n      {/* -    */}\n      {isRecording && (\n        <div className=\"mt-4\">\n          <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2\">\n            <div\n              className=\"bg-primary-500 h-2 rounded-full transition-all duration-1000\"\n              style={{ width: `${(recordingTime / maxDuration) * 100}%` }}\n            />\n          </div>\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center\">\n            : {formatTime(maxDuration)}\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default VoiceRecorder;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Eraser\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNyAyMS00LjMtNC4zYy0xLTEtMS0yLjUgMC0zLjRsOS42LTkuNmMxLTEgMi41LTEgMy40IDBsNS42IDUuNmMxIDEgMSAyLjUgMCAzLjRMMTMgMjEiIC8+CiAgPHBhdGggZD0iTTIyIDIxSDciIC8+CiAgPHBhdGggZD0ibTUgMTEgOSA5IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/eraser\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Eraser = createLucideIcon('Eraser', [\n  [\n    'path',\n    {\n      d: 'm7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21',\n      key: '182aya',\n    },\n  ],\n  ['path', { d: 'M22 21H7', key: 't4ddhn' }],\n  ['path', { d: 'm5 11 9 9', key: '1mo9qw' }],\n]);\n\nexport default Eraser;\n","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { \n  MessageSquare, \n  Plus, \n  Trash2, \n  Edit3, \n  Check, \n  X, \n  Calendar,\n  Clock,\n  ChevronLeft,\n  ChevronRight,\n  Search,\n  Eraser\n} from 'lucide-react';\nimport axios from 'axios';\nimport { getApiUrl } from '../config/api';\n\nconst ChatHistory = ({ \n  currentSessionId, \n  onSessionSelect, \n  onNewChat,\n  isCollapsed,\n  onToggleCollapse,\n  focusSearch = false,\n  hideHeader = false\n}) => {\n  const [sessions, setSessions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [editingSession, setEditingSession] = useState(null);\n  const [editTitle, setEditTitle] = useState('');\n  const [showEmptyChats, setShowEmptyChats] = useState(false); //    \n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const [sessionMessages, setSessionMessages] = useState({}); //    \n  const searchInputRef = React.useRef(null);\n\n  //   \n  const loadSessions = useCallback(async () => {\n    try {\n      setLoading(true);\n      //     include_empty\n      const response = await axios.get(getApiUrl('/chat/sessions'), {\n        params: { include_empty: showEmptyChats }\n      });\n      const sessionsData = response.data || [];\n      \n      //  :   ( updated_at  created_at)\n      const sortedSessions = sessionsData.sort((a, b) => {\n        const dateA = new Date(a.updated_at || a.created_at);\n        const dateB = new Date(b.updated_at || b.created_at);\n        return dateB - dateA; //  \n      });\n      \n      setSessions(sortedSessions);\n      setError(null);\n    } catch (err) {\n      console.error('Error loading sessions:', err);\n      setError('   ');\n    } finally {\n      setLoading(false);\n    }\n  }, [showEmptyChats]);\n\n  useEffect(() => {\n    loadSessions();\n  }, [loadSessions, showEmptyChats]); //    \n\n  //   \n  const handleNewChat = async () => {\n    try {\n      const response = await axios.post(getApiUrl('/chat/sessions'), {\n        title: `  ${new Date().toLocaleDateString('ru-RU')}`\n      });\n      \n      const newSession = response.data;\n      //       ( )\n      setSessions(prev => [newSession, ...prev]);\n      onNewChat(newSession.id);\n    } catch (err) {\n      console.error('Error creating new session:', err);\n      setError('   ');\n    }\n  };\n\n  //  \n  const handleDeleteSession = async (sessionId) => {\n    if (!window.confirm('  ?    .')) {\n      return;\n    }\n\n    try {\n      await axios.delete(getApiUrl(`/chat/sessions/${sessionId}`));\n      setSessions(prev => prev.filter(s => s.id !== sessionId));\n      \n      //    ,  \n      if (sessionId === currentSessionId) {\n        handleNewChat();\n      }\n    } catch (err) {\n      console.error('Error deleting session:', err);\n      setError('  ');\n    }\n  };\n\n  //   \n  const handleClearAllHistory = async () => {\n    if (sessions.length === 0) {\n      return;\n    }\n\n    const confirmMessage = ` ,      ?\\n\\n  ${sessions.length} ${sessions.length === 1 ? '' : sessions.length < 5 ? '' : ''}.\\n\\n   !`;\n    \n    if (!window.confirm(confirmMessage)) {\n      return;\n    }\n\n    try {\n      await axios.delete(getApiUrl('/chat/sessions/all'));\n      setSessions([]);\n      setSessionMessages({});\n      setSearchResults([]);\n      setSearchQuery('');\n      \n      //     \n      handleNewChat();\n    } catch (err) {\n      console.error('Error clearing all history:', err);\n      setError('  ');\n    }\n  };\n\n  //   \n  const startEditing = (session) => {\n    setEditingSession(session.id);\n    setEditTitle(session.title || ' ');\n  };\n\n  //   \n  const saveTitle = async (sessionId) => {\n    try {\n      await axios.put(getApiUrl(`/chat/sessions/${sessionId}`), {\n        title: editTitle.trim() || ' '\n      });\n      \n      setSessions(prev => prev.map(s => \n        s.id === sessionId \n          ? { ...s, title: editTitle.trim() || ' ' }\n          : s\n      ));\n      \n      setEditingSession(null);\n      setEditTitle('');\n    } catch (err) {\n      console.error('Error updating session title:', err);\n      setError('  ');\n    }\n  };\n\n  //  \n  const cancelEditing = () => {\n    setEditingSession(null);\n    setEditTitle('');\n  };\n\n  //  \n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffDays = Math.floor((now - date) / (1000 * 60 * 60 * 24));\n    \n    if (diffDays === 0) {\n      return date.toLocaleTimeString('ru-RU', { hour: '2-digit', minute: '2-digit' });\n    } else if (diffDays === 1) {\n      return '';\n    } else if (diffDays < 7) {\n      return `${diffDays} . `;\n    } else {\n      return date.toLocaleDateString('ru-RU', { day: '2-digit', month: '2-digit' });\n    }\n  };\n\n  //     \n  const truncateTitle = (title, maxLength = 25) => {\n    if (!title) return ' ';\n    return title.length > maxLength ? title.substring(0, maxLength) + '...' : title;\n  };\n\n  //   \n  const searchInHistory = useCallback(async (query) => {\n    if (!query.trim()) {\n      setSearchResults([]);\n      setIsSearching(false);\n      return;\n    }\n\n    setIsSearching(true);\n    const lowerQuery = query.toLowerCase().trim();\n    const results = [];\n\n    try {\n      //     \n      const titleMatches = sessions.filter(session => \n        session.title && session.title.toLowerCase().includes(lowerQuery)\n      );\n\n      for (const session of titleMatches) {\n        results.push({\n          sessionId: session.id,\n          sessionTitle: session.title,\n          matchType: 'title',\n          matchText: session.title\n        });\n      }\n\n      //      \n      for (const session of sessions) {\n        //      \n        if (titleMatches.find(s => s.id === session.id)) continue;\n\n        try {\n          //    ( )\n          let messages = sessionMessages[session.id];\n          if (!messages) {\n            const response = await axios.get(getApiUrl(`/chat/sessions/${session.id}/messages`));\n            messages = response.data || [];\n            setSessionMessages(prev => ({ ...prev, [session.id]: messages }));\n          }\n\n          //    \n          const messageMatches = messages.filter(msg => \n            msg.content && msg.content.toLowerCase().includes(lowerQuery)\n          );\n\n          if (messageMatches.length > 0) {\n            results.push({\n              sessionId: session.id,\n              sessionTitle: session.title,\n              matchType: 'message',\n              matchText: messageMatches[0].content.substring(0, 100),\n              matchCount: messageMatches.length\n            });\n          }\n        } catch (err) {\n          console.error(`Error loading messages for session ${session.id}:`, err);\n        }\n      }\n\n      setSearchResults(results);\n    } catch (err) {\n      console.error('Error searching history:', err);\n      setError('   ');\n    } finally {\n      setIsSearching(false);\n    }\n  }, [sessions, sessionMessages]);\n\n  //    \n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      searchInHistory(searchQuery);\n    }, 300); // Debounce 300ms\n\n    return () => clearTimeout(timeoutId);\n  }, [searchQuery, searchInHistory]);\n\n  //      \n  useEffect(() => {\n    if (focusSearch && !isCollapsed && searchInputRef.current) {\n      //      \n      const timeoutId = setTimeout(() => {\n        searchInputRef.current?.focus();\n        //     (  )\n        if (onToggleCollapse && typeof onToggleCollapse === 'function') {\n          //      \n        }\n      }, 300);\n      return () => clearTimeout(timeoutId);\n    }\n  }, [focusSearch, isCollapsed]);\n\n  //    \n  const filteredSessions = useMemo(() => {\n    if (!searchQuery.trim()) {\n      return sessions;\n    }\n\n    //    ,    \n    const matchedSessionIds = new Set(searchResults.map(r => r.sessionId));\n    return sessions.filter(s => matchedSessionIds.has(s.id));\n  }, [sessions, searchQuery, searchResults]);\n\n  if (loading) {\n    return (\n      <div className={`bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 ${\n        isCollapsed ? 'w-16' : 'w-80'\n      }`}>\n        <div className=\"p-4 flex items-center justify-center\">\n          <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`h-full bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 flex flex-col ${\n      isCollapsed ? 'w-16' : 'w-80'\n    }`}>\n      {/*  */}\n      {!hideHeader && (\n        <div className=\"p-4 border-b border-gray-200 dark:border-gray-700\">\n          <div className=\"flex items-center justify-between mb-4\">\n            {!isCollapsed && (\n              <h2 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">\n                 \n              </h2>\n            )}\n            \n            <button\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                if (onToggleCollapse && typeof onToggleCollapse === 'function') {\n                  onToggleCollapse();\n                }\n              }}\n              className=\"p-2 min-w-[44px] min-h-[44px] text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-all duration-200 flex items-center justify-center touch-manipulation\"\n              title={isCollapsed ? \"\" : \"\"}\n              aria-label={isCollapsed ? \" \" : \" \"}\n              type=\"button\"\n            >\n              {isCollapsed ? <ChevronRight className=\"h-5 w-5\" /> : <ChevronLeft className=\"h-5 w-5\" />}\n            </button>\n          </div>\n        \n          {/*    \" \" */}\n          <button\n            onClick={handleNewChat}\n            className={`w-full btn-glass-primary font-semibold rounded-xl transition-all duration-300 ${\n              isCollapsed ? 'p-3' : 'py-3 px-4'\n            }`}\n          >\n            <div className=\"flex items-center justify-center space-x-2\">\n              <Plus className={`${isCollapsed ? 'h-5 w-5' : 'h-5 w-5'}`} />\n              {!isCollapsed && <span> </span>}\n            </div>\n          </button>\n        </div>\n      )}\n\n      {/*   */}\n      <div className=\"flex-1 overflow-y-auto overflow-x-hidden min-h-0\">\n        {error && (\n          <div className=\"p-4\">\n            <div className=\"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg p-3 text-sm text-red-600 dark:text-red-400\">\n              {error}\n            </div>\n          </div>\n        )}\n\n        {sessions.length === 0 && !loading && !error ? (\n          <div className=\"p-4 text-center\">\n            <MessageSquare className=\"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-3\" />\n            {!isCollapsed && (\n              <>\n                <p className=\"text-gray-600 dark:text-gray-400 text-sm mb-3\">\n                  {showEmptyChats ? \"    \" : \"   \"}\n                </p>\n                <button\n                  onClick={handleNewChat}\n                  className=\"btn-glass-primary text-sm px-4 py-2\"\n                >\n                    \n                </button>\n              </>\n            )}\n          </div>\n        ) : (\n          <div className=\"p-2 space-y-1\">\n            {filteredSessions.map((session) => {\n              //       \n              const searchMatch = searchResults.find(r => r.sessionId === session.id);\n              \n              return (\n              <div\n                key={session.id}\n                className={`group relative rounded-lg transition-all duration-200 ${\n                  session.id === currentSessionId\n                    ? 'bg-primary-100 dark:bg-primary-900/50 border border-primary-200 dark:border-primary-800'\n                    : 'hover:bg-gray-100 dark:hover:bg-gray-700 border border-transparent'\n                }`}\n              >\n                <button\n                  onClick={(e) => {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    console.log('  :', session.id, ' :', currentSessionId);\n                    if (onSessionSelect && typeof onSessionSelect === 'function') {\n                      onSessionSelect(session.id);\n                    } else {\n                      console.error('onSessionSelect   :', onSessionSelect);\n                    }\n                  }}\n                  className={`w-full p-3 text-left transition-all duration-200 ${\n                    isCollapsed ? 'px-2' : ''\n                  }`}\n                  title={isCollapsed ? session.title || ' ' : ''}\n                >\n                  <div className=\"flex items-center space-x-3\">\n                    <MessageSquare className={`flex-shrink-0 ${\n                      session.id === currentSessionId\n                        ? 'text-primary-600 dark:text-primary-400'\n                        : 'text-gray-500 dark:text-gray-400'\n                    } ${isCollapsed ? 'h-5 w-5' : 'h-4 w-4'}`} />\n                    \n                    {!isCollapsed && (\n                      <div className=\"flex-1 min-w-0\">\n                        {editingSession === session.id ? (\n                          <div className=\"flex items-center space-x-2\">\n                            <input\n                              type=\"text\"\n                              value={editTitle}\n                              onChange={(e) => setEditTitle(e.target.value)}\n                              onKeyPress={(e) => {\n                                if (e.key === 'Enter') saveTitle(session.id);\n                                if (e.key === 'Escape') cancelEditing();\n                              }}\n                              className=\"flex-1 px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100\"\n                              autoFocus\n                            />\n                            <button\n                              onClick={() => saveTitle(session.id)}\n                              className=\"p-1 text-green-600 hover:text-green-700\"\n                            >\n                              <Check className=\"h-3 w-3\" />\n                            </button>\n                            <button\n                              onClick={cancelEditing}\n                              className=\"p-1 text-red-600 hover:text-red-700\"\n                            >\n                              <X className=\"h-3 w-3\" />\n                            </button>\n                          </div>\n                        ) : (\n                          <>\n                            <p className={`text-sm font-medium truncate ${\n                              session.id === currentSessionId\n                                ? 'text-primary-800 dark:text-primary-200'\n                                : 'text-gray-900 dark:text-gray-100'\n                            }`}>\n                              {truncateTitle(session.title)}\n                            </p>\n                            \n                            {/*       */}\n                            {searchMatch ? (\n                              <div className=\"mt-1\">\n                                <p className=\"text-xs text-primary-600 dark:text-primary-400 font-medium\">\n                                  {searchMatch.matchType === 'title' ? '  ' : \n                                   ` ${searchMatch.matchCount || 1} ${searchMatch.matchCount === 1 ? '' : ''}`}\n                                </p>\n                                {searchMatch.matchType === 'message' && (\n                                  <p className=\"text-xs text-gray-500 dark:text-gray-400 truncate mt-0.5\">\n                                    {searchMatch.matchText}...\n                                  </p>\n                                )}\n                              </div>\n                            ) : session.last_message_preview && (\n                              <p className=\"text-xs text-gray-500 dark:text-gray-400 truncate mt-1\">\n                                {session.last_message_preview}\n                              </p>\n                            )}\n                            \n                            <p className=\"text-xs text-gray-400 dark:text-gray-500 flex items-center mt-1\">\n                              <Clock className=\"h-3 w-3 mr-1\" />\n                              {formatDate(session.last_message_time || session.updated_at || session.created_at)}\n                            </p>\n                          </>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                </button>\n\n                {/*    */}\n                {!isCollapsed && editingSession !== session.id && (\n                  <div className=\"absolute right-2 top-1/2 transform -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200\">\n                    <div className=\"flex items-center space-x-1\">\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          startEditing(session);\n                        }}\n                        className=\"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-white dark:hover:bg-gray-800 rounded transition-all duration-200\"\n                        title=\"\"\n                      >\n                        <Edit3 className=\"h-3 w-3\" />\n                      </button>\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleDeleteSession(session.id);\n                        }}\n                        className=\"p-1.5 text-gray-400 hover:text-red-600 hover:bg-white dark:hover:bg-gray-800 rounded transition-all duration-200\"\n                        title=\"\"\n                      >\n                        <Trash2 className=\"h-3 w-3\" />\n                      </button>\n                    </div>\n                  </div>\n                )}\n              </div>\n            );\n            })}\n          </div>\n        )}\n      </div>\n\n      {/*    -  ,   */}\n      {!isCollapsed && (\n        <div className=\"flex-shrink-0 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 overflow-visible\">\n          {/*   -   ,   */}\n          <div className=\"p-3\">\n            <div className=\"relative mb-2\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 dark:text-gray-500 z-10 pointer-events-none\" />\n              <input\n                ref={searchInputRef}\n                type=\"text\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                onFocus={() => {\n                  //         \n                  if (focusSearch) {\n                    //         \n                  }\n                }}\n                placeholder=\"  ...\"\n                className=\"w-full pl-10 pr-10 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400\"\n                style={{ display: 'block' }}\n              />\n              {searchQuery && (\n                <button\n                  onClick={() => setSearchQuery('')}\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 z-10\"\n                >\n                  <X className=\"h-4 w-4\" />\n                </button>\n              )}\n            </div>\n\n            {/*   */}\n            {isSearching && (\n              <div className=\"text-xs text-gray-500 dark:text-gray-400 text-center\">\n                ...\n              </div>\n            )}\n\n            {searchQuery.trim() && !isSearching && (\n              <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n                {searchResults.length > 0 ? (\n                  `: ${searchResults.length} ${searchResults.length === 1 ? '' : ''}`\n                ) : (\n                  '  '\n                )}\n              </div>\n            )}\n          </div>\n\n          {/*      */}\n          <div className=\"px-3 pb-3 space-y-2 border-t border-gray-200 dark:border-gray-700 pt-3\">\n            <label className=\"flex items-center justify-between text-xs\">\n              <span className=\"text-gray-600 dark:text-gray-400\">  </span>\n              <button\n                onClick={() => setShowEmptyChats(!showEmptyChats)}\n                className={`relative inline-flex h-4 w-7 items-center rounded-full transition-colors duration-200 ${\n                  showEmptyChats \n                    ? 'bg-primary-600' \n                    : 'bg-gray-300 dark:bg-gray-600'\n                }`}\n              >\n                <span\n                  className={`inline-block h-3 w-3 transform rounded-full bg-white transition-transform duration-200 ${\n                    showEmptyChats ? 'translate-x-3.5' : 'translate-x-0.5'\n                  }`}\n                />\n              </button>\n            </label>\n            \n            <div className=\"text-xs text-gray-500 dark:text-gray-400 flex items-center justify-between\">\n              <span> : {sessions.length}</span>\n              <span className=\"flex items-center\">\n                <Calendar className=\"h-3 w-3 mr-1\" />\n                \n              </span>\n            </div>\n            \n            {/*  \" \" */}\n            {sessions.length > 0 && (\n              <button\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  handleClearAllHistory();\n                }}\n                className=\"w-full btn-glass-danger font-semibold rounded-xl transition-all duration-300 py-2.5 px-4 flex items-center justify-center space-x-2 mt-3\"\n                title=\"   \"\n                aria-label=\"   \"\n                type=\"button\"\n              >\n                <Eraser className=\"h-4 w-4\" />\n                <span> </span>\n              </button>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ChatHistory;\n","import React, { useState } from 'react';\nimport { \n  CheckCircle, \n  AlertTriangle, \n  FileText, \n  ExternalLink, \n  ChevronDown, \n  ChevronUp,\n  Shield,\n  Lightbulb,\n  Clock,\n  Target\n} from 'lucide-react';\n\nconst EnhancedResponse = ({ message, enhancements = {} }) => {\n  const [showDetails, setShowDetails] = useState(false);\n  const [showSources, setShowSources] = useState(false);\n  const [showWarnings, setShowWarnings] = useState(false);\n\n  //   undefined message\n  if (!message) {\n    console.warn('EnhancedResponse: message is undefined');\n    return (\n      <div className=\"text-gray-500 italic\">\n         \n      </div>\n    );\n  }\n\n  if (!message.content) {\n    console.warn('EnhancedResponse: message.content is undefined', message);\n    return (\n      <div className=\"text-gray-500 italic\">\n          \n      </div>\n    );\n  }\n\n  //    enhancements ( message   )\n  const messageEnhancements = message.enhancements || enhancements || {};\n  const factChecking = messageEnhancements.fact_checking || {};\n  const explainability = messageEnhancements.explainability || {};\n  \n  //   - ,     \n  const rawQuality = messageEnhancements.overall_quality;\n  const overallQuality = rawQuality !== undefined && rawQuality !== null ? rawQuality : null;\n  \n  // ,     \n  //    :\n  // -    (null/undefined)\n  // -     0.5 (   )\n  //       0.5\n  const hasQualityRating = overallQuality !== null && overallQuality !== 0.5;\n\n  //   \n  const getQualityLevel = (quality) => {\n    if (quality >= 0.8) return { level: 'high', color: 'text-green-600 dark:text-green-400', bg: 'bg-green-100 dark:bg-green-900/30' };\n    if (quality >= 0.6) return { level: 'medium', color: 'text-yellow-600 dark:text-yellow-400', bg: 'bg-yellow-100 dark:bg-yellow-900/30' };\n    return { level: 'low', color: 'text-red-600 dark:text-red-400', bg: 'bg-red-100 dark:bg-red-900/30' };\n  };\n\n  const qualityInfo = overallQuality !== null ? getQualityLevel(overallQuality) : null;\n\n  //   -\n  const formatMetric = (value) => {\n    if (typeof value === 'number') {\n      return `${(value * 100).toFixed(1)}%`;\n    }\n    return value || 'N/A';\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {/*    */}\n      <div className=\"whitespace-pre-wrap\">\n        {message.content}\n      </div>\n\n      {/*    -        */}\n      {hasQualityRating && qualityInfo && (\n        <div className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${qualityInfo.bg} ${qualityInfo.color} neon-glow-purple`}>\n          <Shield className=\"w-4 h-4 mr-2\" />\n          : {qualityInfo.level === 'high' ? '' : qualityInfo.level === 'medium' ? '' : ''}\n        </div>\n      )}\n\n      {/*     */}\n      <div className=\"flex flex-wrap gap-2\">\n        {Object.keys(factChecking).length > 0 && (\n          <button\n            onClick={() => setShowDetails(!showDetails)}\n            className=\"flex items-center px-3 py-1 bg-blue-100 text-blue-700 rounded-lg text-sm hover:bg-blue-200 transition-colors\"\n          >\n            <Target className=\"w-4 h-4 mr-2\" />\n            -\n            {showDetails ? <ChevronUp className=\"w-4 h-4 ml-1\" /> : <ChevronDown className=\"w-4 h-4 ml-1\" />}\n          </button>\n        )}\n\n        {explainability.sources && explainability.sources.length > 0 && (\n          <button\n            onClick={() => setShowSources(!showSources)}\n            className=\"flex items-center px-3 py-1 bg-green-100 text-green-700 rounded-lg text-sm hover:bg-green-200 transition-colors\"\n          >\n            <FileText className=\"w-4 h-4 mr-2\" />\n             ({explainability.sources.length})\n            {showSources ? <ChevronUp className=\"w-4 h-4 ml-1\" /> : <ChevronDown className=\"w-4 h-4 ml-1\" />}\n          </button>\n        )}\n\n        {explainability.warnings && explainability.warnings.length > 0 && (\n          <button\n            onClick={() => setShowWarnings(!showWarnings)}\n            className=\"flex items-center px-3 py-1 bg-yellow-100 text-yellow-700 rounded-lg text-sm hover:bg-yellow-200 transition-colors\"\n          >\n            <AlertTriangle className=\"w-4 h-4 mr-2\" />\n             ({explainability.warnings.length})\n            {showWarnings ? <ChevronUp className=\"w-4 h-4 ml-1\" /> : <ChevronDown className=\"w-4 h-4 ml-1\" />}\n          </button>\n        )}\n      </div>\n\n      {/*  - */}\n      {showDetails && Object.keys(factChecking).length > 0 && (\n        <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n          <h4 className=\"font-semibold text-blue-900 dark:text-blue-100 mb-3 flex items-center\">\n            <Target className=\"w-5 h-5 mr-2\" />\n             -\n          </h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600 dark:text-gray-400\"> :</span>\n                <span className={`font-medium ${factChecking.citation_recall >= 0.7 ? 'text-green-600' : 'text-red-600'}`}>\n                  {formatMetric(factChecking.citation_recall)}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600 dark:text-gray-400\"> :</span>\n                <span className={`font-medium ${factChecking.support_coverage >= 0.5 ? 'text-green-600' : 'text-yellow-600'}`}>\n                  {formatMetric(factChecking.support_coverage)}\n                </span>\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600 dark:text-gray-400\"> :</span>\n                <span className={`font-medium ${factChecking.hallucination_score <= 0.3 ? 'text-green-600' : 'text-red-600'}`}>\n                  {formatMetric(factChecking.hallucination_score)}\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-sm text-gray-600 dark:text-gray-400\"> :</span>\n                <span className={`font-medium ${factChecking.legal_consistency >= 0.8 ? 'text-green-600' : 'text-yellow-600'}`}>\n                  {formatMetric(factChecking.legal_consistency)}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/*  */}\n      {showSources && explainability.sources && explainability.sources.length > 0 && (\n        <div className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4\">\n          <h4 className=\"font-semibold text-green-900 dark:text-green-100 mb-3 flex items-center\">\n            <FileText className=\"w-5 h-5 mr-2\" />\n             \n          </h4>\n          <div className=\"space-y-3\">\n            {explainability.sources.map((source, index) => (\n              <div key={index} className=\"bg-white dark:bg-gray-800 rounded-lg p-3 border border-green-200 dark:border-green-700\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"font-medium text-gray-900 dark:text-gray-100\">\n                      {source.code} {source.article} {source.part} {source.item}\n                    </div>\n                    {source.edition && (\n                      <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        {source.edition}\n                      </div>\n                    )}\n                    <div className=\"text-sm text-gray-700 dark:text-gray-300 mt-2\">\n                      {source.excerpt}\n                    </div>\n                    {source.url && (\n                      <a\n                        href={source.url}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"inline-flex items-center text-sm text-blue-600 hover:text-blue-800 mt-2\"\n                      >\n                        <ExternalLink className=\"w-4 h-4 mr-1\" />\n                         \n                      </a>\n                    )}\n                  </div>\n                  {source.relevance_score && (\n                    <div className=\"text-xs text-gray-500 dark:text-gray-400 ml-2\">\n                      {Math.round(source.relevance_score * 100)}%\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/*  */}\n      {showWarnings && explainability.warnings && explainability.warnings.length > 0 && (\n        <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4\">\n          <h4 className=\"font-semibold text-yellow-900 dark:text-yellow-100 mb-3 flex items-center\">\n            <AlertTriangle className=\"w-5 h-5 mr-2\" />\n             \n          </h4>\n          <div className=\"space-y-2\">\n            {explainability.warnings.map((warning, index) => (\n              <div key={index} className=\"flex items-start space-x-2 text-sm text-yellow-800 dark:text-yellow-200\">\n                <AlertTriangle className=\"w-4 h-4 mt-0.5 flex-shrink-0\" />\n                <span>{warning}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/*   */}\n      {explainability.user_actions && explainability.user_actions.length > 0 && (\n        <div className=\"bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg p-4\">\n          <h4 className=\"font-semibold text-purple-900 dark:text-purple-100 mb-3 flex items-center\">\n            <Lightbulb className=\"w-5 h-5 mr-2\" />\n            \n          </h4>\n          <div className=\"space-y-2\">\n            {explainability.user_actions.map((action, index) => (\n              <div key={index} className=\"flex items-start space-x-2 text-sm text-purple-800 dark:text-purple-200\">\n                <CheckCircle className=\"w-4 h-4 mt-0.5 flex-shrink-0\" />\n                <span>{action}</span>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/*  ( ) */}\n      {explainability.arguments && explainability.arguments.length > 0 && (\n        <div className=\"bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"font-semibold text-gray-900 dark:text-gray-100 mb-3 flex items-center\">\n            <FileText className=\"w-5 h-5 mr-2\" />\n            \n          </h4>\n          <div className=\"space-y-3\">\n            {explainability.arguments.map((argument, index) => (\n              <div key={index} className=\"bg-white dark:bg-gray-700 rounded-lg p-3\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"text-sm text-gray-700 dark:text-gray-300\">\n                      {argument.text}\n                    </div>\n                    {argument.confidence && (\n                      <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                        : {Math.round(argument.confidence * 100)}%\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/*   */}\n      {explainability.metadata && (\n        <div className=\"text-xs text-gray-500 dark:text-gray-400 flex items-center space-x-4\">\n          <div className=\"flex items-center\">\n            <Clock className=\"w-3 h-3 mr-1\" />\n            {explainability.metadata.created_at && \n              new Date(explainability.metadata.created_at).toLocaleString('ru-RU')\n            }\n          </div>\n          {explainability.metadata.sources_count && (\n            <div>\n              : {explainability.metadata.sources_count}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default EnhancedResponse;\n","import React, { useState } from 'react';\nimport axios from 'axios';\nimport { ThumbsUp, ThumbsDown } from 'lucide-react';\n\nconst FeedbackButtons = ({ messageId, onFeedbackSubmitted }) => {\n  const [feedback, setFeedback] = useState(null);\n  const [showReasonModal, setShowReasonModal] = useState(false);\n  const [selectedReason, setSelectedReason] = useState('');\n  const [comment, setComment] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const reasons = [\n    { value: 'not_answered', label: '   ' },\n    { value: 'inaccurate', label: ' ' },\n    { value: 'hard_to_understand', label: ' ' },\n    { value: 'other', label: '' }\n  ];\n\n  const handlePositiveFeedback = async () => {\n    try {\n      setIsSubmitting(true);\n      const token = localStorage.getItem('token');\n      \n      await axios.post(\n        `${process.env.REACT_APP_API_URL}/api/v1/feedback/rate`,\n        {\n          message_id: messageId,\n          rating: 'positive'\n        },\n        {\n          headers: { Authorization: `Bearer ${token}` }\n        }\n      );\n      \n      setFeedback('positive');\n      if (onFeedbackSubmitted) onFeedbackSubmitted('positive');\n    } catch (error) {\n      console.error('Error submitting positive feedback:', error);\n      alert('  ');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleNegativeFeedback = () => {\n    setShowReasonModal(true);\n  };\n\n  const submitNegativeFeedback = async () => {\n    if (!selectedReason) {\n      alert(',  ');\n      return;\n    }\n\n    try {\n      setIsSubmitting(true);\n      const token = localStorage.getItem('token');\n      \n      await axios.post(\n        `${process.env.REACT_APP_API_URL}/api/v1/feedback/rate`,\n        {\n          message_id: messageId,\n          rating: 'negative',\n          reason: selectedReason,\n          comment: comment || undefined\n        },\n        {\n          headers: { Authorization: `Bearer ${token}` }\n        }\n      );\n      \n      setFeedback('negative');\n      setShowReasonModal(false);\n      if (onFeedbackSubmitted) onFeedbackSubmitted('negative');\n    } catch (error) {\n      console.error('Error submitting negative feedback:', error);\n      alert('  ');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (feedback) {\n    return (\n      <div className=\"flex items-center gap-2 text-sm text-gray-500\">\n        {feedback === 'positive' ? (\n          <>\n            <ThumbsUp className=\"w-4 h-4 text-green-500 fill-current\" />\n            <span>  !</span>\n          </>\n        ) : (\n          <>\n            <ThumbsDown className=\"w-4 h-4 text-red-500 fill-current\" />\n            <span>   !</span>\n          </>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"flex items-center gap-2\">\n        <button\n          onClick={handlePositiveFeedback}\n          disabled={isSubmitting}\n          className=\"flex items-center gap-1 px-3 py-1.5 text-sm text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors disabled:opacity-50\"\n          title=\"\"\n        >\n          <ThumbsUp className=\"w-4 h-4\" />\n          <span></span>\n        </button>\n        \n        <button\n          onClick={handleNegativeFeedback}\n          disabled={isSubmitting}\n          className=\"flex items-center gap-1 px-3 py-1.5 text-sm text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50\"\n          title=\" \"\n        >\n          <ThumbsDown className=\"w-4 h-4\" />\n          <span> </span>\n        </button>\n      </div>\n\n      {/* Modal    */}\n      {showReasonModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-semibold mb-4\">   ?</h3>\n            \n            <div className=\"space-y-2 mb-4\">\n              {reasons.map((reason) => (\n                <label key={reason.value} className=\"flex items-center gap-2 cursor-pointer\">\n                  <input\n                    type=\"radio\"\n                    name=\"reason\"\n                    value={reason.value}\n                    checked={selectedReason === reason.value}\n                    onChange={(e) => setSelectedReason(e.target.value)}\n                    className=\"w-4 h-4 text-blue-600\"\n                  />\n                  <span className=\"text-sm\">{reason.label}</span>\n                </label>\n              ))}\n            </div>\n\n            <textarea\n              value={comment}\n              onChange={(e) => setComment(e.target.value)}\n              placeholder=\"  ()\"\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              rows=\"3\"\n            />\n\n            <div className=\"flex gap-2 mt-4\">\n              <button\n                onClick={submitNegativeFeedback}\n                disabled={isSubmitting || !selectedReason}\n                className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {isSubmitting ? '...' : ''}\n              </button>\n              <button\n                onClick={() => {\n                  setShowReasonModal(false);\n                  setSelectedReason('');\n                  setComment('');\n                }}\n                disabled={isSubmitting}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50\"\n              >\n                \n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default FeedbackButtons;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Server\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMjAiIGhlaWdodD0iOCIgeD0iMiIgeT0iMiIgcng9IjIiIHJ5PSIyIiAvPgogIDxyZWN0IHdpZHRoPSIyMCIgaGVpZ2h0PSI4IiB4PSIyIiB5PSIxNCIgcng9IjIiIHJ5PSIyIiAvPgogIDxsaW5lIHgxPSI2IiB4Mj0iNi4wMSIgeTE9IjYiIHkyPSI2IiAvPgogIDxsaW5lIHgxPSI2IiB4Mj0iNi4wMSIgeTE9IjE4IiB5Mj0iMTgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/server\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Server = createLucideIcon('Server', [\n  ['rect', { width: '20', height: '8', x: '2', y: '2', rx: '2', ry: '2', key: 'ngkwjq' }],\n  ['rect', { width: '20', height: '8', x: '2', y: '14', rx: '2', ry: '2', key: 'iecqi9' }],\n  ['line', { x1: '6', x2: '6.01', y1: '6', y2: '6', key: '16zg32' }],\n  ['line', { x1: '6', x2: '6.01', y1: '18', y2: '18', key: 'nzw8ys' }],\n]);\n\nexport default Server;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Wifi\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxM2ExMCAxMCAwIDAgMSAxNCAwIiAvPgogIDxwYXRoIGQ9Ik04LjUgMTYuNWE1IDUgMCAwIDEgNyAwIiAvPgogIDxwYXRoIGQ9Ik0yIDguODJhMTUgMTUgMCAwIDEgMjAgMCIgLz4KICA8bGluZSB4MT0iMTIiIHgyPSIxMi4wMSIgeTE9IjIwIiB5Mj0iMjAiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/wifi\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Wifi = createLucideIcon('Wifi', [\n  ['path', { d: 'M5 13a10 10 0 0 1 14 0', key: '6v8j51' }],\n  ['path', { d: 'M8.5 16.5a5 5 0 0 1 7 0', key: 'sej527' }],\n  ['path', { d: 'M2 8.82a15 15 0 0 1 20 0', key: 'dnpr2z' }],\n  ['line', { x1: '12', x2: '12.01', y1: '20', y2: '20', key: 'of4bc4' }],\n]);\n\nexport default Wifi;\n","import React from 'react';\nimport { AlertCircle, RefreshCw, Wifi, WifiOff, Server, Clock, Zap } from 'lucide-react';\n\n/**\n *       \n *   6.1  \n */\nconst ErrorMessage = ({ \n  error, \n  onRetry, \n  onReconnect, \n  className = \"\",\n  showIcon = true,\n  variant = \"default\" // \"default\", \"inline\", \"toast\"\n}) => {\n  //      \n  const getErrorInfo = (error) => {\n    if (typeof error === 'string') {\n      return {\n        type: 'general',\n        title: '',\n        message: error,\n        icon: AlertCircle,\n        color: 'red',\n        actions: ['retry']\n      };\n    }\n\n    if (error?.code) {\n      switch (error.code) {\n        case 1008:\n          return {\n            type: 'auth',\n            title: ' ',\n            message: '  . ,    .',\n            icon: AlertCircle,\n            color: 'red',\n            actions: ['login']\n          };\n        \n        case 1006:\n          return {\n            type: 'connection',\n            title: ' ',\n            message: '   .   .',\n            icon: WifiOff,\n            color: 'orange',\n            actions: ['reconnect', 'retry']\n          };\n        \n        case 1011:\n          return {\n            type: 'server',\n            title: ' ',\n            message: '   .      .',\n            icon: Server,\n            color: 'red',\n            actions: ['retry', 'support']\n          };\n        \n        case 408:\n          return {\n            type: 'timeout',\n            title: '  ',\n            message: '     .   .',\n            icon: Clock,\n            color: 'orange',\n            actions: ['retry']\n          };\n        \n        case 503:\n          return {\n            type: 'overload',\n            title: ' ',\n            message: '  .     .',\n            icon: Zap,\n            color: 'yellow',\n            actions: ['retry']\n          };\n        \n        default:\n          return {\n            type: 'unknown',\n            title: ' ',\n            message: error.message || '  .   .',\n            icon: AlertCircle,\n            color: 'red',\n            actions: ['retry']\n          };\n      }\n    }\n\n    // HTTP \n    if (error?.response?.status) {\n      const status = error.response.status;\n      \n      if (status === 401) {\n        return {\n          type: 'auth',\n          title: ' ',\n          message: ',      .',\n          icon: AlertCircle,\n          color: 'red',\n          actions: ['login']\n        };\n      }\n      \n      if (status === 429) {\n        return {\n          type: 'rate_limit',\n          title: '  ',\n          message: '    .     .',\n          icon: Clock,\n          color: 'orange',\n          actions: ['wait']\n        };\n      }\n      \n      if (status === 503) {\n        return {\n          type: 'overload',\n          title: ' ',\n          message: '  .     .',\n          icon: Zap,\n          color: 'yellow',\n          actions: ['retry']\n        };\n      }\n      \n      if (status >= 500) {\n        return {\n          type: 'server',\n          title: ' ',\n          message: '   .      .',\n          icon: Server,\n          color: 'red',\n          actions: ['retry', 'support']\n        };\n      }\n    }\n\n    //  \n    if (error?.request && !error?.response) {\n      return {\n        type: 'network',\n        title: '  ',\n        message: '    .    .',\n        icon: WifiOff,\n        color: 'red',\n        actions: ['reconnect', 'retry']\n      };\n    }\n\n    //   \n    if (error?.message?.includes('') || error?.message?.includes('')) {\n      return {\n        type: 'ai_model',\n        title: '  ',\n        message: '    .  .',\n        icon: AlertCircle,\n        color: 'orange',\n        actions: ['retry', 'support']\n      };\n    }\n\n    //  \n    return {\n      type: 'general',\n      title: ' ',\n      message: error?.message || '-   .   .',\n      icon: AlertCircle,\n      color: 'red',\n      actions: ['retry']\n    };\n  };\n\n  const errorInfo = getErrorInfo(error);\n  const Icon = errorInfo.icon;\n\n  const getColorClasses = (color) => {\n    const colorMap = {\n      red: 'bg-red-50 border-red-200 text-red-800',\n      orange: 'bg-orange-50 border-orange-200 text-orange-800',\n      yellow: 'bg-yellow-50 border-yellow-200 text-yellow-800',\n      blue: 'bg-blue-50 border-blue-200 text-blue-800'\n    };\n    return colorMap[color] || colorMap.red;\n  };\n\n  const getButtonColorClasses = (color) => {\n    const colorMap = {\n      red: 'bg-red-600 hover:bg-red-700 text-white',\n      orange: 'bg-orange-600 hover:bg-orange-700 text-white',\n      yellow: 'bg-yellow-600 hover:bg-yellow-700 text-white',\n      blue: 'bg-blue-600 hover:bg-blue-700 text-white'\n    };\n    return colorMap[color] || colorMap.red;\n  };\n\n  const renderActions = () => {\n    return errorInfo.actions.map(action => {\n      switch (action) {\n        case 'retry':\n          return (\n            <button\n              key=\"retry\"\n              onClick={onRetry}\n              className={`px-3 py-1 text-sm font-medium rounded transition-colors ${getButtonColorClasses(errorInfo.color)}`}\n            >\n              <RefreshCw className=\"w-4 h-4 inline mr-1\" />\n              \n            </button>\n          );\n        \n        case 'reconnect':\n          return (\n            <button\n              key=\"reconnect\"\n              onClick={onReconnect}\n              className={`px-3 py-1 text-sm font-medium rounded transition-colors ${getButtonColorClasses(errorInfo.color)}`}\n            >\n              <Wifi className=\"w-4 h-4 inline mr-1\" />\n              \n            </button>\n          );\n        \n        case 'login':\n          return (\n            <button\n              key=\"login\"\n              onClick={() => window.location.href = '/login'}\n              className={`px-3 py-1 text-sm font-medium rounded transition-colors ${getButtonColorClasses(errorInfo.color)}`}\n            >\n              \n            </button>\n          );\n        \n        case 'support':\n          return (\n            <button\n              key=\"support\"\n              onClick={() => window.open('mailto:support@advacodex.com', '_blank')}\n              className=\"px-3 py-1 text-sm font-medium bg-gray-600 hover:bg-gray-700 text-white rounded transition-colors\"\n            >\n              \n            </button>\n          );\n        \n        case 'wait':\n          return (\n            <span key=\"wait\" className=\"text-sm text-gray-600\">\n               1-2 \n            </span>\n          );\n        \n        default:\n          return null;\n      }\n    });\n  };\n\n  if (variant === \"toast\") {\n    return (\n      <div className={`fixed top-4 right-4 z-50 max-w-sm ${className}`}>\n        <div className={`p-4 rounded-lg border shadow-lg ${getColorClasses(errorInfo.color)}`}>\n          <div className=\"flex items-start space-x-3\">\n            {showIcon && <Icon className=\"w-5 h-5 mt-0.5 flex-shrink-0\" />}\n            <div className=\"flex-1\">\n              <h4 className=\"text-sm font-medium mb-1\">{errorInfo.title}</h4>\n              <p className=\"text-sm opacity-90 mb-3\">{errorInfo.message}</p>\n              <div className=\"flex space-x-2\">\n                {renderActions()}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (variant === \"inline\") {\n    return (\n      <div className={`flex items-center space-x-2 p-2 rounded ${getColorClasses(errorInfo.color)} ${className}`}>\n        {showIcon && <Icon className=\"w-4 h-4 flex-shrink-0\" />}\n        <span className=\"text-sm flex-1\">{errorInfo.message}</span>\n        <div className=\"flex space-x-1\">\n          {renderActions()}\n        </div>\n      </div>\n    );\n  }\n\n  // Default variant\n  return (\n    <div className={`p-4 rounded-lg border ${getColorClasses(errorInfo.color)} ${className}`}>\n      <div className=\"flex items-start space-x-3\">\n        {showIcon && <Icon className=\"w-5 h-5 mt-0.5 flex-shrink-0\" />}\n        <div className=\"flex-1\">\n          <h3 className=\"text-sm font-medium mb-1\">{errorInfo.title}</h3>\n          <p className=\"text-sm opacity-90 mb-3\">{errorInfo.message}</p>\n          <div className=\"flex space-x-2\">\n            {renderActions()}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ErrorMessage;","import React, { useState, useEffect } from 'react';\nimport { Bot, Square, Clock, Zap, Brain } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\n/**\n *   \" ...\"   \n *   6.4, 6.5  \n */\nconst AIThinkingIndicator = ({ \n  isGenerating, \n  onStop, \n  startTime,\n  estimatedTime,\n  className = \"\",\n  variant = \"default\" // \"default\", \"compact\", \"detailed\"\n}) => {\n  const [elapsedTime, setElapsedTime] = useState(0);\n  const [thinkingPhase, setThinkingPhase] = useState(0);\n\n  //  \"\"     \n  const thinkingPhases = [\n    { text: \"   ...\", icon: Brain },\n    { text: \"   ...\", icon: Zap },\n    { text: \"  ...\", icon: Bot },\n    { text: \"   ...\", icon: Clock }\n  ];\n\n  //    \n  useEffect(() => {\n    if (!isGenerating || !startTime) {\n      setElapsedTime(0);\n      setThinkingPhase(0);\n      return;\n    }\n\n    const interval = setInterval(() => {\n      const elapsed = Math.floor((Date.now() - startTime) / 1000);\n      setElapsedTime(elapsed);\n\n      //    5 \n      const phase = Math.floor(elapsed / 5) % thinkingPhases.length;\n      setThinkingPhase(phase);\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, [isGenerating, startTime, thinkingPhases.length]);\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return mins > 0 ? `${mins}:${secs.toString().padStart(2, '0')}` : `${secs}`;\n  };\n\n  const getProgressPercentage = () => {\n    if (!estimatedTime) return 0;\n    return Math.min((elapsedTime / estimatedTime) * 100, 95); //  95%  \n  };\n\n  const currentPhase = thinkingPhases[thinkingPhase];\n  const PhaseIcon = currentPhase.icon;\n\n  if (!isGenerating) return null;\n\n  if (variant === \"compact\") {\n    return (\n      <div className={`flex items-center space-x-2 ${className}`}>\n        <motion.div\n          animate={{ rotate: 360 }}\n          transition={{ duration: 2, repeat: Infinity, ease: \"linear\" }}\n          className=\"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full\"\n        />\n        <span className=\"text-sm text-gray-600\"> ...</span>\n        {onStop && (\n          <button\n            onClick={onStop}\n            className=\"p-1 text-red-600 hover:text-red-700 hover:bg-red-50 rounded transition-colors\"\n            title=\" \"\n          >\n            <Square className=\"w-3 h-3\" />\n          </button>\n        )}\n      </div>\n    );\n  }\n\n  if (variant === \"detailed\") {\n    return (\n      <div className={`bg-white border border-gray-200 rounded-lg p-4 shadow-sm ${className}`}>\n        <div className=\"flex items-start space-x-3\">\n          <div className=\"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center\">\n            <motion.div\n              animate={{ rotate: 360 }}\n              transition={{ duration: 2, repeat: Infinity, ease: \"linear\" }}\n            >\n              <Bot className=\"w-4 h-4 text-white\" />\n            </motion.div>\n          </div>\n          \n          <div className=\"flex-1\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <div className=\"flex items-center space-x-2\">\n                <PhaseIcon className=\"w-4 h-4 text-blue-600\" />\n                <AnimatePresence mode=\"wait\">\n                  <motion.span\n                    key={thinkingPhase}\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, y: -10 }}\n                    className=\"text-sm font-medium text-gray-700\"\n                  >\n                    {currentPhase.text}\n                  </motion.span>\n                </AnimatePresence>\n              </div>\n              \n              <div className=\"flex items-center space-x-2\">\n                <span className=\"text-xs text-gray-500\">\n                  {formatTime(elapsedTime)}\n                </span>\n                {onStop && (\n                  <button\n                    onClick={onStop}\n                    className=\"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors flex items-center space-x-1\"\n                    title=\" \"\n                  >\n                    <Square className=\"w-3 h-3\" />\n                    <span></span>\n                  </button>\n                )}\n              </div>\n            </div>\n            \n            {/* - (   ) */}\n            {estimatedTime && (\n              <div className=\"w-full bg-gray-200 rounded-full h-2 mb-2\">\n                <motion.div\n                  className=\"bg-blue-600 h-2 rounded-full\"\n                  initial={{ width: 0 }}\n                  animate={{ width: `${getProgressPercentage()}%` }}\n                  transition={{ duration: 0.5 }}\n                />\n              </div>\n            )}\n            \n            {/*   */}\n            <div className=\"flex items-center justify-between text-xs text-gray-500\">\n              <span>\n                {estimatedTime ? ` : ${formatTime(estimatedTime)}` : '  ...'}\n              </span>\n              {elapsedTime > 30 && (\n                <span className=\"text-orange-600\">\n                   ,   \n                </span>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Default variant\n  return (\n    <div className={`flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg ${className}`}>\n      <div className=\"flex items-center space-x-3\">\n        <motion.div\n          animate={{ rotate: 360 }}\n          transition={{ duration: 2, repeat: Infinity, ease: \"linear\" }}\n          className=\"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full\"\n        />\n        \n        <div>\n          <AnimatePresence mode=\"wait\">\n            <motion.div\n              key={thinkingPhase}\n              initial={{ opacity: 0, x: 10 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: -10 }}\n              className=\"flex items-center space-x-2\"\n            >\n              <PhaseIcon className=\"w-4 h-4 text-blue-600\" />\n              <span className=\"text-sm font-medium text-gray-700\">\n                {currentPhase.text}\n              </span>\n            </motion.div>\n          </AnimatePresence>\n          \n          <div className=\"flex items-center space-x-2 mt-1\">\n            <span className=\"text-xs text-gray-500\">\n              {formatTime(elapsedTime)}\n            </span>\n            {elapsedTime > 60 && (\n              <span className=\"text-xs text-orange-600\">\n                  \n              </span>\n            )}\n          </div>\n        </div>\n      </div>\n      \n      {onStop && (\n        <button\n          onClick={onStop}\n          className=\"px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors flex items-center space-x-1\"\n          title=\" \"\n        >\n          <Square className=\"w-3 h-3\" />\n          <span></span>\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default AIThinkingIndicator;","import React, { useState, useEffect } from 'react';\nimport { \n  Wifi, \n  WifiOff, \n  RefreshCw, \n  CheckCircle, \n  AlertCircle, \n  Clock,\n  Activity,\n  Zap,\n  Settings\n} from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\n/**\n *       \n *   6.2, 6.3  \n */\nconst EnhancedConnectionStatus = ({ \n  websocket, \n  onReconnect,\n  onForceReconnect,\n  showDetails = false,\n  autoHide = true,\n  className = \"\" \n}) => {\n  const [status, setStatus] = useState(null);\n  const [isVisible, setIsVisible] = useState(false);\n  const [showDetailedInfo, setShowDetailedInfo] = useState(false);\n  const [lastError, setLastError] = useState(null);\n  const [reconnectCountdown, setReconnectCountdown] = useState(0);\n\n  useEffect(() => {\n    if (!websocket) return;\n\n    const updateStatus = () => {\n      const currentStatus = websocket.getStatus();\n      const userStatus = websocket.getUserFriendlyStatus();\n      setStatus({ ...currentStatus, ...userStatus });\n    };\n\n    updateStatus();\n\n    const handleStateChange = (state) => {\n      updateStatus();\n      \n      //    \n      if (['connecting', 'reconnecting', 'failed'].includes(state)) {\n        setIsVisible(true);\n      } else if (state === 'connected') {\n        setIsVisible(true);\n        if (autoHide) {\n          setTimeout(() => setIsVisible(false), 3000);\n        }\n      }\n    };\n\n    const handleError = (error) => {\n      setLastError(error);\n      setIsVisible(true);\n      updateStatus();\n    };\n\n    websocket.on('stateChange', handleStateChange);\n    websocket.on('error', handleError);\n    websocket.on('open', updateStatus);\n    websocket.on('close', updateStatus);\n\n    const interval = setInterval(updateStatus, 5000);\n\n    return () => {\n      websocket.off('stateChange', handleStateChange);\n      websocket.off('error', handleError);\n      websocket.off('open', updateStatus);\n      websocket.off('close', updateStatus);\n      clearInterval(interval);\n    };\n  }, [websocket, autoHide]);\n\n  //    \n  useEffect(() => {\n    if (status?.connectionState === 'reconnecting' && websocket) {\n      const startCountdown = () => {\n        const delay = websocket.options?.reconnectDelay || 1000;\n        const attempts = status.reconnectAttempts || 0;\n        const actualDelay = Math.min(delay * Math.pow(2, attempts), 30000);\n        \n        setReconnectCountdown(Math.ceil(actualDelay / 1000));\n        \n        const countdownInterval = setInterval(() => {\n          setReconnectCountdown(prev => {\n            if (prev <= 1) {\n              clearInterval(countdownInterval);\n              return 0;\n            }\n            return prev - 1;\n          });\n        }, 1000);\n        \n        return countdownInterval;\n      };\n      \n      const interval = startCountdown();\n      return () => clearInterval(interval);\n    }\n  }, [status?.connectionState, status?.reconnectAttempts, websocket]);\n\n  if (!status) return null; \n const getStatusIcon = () => {\n    switch (status.icon) {\n      case 'connected':\n        return <CheckCircle className=\"h-4 w-4 text-green-600\" />;\n      case 'connecting':\n      case 'reconnecting':\n        return (\n          <motion.div\n            animate={{ rotate: 360 }}\n            transition={{ duration: 1, repeat: Infinity, ease: \"linear\" }}\n          >\n            <RefreshCw className=\"h-4 w-4 text-blue-600\" />\n          </motion.div>\n        );\n      case 'disconnected':\n        return <WifiOff className=\"h-4 w-4 text-gray-600\" />;\n      case 'error':\n        return <AlertCircle className=\"h-4 w-4 text-red-600\" />;\n      default:\n        return <Wifi className=\"h-4 w-4 text-gray-600\" />;\n    }\n  };\n\n  const getStatusColor = () => {\n    switch (status.color) {\n      case 'green':\n        return 'bg-green-50 border-green-200 text-green-800';\n      case 'yellow':\n        return 'bg-yellow-50 border-yellow-200 text-yellow-800';\n      case 'orange':\n        return 'bg-orange-50 border-orange-200 text-orange-800';\n      case 'red':\n        return 'bg-red-50 border-red-200 text-red-800';\n      case 'blue':\n        return 'bg-blue-50 border-blue-200 text-blue-800';\n      case 'gray':\n      default:\n        return 'bg-gray-50 border-gray-200 text-gray-800';\n    }\n  };\n\n  const handleReconnectClick = () => {\n    if (onForceReconnect) {\n      onForceReconnect();\n    } else if (onReconnect) {\n      onReconnect();\n    } else if (websocket) {\n      websocket.reconnect();\n    }\n  };\n\n  //    \n  if (!showDetails && !isVisible) {\n    return (\n      <div className={`flex items-center space-x-2 ${className}`}>\n        <div className=\"flex items-center space-x-1\">\n          <div className={`w-2 h-2 rounded-full ${\n            status.connected ? 'bg-green-500 animate-pulse' : 'bg-red-500'\n          }`}></div>\n          <span className={`text-sm font-medium ${\n            status.connected ? 'text-green-600' : 'text-red-600'\n          }`}>\n            {status.connected ? '' : ''}\n          </span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={className}>\n      <AnimatePresence>\n        {(isVisible || showDetails) && (\n          <motion.div\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -10 }}\n            className={`\n              flex items-center justify-between p-3 rounded-lg border transition-all duration-300\n              ${getStatusColor()}\n            `}\n          >\n            <div className=\"flex items-center space-x-3\">\n              {getStatusIcon()}\n              <div>\n                <div className=\"text-sm font-medium\">{status.text}</div>\n                \n                {/*   */}\n                {status.reconnectAttempts > 0 && (\n                  <div className=\"text-xs opacity-75\">\n                     {status.reconnectAttempts}/{websocket?.options?.maxReconnectAttempts || 10}\n                    {reconnectCountdown > 0 && `    ${reconnectCountdown}`}\n                  </div>\n                )}\n                \n                {status.queuedMessages > 0 && (\n                  <div className=\"text-xs opacity-75\">\n                    {status.queuedMessages}   \n                  </div>\n                )}\n                \n                {lastError && status.connectionState === 'failed' && (\n                  <div className=\"text-xs text-red-600 mt-1\">\n                    {lastError.message || ' '}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"flex items-center space-x-2\">\n              {/*   */}\n              {['failed', 'disconnected'].includes(status.connectionState) && (\n                <button\n                  onClick={handleReconnectClick}\n                  className=\"px-3 py-1 text-xs font-medium bg-white rounded border hover:bg-gray-50 transition-colors\"\n                >\n                  \n                </button>\n              )}\n\n              {/*    */}\n              {status.connectionState === 'reconnecting' && (\n                <button\n                  onClick={handleReconnectClick}\n                  className=\"px-3 py-1 text-xs font-medium bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors\"\n                >\n                   \n                </button>\n              )}\n\n              {/*   */}\n              {showDetails && (\n                <button\n                  onClick={() => setShowDetailedInfo(!showDetailedInfo)}\n                  className=\"p-1 hover:bg-white hover:bg-opacity-50 rounded transition-colors\"\n                >\n                  <Activity className=\"h-4 w-4\" />\n                </button>\n              )}\n\n              {/*   */}\n              {isVisible && !showDetails && autoHide && (\n                <button\n                  onClick={() => setIsVisible(false)}\n                  className=\"p-1 hover:bg-white hover:bg-opacity-50 rounded transition-colors\"\n                >\n                  \n                </button>\n              )}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/*   */}\n      <AnimatePresence>\n        {showDetailedInfo && status.stats && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"mt-2 p-3 bg-white rounded-lg border border-gray-200 text-sm\"\n          >\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <div className=\"font-medium text-gray-700 mb-2\"> </div>\n                <div className=\"space-y-1 text-gray-600\">\n                  <div className=\"flex justify-between\">\n                    <span>:</span>\n                    <span>{status.stats.totalConnections}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>:</span>\n                    <span>{status.stats.totalReconnections}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span>:</span>\n                    <span>{status.stats.totalMessages}</span>\n                  </div>\n                </div>\n              </div>\n              \n              <div>\n                <div className=\"font-medium text-gray-700 mb-2\"> </div>\n                <div className=\"space-y-1 text-gray-600\">\n                  {status.stats.lastConnectedAt && (\n                    <div className=\"flex items-center space-x-1\">\n                      <Clock className=\"h-3 w-3\" />\n                      <span className=\"text-xs\">\n                        {new Date(status.stats.lastConnectedAt).toLocaleTimeString()}\n                      </span>\n                    </div>\n                  )}\n                  {status.lastPong && (\n                    <div className=\"flex items-center space-x-1\">\n                      <Zap className=\"h-3 w-3\" />\n                      <span className=\"text-xs\">\n                        Ping: {Date.now() - status.lastPong}ms \n                      </span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n};\n\nexport default EnhancedConnectionStatus;","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport ErrorMessage from './ErrorMessage';\nimport AIThinkingIndicator from './AIThinkingIndicator';\nimport EnhancedConnectionStatus from './EnhancedConnectionStatus';\n\n/**\n *       \n *   6.1, 6.2, 6.3, 6.4, 6.5  \n */\nconst StatusNotificationSystem = ({ \n  websocket,\n  isGenerating,\n  generationStartTime,\n  onStopGeneration,\n  onReconnect,\n  onForceReconnect,\n  className = \"\"\n}) => {\n  const [notifications, setNotifications] = useState([]);\n  const [connectionError, setConnectionError] = useState(null);\n  const [modelError, setModelError] = useState(null);\n  const lastNotificationRef = useRef({});\n  const debounceTimersRef = useRef({});\n\n  //  \n  const removeNotification = useCallback((id) => {\n    setNotifications(prev => prev.filter(n => n.id !== id));\n  }, []);\n\n  //      \n  const addNotification = useCallback((notification) => {\n    //         \n    const notificationKey = `${notification.type}_${notification.title}_${notification.message}`;\n    \n    // ,         \n    const lastShown = lastNotificationRef.current[notificationKey];\n    const now = Date.now();\n    if (lastShown && (now - lastShown) < 5000) {\n      //        5   - \n      return null;\n    }\n\n    //     \n    if (debounceTimersRef.current[notificationKey]) {\n      clearTimeout(debounceTimersRef.current[notificationKey]);\n    }\n\n    const timerId = setTimeout(() => {\n      const id = Date.now() + Math.random();\n      const newNotification = {\n        id,\n        timestamp: Date.now(),\n        autoHide: true,\n        duration: 5000,\n        ...notification,\n        key: notificationKey\n      };\n\n      setNotifications(prev => {\n        //        \n        const filtered = prev.filter(n => \n          !(n.key === notificationKey && n.type === notification.type)\n        );\n        return [...filtered, newNotification];\n      });\n\n      lastNotificationRef.current[notificationKey] = now;\n\n      //  \n      if (newNotification.autoHide) {\n        setTimeout(() => {\n          removeNotification(id);\n        }, newNotification.duration);\n      }\n    }, notification.type === 'error' ? 500 : 100); //    500,   100\n\n    debounceTimersRef.current[notificationKey] = timerId;\n\n    return notificationKey;\n  }, [removeNotification]);\n\n  //    \n  useEffect(() => {\n    return () => {\n      Object.values(debounceTimersRef.current).forEach(timer => {\n        if (timer) clearTimeout(timer);\n      });\n    };\n  }, []);\n\n  //   WebSocket   \n  useEffect(() => {\n    if (!websocket) return;\n\n    let stateChangeTimer = null;\n    let errorTimer = null;\n    let lastState = null;\n    let errorCount = 0;\n\n    const handleStateChange = (state) => {\n      //       \n      if (lastState === state) return;\n      lastState = state;\n\n      //   \n      if (stateChangeTimer) {\n        clearTimeout(stateChangeTimer);\n      }\n\n      //   \n      stateChangeTimer = setTimeout(() => {\n        switch (state) {\n          case 'connected':\n            setConnectionError(null);\n            errorCount = 0; //      \n            //       \n            setNotifications(prev => prev.filter(n => \n              !(n.type === 'error' && n.title === ' ')\n            ));\n            addNotification({\n              type: 'success',\n              title: ' ',\n              message: '    ',\n              duration: 3000\n            });\n            break;\n          \n          case 'reconnecting':\n            //       \n            addNotification({\n              type: 'info',\n              title: '',\n              message: '    ...',\n              autoHide: false\n            });\n            break;\n          \n          case 'failed':\n            errorCount++;\n            //         \n            if (errorCount <= 3) {\n              const error = { code: 1006, message: '    ' };\n              setConnectionError(error);\n              //        \n              setNotifications(prev => prev.filter(n => \n                !(n.type === 'error' && n.title === ' ')\n              ));\n              addNotification({\n                type: 'error',\n                title: ' ',\n                message: '    .  -.',\n                autoHide: false,\n                actions: [\n                  {\n                    label: '',\n                    action: onForceReconnect || onReconnect,\n                    primary: true\n                  }\n                ]\n              });\n            }\n            break;\n        }\n      }, 300); //  300\n    };\n\n    const handleError = (error) => {\n      console.error('WebSocket error:', error);\n      \n      //    \n      if (errorTimer) {\n        clearTimeout(errorTimer);\n      }\n\n      //  \n      errorTimer = setTimeout(() => {\n        let errorNotification = {\n          type: 'error',\n          title: ' ',\n          message: '     ',\n          autoHide: false\n        };\n\n        if (error.code === 1008) {\n          errorNotification = {\n            type: 'error',\n            title: ' ',\n            message: '  .     .',\n            autoHide: false,\n            actions: [\n              {\n                label: '',\n                action: () => window.location.href = '/login',\n                primary: true\n              }\n            ]\n          };\n        }\n\n        //         \n        setNotifications(prev => prev.filter(n => \n          !(n.type === 'error' && n.title === errorNotification.title)\n        ));\n\n        addNotification(errorNotification);\n      }, 500); //   500\n    };\n\n    websocket.on('stateChange', handleStateChange);\n    websocket.on('error', handleError);\n\n    return () => {\n      if (stateChangeTimer) clearTimeout(stateChangeTimer);\n      if (errorTimer) clearTimeout(errorTimer);\n      websocket.off('stateChange', handleStateChange);\n      websocket.off('error', handleError);\n    };\n  }, [websocket, addNotification, onReconnect, onForceReconnect]);\n\n  // API   \n  const showError = useCallback((error, options = {}) => {\n    return addNotification({\n      type: 'error',\n      title: '',\n      message: typeof error === 'string' ? error : error.message,\n      ...options\n    });\n  }, [addNotification]);\n\n  const showSuccess = useCallback((message, options = {}) => {\n    return addNotification({\n      type: 'success',\n      title: '',\n      message,\n      ...options\n    });\n  }, [addNotification]);\n\n  const showInfo = useCallback((message, options = {}) => {\n    return addNotification({\n      type: 'info',\n      title: '',\n      message,\n      ...options\n    });\n  }, [addNotification]);\n\n  const showModelUnavailable = useCallback(() => {\n    setModelError({ message: '   ' });\n    return addNotification({\n      type: 'warning',\n      title: '  ',\n      message: '    .  .',\n      autoHide: false,\n      actions: [\n        {\n          label: '',\n          action: () => window.location.reload(),\n          primary: true\n        }\n      ]\n    });\n  }, [addNotification]);\n\n  //  API     \n  useEffect(() => {\n    window.statusNotifications = {\n      showError,\n      showSuccess,\n      showInfo,\n      showModelUnavailable,\n      removeNotification\n    };\n\n    return () => {\n      delete window.statusNotifications;\n    };\n  }, [showError, showSuccess, showInfo, showModelUnavailable, removeNotification]);\n\n  return (\n    <div className={`fixed inset-0 pointer-events-none z-50 ${className}`}>\n      {/*    */}\n      {isGenerating && (\n        <div className=\"absolute top-20 left-1/2 transform -translate-x-1/2 pointer-events-auto\">\n          <AIThinkingIndicator\n            isGenerating={isGenerating}\n            startTime={generationStartTime}\n            onStop={onStopGeneration}\n            variant=\"detailed\"\n          />\n        </div>\n      )}\n\n      {/*   */}\n      <div className=\"absolute top-4 right-4 pointer-events-auto\">\n        <EnhancedConnectionStatus\n          websocket={websocket}\n          onReconnect={onReconnect}\n          onForceReconnect={onForceReconnect}\n          showDetails={false}\n          autoHide={true}\n        />\n      </div>\n\n      {/*  */}\n      <div className=\"absolute top-4 left-4 space-y-2 pointer-events-auto max-w-sm\">\n        <AnimatePresence>\n          {notifications.map((notification) => (\n            <motion.div\n              key={notification.id}\n              initial={{ opacity: 0, x: -100, scale: 0.9 }}\n              animate={{ opacity: 1, x: 0, scale: 1 }}\n              exit={{ opacity: 0, x: -100, scale: 0.9 }}\n              transition={{ duration: 0.3 }}\n            >\n              <StatusNotification\n                notification={notification}\n                onClose={() => removeNotification(notification.id)}\n              />\n            </motion.div>\n          ))}\n        </AnimatePresence>\n      </div>\n    </div>\n  );\n};\n\n//   \nconst StatusNotification = ({ notification, onClose }) => {\n  const getNotificationStyles = (type) => {\n    const styles = {\n      success: 'bg-green-50 border-green-200 text-green-800',\n      error: 'bg-red-50 border-red-200 text-red-800',\n      warning: 'bg-yellow-50 border-yellow-200 text-yellow-800',\n      info: 'bg-blue-50 border-blue-200 text-blue-800'\n    };\n    return styles[type] || styles.info;\n  };\n\n  return (\n    <div className={`p-4 rounded-lg border shadow-lg ${getNotificationStyles(notification.type)}`}>\n      <div className=\"flex items-start justify-between\">\n        <div className=\"flex-1\">\n          <h4 className=\"text-sm font-medium mb-1\">{notification.title}</h4>\n          <p className=\"text-sm opacity-90\">{notification.message}</p>\n          \n          {notification.actions && (\n            <div className=\"flex space-x-2 mt-3\">\n              {notification.actions.map((action, index) => (\n                <button\n                  key={index}\n                  onClick={action.action}\n                  className={`px-3 py-1 text-xs font-medium rounded transition-colors ${\n                    action.primary\n                      ? 'bg-blue-600 text-white hover:bg-blue-700'\n                      : 'bg-white border hover:bg-gray-50'\n                  }`}\n                >\n                  {action.label}\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n        \n        <button\n          onClick={onClose}\n          className=\"ml-3 text-gray-400 hover:text-gray-600 transition-colors\"\n        >\n          \n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default StatusNotificationSystem;","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { Send, Paperclip, Bot, User, Wifi, WifiOff, File, X, Lightbulb, Mic, Square, RefreshCw, Menu, Settings, Check, History, Clock, ChevronLeft } from 'lucide-react';\nimport { useChatWebSocket } from '../hooks/useChatWebSocket';\nimport { useStatusNotifications } from '../hooks/useStatusNotifications';\nimport {\n  LazyFileUpload,\n  LazyQuestionTemplates\n} from '../components/LazyComponent';\nimport VoiceRecorder from '../components/VoiceRecorder';\nimport VoicePlayer from '../components/VoicePlayer';\nimport ChatHistory from '../components/ChatHistory';\nimport EnhancedResponse from '../components/EnhancedResponse';\nimport FeedbackButtons from '../components/FeedbackButtons';\nimport WebSocketStatus from '../components/WebSocketStatus';\nimport ErrorMessage from '../components/ErrorMessage';\nimport AIThinkingIndicator from '../components/AIThinkingIndicator';\nimport StatusNotificationSystem from '../components/StatusNotificationSystem';\nimport axios from 'axios';\nimport { getApiUrl } from '../config/api';\n\nconst Chat = () => {\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [generationStartTime, setGenerationStartTime] = useState(null);\n  const [sessionId, setSessionId] = useState(null);\n  const [attachedFiles, setAttachedFiles] = useState([]);\n  const [showFileUpload, setShowFileUpload] = useState(false);\n  const [showTemplates, setShowTemplates] = useState(false);\n  const [showVoiceRecorder, setShowVoiceRecorder] = useState(false);\n  const [isInputExpanded, setIsInputExpanded] = useState(false);\n  const [showModeMenu, setShowModeMenu] = useState(false);\n  const [chatMode, setChatMode] = useState('basic'); // 'basic'  'expert'\n  const [modeNotification, setModeNotification] = useState(null);\n  const inputAreaRef = useRef(null);\n  const modeMenuRef = useRef(null);\n  //      ,   - \n  const [isHistoryCollapsed, setIsHistoryCollapsed] = useState(() => {\n    //     \n    if (typeof window !== 'undefined') {\n      const isMobile = window.innerWidth < 768; // md breakpoint\n      //     (true),    (false)\n      return isMobile;\n    }\n    return false;\n  });\n  const [focusHistorySearch, setFocusHistorySearch] = useState(false);\n\n  //     \n  useEffect(() => {\n    if (focusHistorySearch) {\n      const timeoutId = setTimeout(() => {\n        setFocusHistorySearch(false);\n      }, 1000); //   1   \n      return () => clearTimeout(timeoutId);\n    }\n  }, [focusHistorySearch]);\n  const [lastError, setLastError] = useState(null);\n  const messagesEndRef = useRef(null);\n  const messagesContainerRef = useRef(null);\n  const textareaRef = useRef(null);\n  const autoScrollRef = useRef(true);\n  const currentStreamRef = useRef(null);\n  const initializedRef = useRef(false);\n  const [announcement, setAnnouncement] = useState('');\n\n  //   \n  const { showGenerationStopped, showError, showSuccess } = useStatusNotifications();\n\n  const isNearBottom = () => {\n    const el = messagesContainerRef.current;\n    if (!el) return true;\n    const threshold = 120; // px\n    const distanceFromBottom = el.scrollHeight - el.scrollTop - el.clientHeight;\n    return distanceFromBottom <= threshold;\n  };\n\n  const scrollToBottom = () => {\n    const el = messagesContainerRef.current;\n    if (!el) return;\n    el.scrollTop = el.scrollHeight;\n  };\n\n  //    (   WebSocket- )\n  let stopGeneration; //     wsStopGeneration\n\n  //     WebSocket\n  const handleNewMessage = useCallback((messageData) => {\n    if (!messageData || !messageData.content) {\n      console.warn('Received invalid message data:', messageData);\n      return;\n    }\n\n    const aiMessage = {\n      id: `ai_${Date.now()}`,\n      type: 'ai',\n      content: messageData.content,\n      timestamp: new Date().toISOString(),\n      enhancements: messageData.enhancements || {}\n    };\n\n    setMessages(prev => [...prev, aiMessage]);\n    setIsGenerating(false);\n  }, []);\n\n  // WebSocket \n  const {\n    isConnected,\n    connectionState,\n    websocket,\n    sendChatMessage: wsSendChatMessage,\n    stopGeneration: wsStopGeneration,\n    forceReconnect\n  } = useChatWebSocket(sessionId, handleNewMessage);\n\n  //     stopGeneration,   wsStopGeneration\n  stopGeneration = useCallback(() => {\n    if (currentStreamRef.current) {\n      currentStreamRef.current.abort();\n      currentStreamRef.current = null;\n    }\n\n    if (wsStopGeneration) {\n      wsStopGeneration();\n    }\n\n    setIsGenerating(false);\n    setGenerationStartTime(null);\n    \n    //    \n    showGenerationStopped();\n  }, [wsStopGeneration]);\n\n  //   -   \n  useEffect(() => {\n    if (initializedRef.current) return;\n    \n    initializedRef.current = true;\n    \n    //     \n    if ('serviceWorker' in navigator && 'caches' in window) {\n      caches.keys().then(cacheNames => {\n        cacheNames.forEach(cacheName => {\n          if (cacheName.includes('advakod')) {\n            console.log('  :', cacheName);\n            caches.delete(cacheName);\n          }\n        });\n      }).catch(err => console.error('  :', err));\n    }\n    \n    //      \n    setMessages([{\n      id: 'welcome',\n      type: 'ai',\n      content: '!    AI-.      ,     .      .',\n      timestamp: new Date().toISOString()\n    }]);\n    \n    // Session ID       \n  }, []);\n\n  //       \n  useEffect(() => {\n    console.log('useEffect sessionId :', sessionId, 'initialized:', initializedRef.current);\n    \n    const loadSessionMessages = async () => {\n      //      (   sessionId    )\n      if (!initializedRef.current && !sessionId) {\n        console.log('  -    sessionId');\n        return;\n      }\n      \n      if (!sessionId) {\n        console.log(' sessionId,   ');\n        //   sessionId,      \n        setMessages([{\n          id: 'welcome',\n          type: 'ai',\n          content: '!    AI-.      ,     .      .',\n          timestamp: new Date().toISOString()\n        }]);\n        return;\n      }\n\n      console.log('    :', sessionId);\n      \n      try {\n        const apiUrl = getApiUrl(`/chat/sessions/${sessionId}/messages`);\n        console.log('   API:', apiUrl);\n        \n        const response = await axios.get(apiUrl, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        const messagesData = response.data || [];\n        \n        console.log('  :', messagesData.length);\n        \n        //     ,  \n        try {\n          const sessionResponse = await axios.get(getApiUrl(`/chat/sessions/${sessionId}`), {\n            headers: {\n              'Authorization': `Bearer ${localStorage.getItem('token')}`\n            }\n          });\n          if (sessionResponse.data?.chat_mode) {\n            setChatMode(sessionResponse.data.chat_mode);\n            console.log('     :', sessionResponse.data.chat_mode);\n          }\n        } catch (err) {\n          console.warn('      :', err);\n        }\n        \n        //     \n        const formattedMessages = messagesData.map(msg => ({\n          id: `msg_${msg.id}`,\n          type: msg.role === 'user' ? 'user' : 'ai',\n          content: msg.content,\n          timestamp: msg.created_at,\n          enhancements: msg.enhancements || {}\n        }));\n\n        //   ,  \n        if (formattedMessages.length === 0) {\n          console.log('  ,   ');\n          setMessages([{\n            id: 'welcome',\n            type: 'ai',\n            content: '!    AI-.      ,     .      .',\n            timestamp: new Date().toISOString()\n          }]);\n        } else {\n          console.log('  :', formattedMessages.length);\n          setMessages(formattedMessages);\n        }\n        \n        //    \n        setTimeout(() => {\n          scrollToBottom();\n          autoScrollRef.current = true;\n        }, 100);\n      } catch (error) {\n        console.error('    :', error);\n        console.error(' :', error.response?.data || error.message);\n        console.error(':', error.response?.status);\n        setLastError(error);\n        setMessages([{\n          id: 'error',\n          type: 'error',\n          content: `   : ${error.response?.data?.detail || error.message}.   .`,\n          timestamp: new Date().toISOString()\n        }]);\n      }\n    };\n\n    loadSessionMessages();\n  }, [sessionId]); //    sessionId\n\n  //    \n  useEffect(() => {\n    if (autoScrollRef.current) {\n      scrollToBottom();\n    }\n  }, [messages]);\n\n  // Screen reader announcements   AI \n  useEffect(() => {\n    if (messages.length > 0) {\n      const lastMessage = messages[messages.length - 1];\n      if (lastMessage.type === 'ai') {\n        const preview = lastMessage.content.substring(0, 100);\n        setAnnouncement(`Assistant: ${preview}${lastMessage.content.length > 100 ? '...' : ''}`);\n      }\n    }\n  }, [messages]);\n\n  // Auto-expand textarea based on content\n  useEffect(() => {\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto';\n      const scrollHeight = textareaRef.current.scrollHeight;\n      textareaRef.current.style.height = `${Math.min(scrollHeight, 120)}px`;\n    }\n  }, [inputMessage]);\n\n  // Mobile keyboard handling - scroll to bottom when keyboard appears\n  useEffect(() => {\n    const handleResize = () => {\n      if (window.visualViewport) {\n        const viewportHeight = window.visualViewport.height;\n        // Keyboard is visible if viewport height is significantly reduced\n        if (viewportHeight < window.innerHeight * 0.7) {\n          scrollToBottom();\n        }\n      }\n    };\n\n    if (window.visualViewport) {\n      window.visualViewport.addEventListener('resize', handleResize);\n      return () => window.visualViewport.removeEventListener('resize', handleResize);\n    }\n  }, []);\n\n  //     -     \n  useEffect(() => {\n    const handleWindowResize = () => {\n      const isMobile = window.innerWidth < 768; // md breakpoint\n      //         - \n      if (!isMobile && !isHistoryCollapsed) {\n        setIsHistoryCollapsed(true);\n      }\n    };\n\n    window.addEventListener('resize', handleWindowResize);\n    return () => window.removeEventListener('resize', handleWindowResize);\n  }, [isHistoryCollapsed]);\n\n  //   body     (  )\n  useEffect(() => {\n    const isMobile = window.innerWidth < 768;\n    if (!isHistoryCollapsed && isMobile) {\n      //   body\n      document.body.style.overflow = 'hidden';\n      return () => {\n        //   \n        document.body.style.overflow = '';\n      };\n    }\n  }, [isHistoryCollapsed]);\n\n  //  Escape    \n  useEffect(() => {\n    const handleEscape = (e) => {\n      if (e.key === 'Escape' && !isHistoryCollapsed && window.innerWidth < 768) {\n        setIsHistoryCollapsed(true);\n      }\n    };\n\n    if (!isHistoryCollapsed && window.innerWidth < 768) {\n      document.addEventListener('keydown', handleEscape);\n      return () => document.removeEventListener('keydown', handleEscape);\n    }\n  }, [isHistoryCollapsed]);\n\n  const handleContainerScroll = () => {\n    //   :       \n    autoScrollRef.current = isNearBottom();\n  };\n\n  //       DOM\n  const showNotificationDirect = (message, description, type = 'success') => {\n    \n    //     \n    const old = document.getElementById('mode-notification-overlay-direct');\n    if (old) old.remove();\n    \n    //   (dark/light)\n    const isDark = document.documentElement.classList.contains('dark') || \n                   window.matchMedia('(prefers-color-scheme: dark)').matches ||\n                   document.body.classList.contains('dark');\n    \n    //     \n    const bgColor = isDark ? '#1f2937' : '#ffffff'; // gray-800 : white\n    const textColor = isDark ? '#f9fafb' : '#111827'; // gray-50 : gray-900\n    const borderColor = isDark ? '#374151' : '#e5e7eb'; // gray-700 : gray-200\n    const overlayBg = isDark ? 'rgba(0, 0, 0, 0.7)' : 'rgba(0, 0, 0, 0.5)';\n    const closeBtnColor = isDark ? '#9ca3af' : '#6b7280'; // gray-400 : gray-500\n    \n    //  HTML \n    const html = `\n      <div id=\"mode-notification-overlay-direct\" style=\"\n        position: fixed !important;\n        top: 0 !important;\n        left: 0 !important;\n        width: 100vw !important;\n        height: 100vh !important;\n        z-index: 9999999 !important;\n        display: flex !important;\n        align-items: center !important;\n        justify-content: center !important;\n        background-color: ${overlayBg} !important;\n        pointer-events: auto !important;\n      \">\n        <div style=\"\n          background-color: ${bgColor} !important;\n          color: ${textColor} !important;\n          padding: 24px 32px !important;\n          border-radius: 12px !important;\n          border: 1px solid ${borderColor} !important;\n          box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.1) !important;\n          min-width: 380px !important;\n          max-width: 520px !important;\n          display: flex !important;\n          flex-direction: column !important;\n          gap: 12px !important;\n          pointer-events: auto !important;\n        \">\n          <div style=\"display: flex; align-items: center; gap: 16px;\">\n            <div style=\"\n              width: 40px;\n              height: 40px;\n              border-radius: 50%;\n              background-color: ${isDark ? '#374151' : '#f3f4f6'};\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              flex-shrink: 0;\n            \">\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M10 2L3 7V17H8V12H12V17H17V7L10 2Z\" fill=\"${isDark ? '#60a5fa' : '#3b82f6'}\" />\n              </svg>\n            </div>\n            <div style=\"flex: 1;\">\n              <p style=\"\n                margin: 0;\n                font-size: 16px;\n                font-weight: 600;\n                line-height: 1.5;\n                color: ${textColor};\n              \">${message}</p>\n              ${description ? `<p style=\"\n                margin: 4px 0 0 0;\n                font-size: 13px;\n                font-weight: 400;\n                line-height: 1.4;\n                color: ${isDark ? '#9ca3af' : '#6b7280'};\n              \">${description}</p>` : ''}\n            </div>\n            <button onclick=\"this.closest('#mode-notification-overlay-direct').remove()\" style=\"\n              background: none !important;\n              border: none !important;\n              color: ${closeBtnColor} !important;\n              cursor: pointer !important;\n              padding: 4px !important;\n              font-size: 20px !important;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              flex-shrink: 0;\n            \" aria-label=\"\"></button>\n          </div>\n        </div>\n      </div>\n    `;\n    \n    //   body\n    document.body.insertAdjacentHTML('beforeend', html);\n    \n    //    3 \n    setTimeout(() => {\n      const el = document.getElementById('mode-notification-overlay-direct');\n      if (el) el.remove();\n    }, 3000);\n  };\n\n  //   \n  const handleModeChange = async (newMode) => {\n    if (newMode === chatMode) {\n      setShowModeMenu(false);\n      return;\n    }\n    \n    //    \n    const modeName = newMode === 'basic' ? '' : '';\n    const modeDescription = newMode === 'basic' \n      ? '      '\n      : '    ';\n    showNotificationDirect(`  : ${modeName}`, modeDescription, 'success');\n\n    const cleanSessionId = sessionId ? parseInt(sessionId.toString().replace(/[^0-9]/g, '')) : null;\n    \n    if (!cleanSessionId) {\n      //   ,     (    )\n      setChatMode(newMode);\n      setShowModeMenu(false);\n      return;\n    }\n\n    try {\n      //    API\n      const response = await axios.patch(\n        getApiUrl(`/chat/sessions/${cleanSessionId}/mode`),\n        null,\n        {\n          params: { chat_mode: newMode },\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        }\n      );\n\n      if (response.data) {\n        setChatMode(newMode);\n        setShowModeMenu(false);\n      }\n    } catch (error) {\n      console.error('  :', error);\n      showNotificationDirect('    ', '  ', 'error');\n    }\n  };\n\n  //  \n  const sendMessage = async () => {\n    const messageText = inputMessage.trim();\n    if (!messageText || isGenerating) return;\n\n    //  session_id  \n    const cleanSessionId = sessionId ? parseInt(sessionId.toString().replace(/[^0-9]/g, '')) : null;\n\n    const userMessage = {\n      id: `msg_${Date.now()}`,\n      type: 'user',\n      content: messageText,\n      timestamp: new Date().toISOString(),\n      files: attachedFiles\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setInputMessage('');\n    setAttachedFiles([]);\n    setIsGenerating(true);\n    setGenerationStartTime(Date.now());\n    setLastError(null);\n\n    try {\n      //    HTTP API, WebSocket     \n      const requestPayload = {\n        message: messageText,\n        session_id: cleanSessionId,\n        set_chat_mode: chatMode  //   \n      };\n      \n      console.log(' :', { \n        message: messageText.substring(0, 50), \n        sessionId: cleanSessionId,\n        url: getApiUrl('/chat/message')\n      });\n      \n      //    SSE (Server-Sent Events)\n      const streamUrl = getApiUrl('/chat/message/stream');\n      const controller = new AbortController();\n      currentStreamRef.current = controller;\n\n      const authToken = localStorage.getItem('token');\n      const resp = await fetch(streamUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'text/event-stream',\n          'Cache-Control': 'no-cache',\n          'Authorization': authToken ? `Bearer ${authToken}` : ''\n        },\n        cache: 'no-store',\n        body: JSON.stringify(requestPayload),\n        signal: controller.signal\n      });\n\n      if (!resp.ok || !resp.body) {\n        const errText = await resp.text().catch(() => '');\n        throw new Error(`Streaming request failed: ${resp.status} ${errText}`);\n      }\n\n      //   AI-   \n      const aiMsgId = `ai_${Date.now()}`;\n      setMessages(prev => [...prev, { id: aiMsgId, type: 'ai', content: '', timestamp: new Date().toISOString() }]);\n\n      const reader = resp.body.getReader();\n      const decoder = new TextDecoder('utf-8');\n      let buffer = '';\n\n      const applyChunk = (text) => {\n        setMessages(prev => prev.map(m => m.id === aiMsgId ? { ...m, content: (m.content || '') + text } : m));\n      };\n\n      while (true) {\n        const { value, done } = await reader.read();\n        if (done) break;\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split(/\\n\\n/);\n        buffer = lines.pop() || '';\n        for (const block of lines) {\n          //   SSE:   \"data: {json}\"\n          const dataLine = block.split('\\n').find(l => l.startsWith('data:'));\n          if (!dataLine) continue;\n          const payload = dataLine.replace(/^data:\\s?/, '');\n          try {\n            const evt = JSON.parse(payload);\n            if (evt.type === 'start' && evt.session_id) {\n              //  sessionId     (   )\n              console.log(' session_id  :', evt.session_id, ':', sessionId);\n              if (!sessionId || sessionId !== evt.session_id) {\n                setSessionId(evt.session_id);\n                console.log(' sessionId :', evt.session_id);\n              }\n            } else if (evt.type === 'chunk' && typeof evt.content === 'string') {\n              applyChunk(evt.content);\n            } else if (evt.type === 'end') {\n              // \n            } else if (evt.type === 'error') {\n              throw new Error(evt.content || 'stream error');\n            }\n          } catch (_) {\n            //      \n            applyChunk(payload);\n          }\n        }\n      }\n\n      setIsGenerating(false);\n      setGenerationStartTime(null);\n    } catch (error) {\n      console.error('  :', error);\n      \n      //       ,   \n      const isAborted = (currentStreamRef.current && currentStreamRef.current.signal?.aborted) \n        || error?.name === 'AbortError' \n        || String(error?.message || error).toLowerCase().includes('aborted');\n      \n      setIsGenerating(false);\n      setGenerationStartTime(null);\n      \n      if (isAborted) {\n        showGenerationStopped();\n        return; //       \n      }\n      \n      setLastError(error);\n      \n      //         \n      // -   ,     \n      console.error('  :', error);\n      \n      //   -      \n      if (!isAborted) {\n        showError(error, {\n          autoHide: false,\n          actions: [\n            {\n              label: '',\n              action: () => sendMessage(),\n              primary: true\n            }\n          ]\n        });\n      }\n      \n      //         \n      let errorText = '    .';\n      \n      //       \n      const errorMessage = String(error?.message || error || '').toLowerCase();\n      if (errorMessage.includes('timeout') || errorMessage.includes('[timeout]')) {\n        errorText = '    (300 ).    . :\\n  \\n      \\n  ,      ';\n      } else if (error.response) {\n        const status = error.response.status;\n        const data = error.response.data;\n        \n        if (status === 408) {\n          errorText = '   .        .';\n        } else if (status === 503) {\n          errorText = '  .     .';\n        } else if (status === 401) {\n          errorText = ' . ,  .';\n        } else if (status === 429) {\n          errorText = '  .     .';\n        } else if (status >= 500) {\n          errorText = ' .      .';\n        } else if (data?.detail || data?.message) {\n          errorText = data.detail || data.message;\n        }\n      } else if (error.request) {\n        errorText = '    .    .';\n      }\n      \n      const errorMsg = {\n        id: `error_${Date.now()}`,\n        type: 'error',\n        content: errorText,\n        timestamp: new Date().toISOString(),\n        error: error\n      };\n      setMessages(prev => [...prev, errorMsg]);\n    }\n  };\n\n  //  \n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  //        (  )\n  useEffect(() => {\n    const handleClickOutside = (e) => {\n      //        \n      if (window.innerWidth >= 768 && isInputExpanded) {\n        const inputArea = e.target.closest('[data-input-area]');\n        if (!inputArea) {\n          setIsInputExpanded(false);\n        }\n      }\n    };\n\n    if (isInputExpanded && window.innerWidth >= 768) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [isInputExpanded]);\n\n  //       \n  useEffect(() => {\n    const handleClickOutside = (e) => {\n      if (modeMenuRef.current && !modeMenuRef.current.contains(e.target)) {\n        setShowModeMenu(false);\n      }\n    };\n\n    if (showModeMenu) {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [showModeMenu]);\n\n  return (\n    <div className=\"flex h-full bg-gray-50 dark:bg-gray-900 overflow-x-hidden\">\n      {/*     -   ,    */}\n      <div className={`hidden md:flex md:flex-col md:h-full ${isHistoryCollapsed ? 'w-16' : 'w-80'} transition-all duration-300 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex-shrink-0 overflow-hidden`}>\n        <ChatHistory \n          isCollapsed={isHistoryCollapsed}\n          onToggle={() => {\n            setIsHistoryCollapsed(!isHistoryCollapsed);\n            setFocusHistorySearch(false);\n          }}\n          onToggleCollapse={() => {\n            setIsHistoryCollapsed(!isHistoryCollapsed);\n            setFocusHistorySearch(false);\n          }}\n          currentSessionId={sessionId}\n          onSessionSelect={(id) => {\n            console.log('onSessionSelect   id:', id, ' sessionId:', sessionId);\n            setSessionId(id);\n          }}\n          onNewChat={(newSessionId) => {\n            setSessionId(newSessionId);\n            //     useEffect   sessionId\n          }}\n          focusSearch={focusHistorySearch}\n        />\n      </div>\n\n      {/*      */}\n      {!isHistoryCollapsed && (\n        <div \n          className=\"md:hidden fixed inset-0 z-[60] flex\" \n          style={{ zIndex: 60 }}\n        >\n          {/* Overlay */}\n          <div \n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300\"\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              setIsHistoryCollapsed(true);\n            }}\n          />\n          {/*  */}\n          <div \n            className=\"relative w-full max-w-[320px] bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-out z-[61] shadow-2xl\"\n            onClick={(e) => e.stopPropagation()}\n            style={{ zIndex: 61 }}\n          >\n            <div className=\"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between bg-white dark:bg-gray-800\">\n              <h2 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\"> </h2>\n              <button\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  setIsHistoryCollapsed(true);\n                }}\n                className=\"p-3 min-h-[44px] min-w-[44px] text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-all flex items-center justify-center touch-manipulation shadow-sm hover:shadow-md flex-shrink-0\"\n                aria-label=\" \"\n                title=\" \"\n                type=\"button\"\n              >\n                <ChevronLeft className=\"w-6 h-6\" />\n              </button>\n            </div>\n            <ChatHistory \n              isCollapsed={false}\n              hideHeader={true}\n              onToggle={() => {\n                setIsHistoryCollapsed(true);\n                setFocusHistorySearch(false);\n              }}\n              onToggleCollapse={() => {\n                setIsHistoryCollapsed(true);\n                setFocusHistorySearch(false);\n              }}\n              currentSessionId={sessionId}\n              onSessionSelect={(id) => {\n                console.log('onSessionSelect ( )   id:', id, ' sessionId:', sessionId);\n                setSessionId(id);\n                setIsHistoryCollapsed(true);\n                setFocusHistorySearch(false);\n              }}\n              onNewChat={(newSessionId) => {\n                setSessionId(newSessionId);\n                //     useEffect   sessionId\n                setIsHistoryCollapsed(true);\n                setFocusHistorySearch(false);\n              }}\n              focusSearch={focusHistorySearch}\n            />\n          </div>\n        </div>\n      )}\n\n      {/*   -     */}\n      <div className=\"flex-1 flex flex-col overflow-hidden overflow-x-hidden min-w-0 max-w-full\">\n        {/*  */}\n        <div className=\"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 sm:px-6 py-4 flex-shrink-0\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              {/*      */}\n              <button\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  setIsHistoryCollapsed(prev => !prev);\n                }}\n                className=\"md:hidden p-2.5 min-w-[44px] min-h-[44px] text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-all flex items-center justify-center touch-manipulation shadow-sm hover:shadow-md\"\n                aria-label=\" \"\n                title=\" \"\n                type=\"button\"\n              >\n                <History className=\"w-5 h-5\" />\n              </button>\n              <div className=\"w-10 h-10 bg-blue-600 dark:bg-primary-500 rounded-full flex items-center justify-center neon-glow-purple\">\n                <Bot className=\"w-6 h-6 text-white\" />\n              </div>\n              <div>\n                <h1 className=\"text-xl font-semibold text-gray-900 dark:text-gray-100\">  </h1>\n                <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1 hidden sm:block\">  AI -</p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-2\">\n              {/*      */}\n              {(!isConnected && connectionState === 'failed') && (\n                <button\n                  onClick={forceReconnect}\n                  className=\"flex items-center space-x-1 px-3 py-1 text-sm bg-blue-600 dark:bg-primary-600 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-primary-700 transition-colors neon-button-primary\"\n                  title=\"  \"\n                >\n                  <RefreshCw className=\"w-4 h-4\" />\n                  <span className=\"hidden sm:inline\"></span>\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/*   -  */}\n        <div\n          className=\"flex-1 overflow-y-auto overflow-x-hidden p-3 sm:p-6 space-y-4 dark:bg-gray-900 min-h-0\"\n          ref={messagesContainerRef}\n          onScroll={handleContainerScroll}\n          role=\"log\"\n          aria-live=\"polite\"\n          aria-label=\"Chat messages\"\n        >\n          {messages.map((message) => (\n            <div key={message.id} className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}>\n              <div className={`${message.type === 'user' ? 'max-w-[85%] md:max-w-[80%] ml-auto' : 'w-full'}`}>\n                <div className={`flex items-start space-x-3 ${message.type === 'user' ? 'flex-row-reverse space-x-reverse' : ''}`}>\n                  <div className={`w-[35px] h-[35px] md:w-10 md:h-10 rounded-full flex items-center justify-center ${\n                    message.type === 'user' ? 'bg-blue-600 dark:bg-primary-600 neon-glow-cyan' : 'bg-gray-600 dark:bg-gray-700 neon-glow-purple'\n                  }`}>\n                    {message.type === 'user' ? (\n                      <User className=\"w-[18px] h-[18px] md:w-5 md:h-5 text-white\" />\n                    ) : (\n                      <Bot className=\"w-[18px] h-[18px] md:w-5 md:h-5 text-white\" />\n                    )}\n                  </div>\n                  \n                  <div className={`${\n                    message.type === 'user' \n                      ? 'px-4 py-3 rounded-lg bg-blue-600 dark:bg-primary-600 text-white neon-card' \n                      : message.type === 'error'\n                      ? ''\n                      : 'px-4 py-3 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border border-gray-200 dark:border-gray-700 neon-glass-card'\n                  }`}>\n                    {message.type === 'error' ? (\n                      <ErrorMessage\n                        error={message.error || message.content}\n                        onRetry={() => {\n                          //   \n                          const lastUserMessage = messages.slice().reverse().find(m => m.type === 'user');\n                          if (lastUserMessage) {\n                            setInputMessage(lastUserMessage.content);\n                          }\n                        }}\n                        onReconnect={forceReconnect}\n                        variant=\"default\"\n                      />\n                    ) : (\n                      <>\n                        <EnhancedResponse message={message} />\n                        <div className=\"flex items-center justify-between mt-3\">\n                          <div className=\"text-xs opacity-70\">\n                            {new Date(message.timestamp).toLocaleTimeString()}\n                          </div>\n                          {message.type === 'ai' && message.id === 'welcome' && (\n                            <FeedbackButtons messageId={message.id} />\n                          )}\n                        </div>\n                      </>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n          \n          {isGenerating && (\n            <div className=\"flex justify-start\">\n              <div className=\"w-full\">\n                <div className=\"flex items-start space-x-3\">\n                  <div className=\"w-[35px] h-[35px] md:w-10 md:h-10 rounded-full bg-gray-600 flex items-center justify-center\">\n                    <Bot className=\"w-[18px] h-[18px] md:w-5 md:h-5 text-white\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    <AIThinkingIndicator\n                      isGenerating={isGenerating}\n                      startTime={generationStartTime}\n                      onStop={stopGeneration}\n                      variant=\"default\"\n                      estimatedTime={120} // 2   \n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n          \n          <div ref={messagesEndRef} />\n        </div>\n\n        {/*   -  ,   */}\n        <div \n          ref={inputAreaRef}\n          data-input-area\n          className=\"bg-transparent p-3 sm:p-4 md:p-6 flex-shrink-0 z-40 transition-all duration-300 safe-bottom\"\n          style={{\n            paddingBottom: 'max(12px, env(safe-area-inset-bottom, 0px))'\n          }}\n          onMouseEnter={() => {\n            if (window.innerWidth >= 768) {\n              setIsInputExpanded(true);\n            }\n          }}\n          onMouseLeave={() => {\n            if (window.innerWidth >= 768) {\n              setIsInputExpanded(false);\n            }\n          }}\n          onTouchStart={() => {\n            //        \n            if (window.innerWidth < 768) {\n              setIsInputExpanded(true);\n            }\n          }}\n        >\n          {/*   placeholder -       */}\n          <style>{`\n            #chat-input-textarea {\n              text-align: left;\n            }\n            #chat-input-textarea::placeholder {\n              text-align: left;\n            }\n          `}</style>\n          {/*   */}\n          {attachedFiles.length > 0 && (\n            <div className=\"mb-3 flex flex-wrap gap-2\">\n              {attachedFiles.map((file, index) => (\n                <div key={index} className=\"flex items-center space-x-2 bg-gray-100 dark:bg-gray-700 px-3 py-2 rounded-xl\">\n                  <File className=\"w-4 h-4 text-gray-600 dark:text-gray-300\" />\n                  <span className=\"text-sm text-gray-700 dark:text-gray-300\">{file.name}</span>\n                  <button\n                    onClick={() => setAttachedFiles(prev => prev.filter((_, i) => i !== index))}\n                    className=\"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200\"\n                  >\n                    <X className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/*   -    ( 3) */}\n          {isInputExpanded && (\n            <div className=\"flex items-center gap-2 mb-3 animate-slide-in-up overflow-x-auto -mx-3 sm:-mx-4 px-3 sm:px-4\">\n              <button\n                onClick={() => setShowFileUpload(!showFileUpload)}\n                className=\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-xl transition-all min-h-[44px] touch-manipulation flex-shrink-0 whitespace-nowrap\"\n                title=\" \"\n                aria-label=\"Attach file\"\n              >\n                <Paperclip className=\"w-4 h-4 flex-shrink-0\" />\n                <span className=\"hidden sm:inline\"></span>\n              </button>\n              <button\n                onClick={() => setShowTemplates(!showTemplates)}\n                className=\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-xl transition-all min-h-[44px] touch-manipulation flex-shrink-0 whitespace-nowrap\"\n                title=\" \"\n                aria-label=\"Question templates\"\n              >\n                <Lightbulb className=\"w-4 h-4 flex-shrink-0\" />\n                <span className=\"hidden sm:inline\"></span>\n              </button>\n            </div>\n          )}\n\n          {/*    */}\n          <div className=\"flex items-center gap-2 sm:gap-3\">\n            {/*     -  ,     */}\n            <div className=\"relative\" ref={modeMenuRef}>\n              <button\n                onClick={() => setShowModeMenu(!showModeMenu)}\n                className=\"h-[48px] w-[48px] sm:h-[52px] sm:w-[52px] bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 hover:text-primary-600 dark:hover:text-primary-400 rounded-xl transition-all flex items-center justify-center touch-manipulation shadow-md hover:shadow-lg flex-shrink-0 border border-gray-200 dark:border-gray-600\"\n                title=\" \"\n                aria-label=\"Mode settings\"\n              >\n                <Settings className=\"w-5 h-5 sm:w-6 sm:h-6\" />\n              </button>\n              \n              {/*    */}\n              {showModeMenu && (\n                <>\n                  <div \n                    className=\"fixed inset-0 z-40\" \n                    onClick={() => setShowModeMenu(false)}\n                  />\n                  <div \n                    className=\"absolute bottom-full left-0 mb-2 w-72 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 py-2 z-50\"\n                    onClick={(e) => e.stopPropagation()}\n                  >\n                    <div className=\"px-4 py-2 border-b border-gray-200 dark:border-gray-700\">\n                      <h3 className=\"text-sm font-semibold text-gray-900 dark:text-gray-100\"> </h3>\n                    </div>\n                    \n                    {/*   */}\n                    <button\n                      onClick={(e) => {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        handleModeChange('basic').catch(err => console.error(':', err));\n                      }}\n                      className=\"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\n                    >\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\"></span>\n                            {chatMode === 'basic' && (\n                              <Check className=\"w-4 h-4 text-primary-600 dark:text-primary-400\" />\n                            )}\n                          </div>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                                  ,   .\n                          </p>\n                        </div>\n                      </div>\n                    </button>\n                    \n                    {/*   */}\n                    <button\n                      onClick={(e) => {\n                        e.preventDefault();\n                        e.stopPropagation();\n                        handleModeChange('expert').catch(err => console.error(':', err));\n                      }}\n                      className=\"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-t border-gray-200 dark:border-gray-700\"\n                    >\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\"></span>\n                            {chatMode === 'expert' && (\n                              <Check className=\"w-4 h-4 text-primary-600 dark:text-primary-400\" />\n                            )}\n                          </div>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                                   \n                          </p>\n                        </div>\n                      </div>\n                    </button>\n                  </div>\n                </>\n              )}\n            </div>\n            \n            {/*         ( 3) */}\n            <div className=\"flex-1 relative min-w-0\">\n              <div \n                className={`\n                  rounded-3xl\n                  border-[3px] sm:border-[4px]\n                  border-primary-500 dark:border-primary-600\n                  bg-white dark:bg-gray-700\n                  backdrop-blur-xl\n                  transition-all duration-300\n                  flex items-center\n                  ${isInputExpanded \n                    ? 'shadow-[0_0_30px_rgba(37,99,235,0.5),0_10px_40px_rgba(0,0,0,0.3)] border-primary-600 dark:border-primary-500 ring-4 ring-primary-500/20 dark:ring-primary-600/20' \n                    : 'shadow-[0_4px_20px_rgba(0,0,0,0.15),0_8px_30px_rgba(0,0,0,0.1)] border-primary-500 dark:border-primary-600'\n                  }\n                `}\n                style={{ height: '48px', minHeight: '48px' }}\n              >\n                <textarea\n                  ref={textareaRef}\n                  id=\"chat-input-textarea\"\n                  value={inputMessage}\n                  onChange={(e) => setInputMessage(e.target.value)}\n                  onKeyPress={handleKeyPress}\n                  onFocus={() => {\n                    setIsInputExpanded(true);\n                  }}\n                  onTouchStart={() => {\n                    setIsInputExpanded(true);\n                  }}\n                  onBlur={(e) => {\n                    //      blur,   \n                    if (window.innerWidth >= 768) {\n                      const relatedTarget = e.relatedTarget;\n                      if (!relatedTarget || !relatedTarget.closest('[data-input-area]')) {\n                        setTimeout(() => {\n                          if (document.activeElement !== textareaRef.current) {\n                            setIsInputExpanded(false);\n                          }\n                        }, 200);\n                      }\n                    }\n                  }}\n                  placeholder=\"  ...\"\n                  className=\"\n                    w-full px-3 sm:px-4\n                    bg-transparent\n                    text-gray-900 dark:text-gray-100\n                    placeholder-gray-500 dark:placeholder-gray-400\n                    text-base\n                    transition-all duration-300\n                    focus:outline-none\n                    focus:ring-0\n                    resize-none\n                    leading-normal\n                    border-0\n                    overflow-hidden\n                  \"\n                  style={{\n                    height: '100%',\n                    paddingTop: '10px',\n                    paddingBottom: '10px',\n                    lineHeight: '20px',\n                    verticalAlign: 'middle',\n                    maxHeight: '48px'\n                  }}\n                  rows={1}\n                  disabled={isGenerating}\n                  aria-label=\"Type your message\"\n                  aria-describedby=\"input-help\"\n                />\n              </div>\n              <span id=\"input-help\" className=\"sr-only\">\n                Press Enter to send, Shift+Enter for new line\n              </span>\n            </div>\n            \n            {/*    -  ,     */}\n            <button\n              onClick={() => setShowVoiceRecorder(!showVoiceRecorder)}\n              className=\"h-[48px] w-[48px] sm:h-[52px] sm:w-[52px] bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 hover:text-primary-600 dark:hover:text-primary-400 rounded-xl transition-all flex items-center justify-center touch-manipulation shadow-md hover:shadow-lg flex-shrink-0 border border-gray-200 dark:border-gray-600\"\n              title=\" \"\n              aria-label=\"Voice input\"\n            >\n              <Mic className=\"w-5 h-5 sm:w-6 sm:h-6\" />\n            </button>\n            \n            {/*   -      */}\n            {inputMessage.trim() && (\n              <button\n                onClick={sendMessage}\n                disabled={!inputMessage.trim() || isGenerating}\n                className=\"h-[48px] w-[48px] sm:h-[52px] sm:w-[52px] p-2.5 sm:p-3 bg-primary-600 text-white rounded-xl hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center shadow-lg touch-manipulation flex-shrink-0\"\n                title=\" \"\n                aria-label=\"Send message\"\n              >\n                <Send className=\"w-5 h-5\" />\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/*   */}\n      {showFileUpload && (\n        <LazyFileUpload\n          onClose={() => setShowFileUpload(false)}\n          onFilesSelected={(files) => setAttachedFiles(prev => [...prev, ...files])}\n        />\n      )}\n      \n      {showTemplates && (\n        <LazyQuestionTemplates\n          isVisible={showTemplates}\n          onClose={() => setShowTemplates(false)}\n          onTemplateSelect={(template) => {\n            setInputMessage(template);\n            setShowTemplates(false);\n          }}\n        />\n      )}\n      \n      {showVoiceRecorder && (\n        <VoiceRecorder\n          onClose={() => setShowVoiceRecorder(false)}\n          onRecordingComplete={(audioBlob) => {\n            //   \n            console.log('Audio recorded:', audioBlob);\n          }}\n        />\n      )}\n\n      {/*     (   ) */}\n      <StatusNotificationSystem\n        websocket={websocket}\n        isGenerating={false}\n        generationStartTime={generationStartTime}\n        onStopGeneration={stopGeneration}\n        onReconnect={forceReconnect}\n        onForceReconnect={forceReconnect}\n      />\n\n\n      {/* Screen reader announcements */}\n      <div \n        role=\"status\" \n        aria-live=\"polite\" \n        aria-atomic=\"true\" \n        className=\"sr-only\"\n      >\n        {announcement}\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;\n"],"names":["Lightbulb","createLucideIcon","d","key","File","points","PenLine","ChevronUp","Check","Bot","width","height","x","y","rx","Mic","x1","x2","y1","y2","Send","constructor","url","options","arguments","length","undefined","this","_objectSpread","maxReconnectAttempts","reconnectDelay","maxReconnectDelay","pingInterval","pongTimeout","connectionTimeout","maxMessageSize","enableHeartbeat","enableAutoReconnect","enableErrorRecovery","ws","reconnectAttempts","isConnected","isConnecting","shouldReconnect","listeners","Map","lastPong","messageQueue","maxQueueSize","connectionStats","totalConnections","totalReconnections","totalMessages","totalErrors","lastConnectedAt","lastDisconnectedAt","connectionDuration","averageLatency","errorRate","connectionState","errorRecovery","consecutiveErrors","lastErrorTime","errorTypes","recoveryStrategies","initializeRecoveryStrategies","set","maxAttempts","delay","action","async","console","log","emit","navigator","onLine","connect","Promise","resolve","reject","WebSocket","connectTimeout","setTimeout","readyState","CONNECTING","close","Error","onopen","clearTimeout","Date","startPingPong","flushMessageQueue","onmessage","event","data","JSON","parse","type","handlePong","error","onclose","code","reason","stopPingPong","handleClose","scheduleReconnect","onerror","now","errorType","classifyError","handleErrorRecovery","recoverable","isErrorRecoverable","disconnect","send","message","stringify","size","maxSize","OPEN","queueMessage","catch","originalError","queued","shift","push","unshift","includes","strategy","get","warn","concat","errorCount","attempts","attempt","recoveryError","waitForNetworkRecovery","baseDelay","Math","min","pow","attemptReconnect","clear","checkNetwork","window","removeEventListener","addEventListener","intervalCheck","setInterval","clearInterval","pingData","timestamp","on","callback","has","Set","add","off","delete","_len","args","Array","_key","forEach","getStatus","connected","connecting","CLOSED","queuedMessages","stats","getUserFriendlyStatus","statusMap","text","color","icon","reconnect","resetErrorRecovery","checkConnectionHealth","health","timeSinceLastPong","networkOnline","isHealthy","getRecoveryRecommendations","recommendations","applyRecoveryRecommendation","useStatusNotifications","showError","useCallback","statusNotifications","showSuccess","showInfo","info","showModelUnavailable","removeNotification","id","showConnectionError","title","autoHide","actions","label","location","reload","primary","showAuthError","href","showGenerationStopped","duration","showGenerationTimeout","_ref","onSendVoiceMessage","onCancel","maxDuration","isRecording","setIsRecording","useState","isPaused","setIsPaused","recordingTime","setRecordingTime","audioBlob","setAudioBlob","audioUrl","setAudioUrl","isPlaying","setIsPlaying","volume","setVolume","isMuted","setIsMuted","setError","mediaRecorderRef","useRef","audioRef","streamRef","timerRef","chunksRef","isDark","useTheme","useEffect","current","getTracks","track","stop","URL","revokeObjectURL","stopRecording","audio","handleEnded","handlePlay","handlePause","formatTime","seconds","mins","floor","secs","toString","padStart","_jsxs","className","children","_jsx","ref","src","onVolumeChange","e","target","map","_","i","style","random","animationDelay","onClick","mediaDevices","getUserMedia","stream","echoCancellation","noiseSuppression","sampleRate","mediaRecorder","MediaRecorder","mimeType","ondataavailable","onstop","blob","Blob","createObjectURL","start","prev","err","_Fragment","togglePause","resume","pause","Play","Pause","Square","togglePlayback","play","VolumeX","Volume2","sendVoiceMessage","cancelRecording","Trash2","toFixed","Eraser","currentSessionId","onSessionSelect","onNewChat","isCollapsed","onToggleCollapse","focusSearch","hideHeader","sessions","setSessions","loading","setLoading","editingSession","setEditingSession","editTitle","setEditTitle","showEmptyChats","setShowEmptyChats","searchQuery","setSearchQuery","searchResults","setSearchResults","isSearching","setIsSearching","sessionMessages","setSessionMessages","searchInputRef","React","loadSessions","response","axios","getApiUrl","params","include_empty","sortedSessions","sort","a","b","dateA","updated_at","created_at","handleNewChat","newSession","post","toLocaleDateString","saveTitle","put","sessionId","trim","s","cancelEditing","formatDate","dateString","date","diffDays","toLocaleTimeString","hour","minute","day","month","truncateTitle","maxLength","substring","searchInHistory","query","lowerQuery","toLowerCase","results","titleMatches","filter","session","sessionTitle","matchType","matchText","find","messages","messageMatches","msg","content","matchCount","timeoutId","_searchInputRef$curre","focus","filteredSessions","useMemo","matchedSessionIds","r","preventDefault","stopPropagation","ChevronRight","ChevronLeft","Plus","searchMatch","MessageSquare","value","onChange","onKeyPress","autoFocus","X","last_message_preview","Clock","last_message_time","startEditing","Edit3","confirm","handleDeleteSession","Search","onFocus","placeholder","display","Calendar","confirmMessage","handleClearAllHistory","enhancements","showDetails","setShowDetails","showSources","setShowSources","showWarnings","setShowWarnings","messageEnhancements","factChecking","fact_checking","explainability","rawQuality","overall_quality","overallQuality","hasQualityRating","qualityInfo","quality","level","bg","formatMetric","Shield","Object","keys","Target","ChevronDown","sources","FileText","warnings","AlertTriangle","citation_recall","support_coverage","hallucination_score","legal_consistency","source","index","article","part","item","edition","excerpt","rel","ExternalLink","relevance_score","round","warning","user_actions","CheckCircle","argument","confidence","metadata","toLocaleString","sources_count","messageId","onFeedbackSubmitted","feedback","setFeedback","showReasonModal","setShowReasonModal","selectedReason","setSelectedReason","comment","setComment","isSubmitting","setIsSubmitting","ThumbsUp","ThumbsDown","token","localStorage","getItem","process","message_id","rating","headers","Authorization","alert","disabled","handleNegativeFeedback","name","checked","rows","Server","ry","Wifi","onRetry","onReconnect","showIcon","variant","errorInfo","_error$response","_error$message","_error$message2","AlertCircle","WifiOff","Zap","status","request","getErrorInfo","Icon","getColorClasses","colorMap","red","orange","yellow","blue","getButtonColorClasses","renderActions","RefreshCw","open","isGenerating","onStop","startTime","estimatedTime","elapsedTime","setElapsedTime","thinkingPhase","setThinkingPhase","thinkingPhases","Brain","interval","elapsed","phase","currentPhase","PhaseIcon","motion","div","animate","rotate","transition","repeat","Infinity","ease","AnimatePresence","mode","span","initial","opacity","exit","_websocket$options2","websocket","onForceReconnect","setStatus","isVisible","setIsVisible","showDetailedInfo","setShowDetailedInfo","lastError","setLastError","reconnectCountdown","setReconnectCountdown","updateStatus","currentStatus","userStatus","handleStateChange","state","handleError","startCountdown","_websocket$options","actualDelay","ceil","countdownInterval","handleReconnectClick","getStatusColor","getStatusIcon","Activity","StatusNotification","_ref2","notification","onClose","styles","success","getNotificationStyles","generationStartTime","onStopGeneration","notifications","setNotifications","connectionError","setConnectionError","modelError","setModelError","lastNotificationRef","debounceTimersRef","n","addNotification","notificationKey","lastShown","timerId","newNotification","values","timer","stateChangeTimer","errorTimer","lastState","errorNotification","AIThinkingIndicator","EnhancedConnectionStatus","scale","Chat","setMessages","inputMessage","setInputMessage","setIsGenerating","setGenerationStartTime","setSessionId","attachedFiles","setAttachedFiles","showFileUpload","setShowFileUpload","showTemplates","setShowTemplates","showVoiceRecorder","setShowVoiceRecorder","isInputExpanded","setIsInputExpanded","showModeMenu","setShowModeMenu","chatMode","setChatMode","modeNotification","setModeNotification","inputAreaRef","modeMenuRef","isHistoryCollapsed","setIsHistoryCollapsed","innerWidth","focusHistorySearch","setFocusHistorySearch","messagesEndRef","messagesContainerRef","textareaRef","autoScrollRef","currentStreamRef","initializedRef","announcement","setAnnouncement","scrollToBottom","el","scrollTop","scrollHeight","stopGeneration","handleNewMessage","messageData","aiMessage","toISOString","sendChatMessage","wsSendChatMessage","wsStopGeneration","forceReconnect","useChatWebSocket","onNewMessage","onTyping","onSessionUpdate","user","useAuth","typingTimeoutRef","isTypingRef","websocketRef","setIsConnected","setConnectionState","createWebSocket","cleanSessionId","String","replace","wsBaseUrl","ResilientWebSocket","user_id","is_typing","sendMessage","payload","session_id","sendTyping","isTyping","joinSession","newSessionId","abort","caches","then","cacheNames","cacheName","apiUrl","messagesData","_sessionResponse$data","sessionResponse","chat_mode","formattedMessages","role","_error$response2","_error$response3","_error$response3$data","detail","loadSessionMessages","lastMessage","preview","handleResize","visualViewport","innerHeight","handleWindowResize","isMobile","document","body","overflow","handleEscape","showNotificationDirect","description","old","getElementById","remove","documentElement","classList","contains","matchMedia","matches","bgColor","textColor","borderColor","closeBtnColor","html","insertAdjacentHTML","handleModeChange","newMode","modeDescription","parseInt","patch","messageText","userMessage","files","requestPayload","set_chat_mode","streamUrl","controller","AbortController","authToken","resp","fetch","method","cache","signal","ok","errText","aiMsgId","reader","getReader","decoder","TextDecoder","buffer","applyChunk","m","done","read","decode","lines","split","pop","block","dataLine","l","startsWith","evt","_currentStreamRef$cur","isAborted","aborted","errorText","errorMessage","errorMsg","handleClickOutside","closest","ChatHistory","onToggle","zIndex","History","onScroll","handleContainerScroll","isNearBottom","clientHeight","User","ErrorMessage","lastUserMessage","slice","reverse","EnhancedResponse","FeedbackButtons","paddingBottom","onMouseEnter","onMouseLeave","onTouchStart","file","Paperclip","Settings","minHeight","shiftKey","onBlur","relatedTarget","activeElement","paddingTop","lineHeight","verticalAlign","maxHeight","LazyFileUpload","onFilesSelected","LazyQuestionTemplates","onTemplateSelect","template","VoiceRecorder","onRecordingComplete","StatusNotificationSystem"],"sourceRoot":""}