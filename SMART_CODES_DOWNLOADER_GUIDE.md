# üöÄ –£–º–Ω—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫ –∫–æ–¥–µ–∫—Å–æ–≤ - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## ‚úÖ –†–µ—à–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ!

**–ü—Ä–æ–±–ª–µ–º–∞**: –°—Ç–∞—Ä—ã–µ URL –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ —Ç–æ–ª—å–∫–æ —Ç–∏—Ç—É–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (2-11 —Å—Ç—Ä–∞–Ω–∏—Ü –≤–º–µ—Å—Ç–æ 300-700)

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É —á–µ—Ä–µ–∑ API:
```
http://publication.pravo.gov.ru/file/pdf?eoNumber=EO_NUMBER
```

–≠—Ç–æ **–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–ø–æ–ª–Ω—ã–π PDF –∫–æ–¥–µ–∫—Å**!

---

## üìã –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –£–º–Ω—ã–π –∑–∞–≥—Ä—É–∑—á–∏–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cd /root/advakod
python3 backend/scripts/smart_download_codes.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ API
- ‚úÖ –°–∫–∞—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–µ PDF –∫–æ–¥–µ–∫—Å—ã (300-700 —Å—Ç—Ä–∞–Ω–∏—Ü)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ JSON
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `SmartCodesDownloader` –≤–º–µ—Å—Ç–æ `CodesDownloader`:

```python
from app.services.smart_codes_downloader import SmartCodesDownloader

downloader = SmartCodesDownloader()
summary = await downloader.download_all_codexes()
```

---

## üéØ –ß—Ç–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–¥–µ–∫—Å—ã (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1):
- ‚úÖ –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–π –∫–æ–¥–µ–∫—Å –†–§ (—á–∞—Å—Ç–∏ 1-4) - ~645-700 —Å—Ç—Ä–∞–Ω–∏—Ü
- ‚úÖ –¢—Ä—É–¥–æ–≤–æ–π –∫–æ–¥–µ–∫—Å –†–§ - ~400 —Å—Ç—Ä–∞–Ω–∏—Ü
- ‚úÖ –ù–∞–ª–æ–≥–æ–≤—ã–π –∫–æ–¥–µ–∫—Å –†–§ (—á–∞—Å—Ç–∏ 1-2) - ~500+ —Å—Ç—Ä–∞–Ω–∏—Ü
- ‚úÖ –£–≥–æ–ª–æ–≤–Ω—ã–π –∫–æ–¥–µ–∫—Å –†–§ - ~300+ —Å—Ç—Ä–∞–Ω–∏—Ü

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–¥–µ–∫—Å—ã (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2):
- ‚úÖ –°–µ–º–µ–π–Ω—ã–π –∫–æ–¥–µ–∫—Å –†–§
- ‚úÖ –ñ–∏–ª–∏—â–Ω—ã–π –∫–æ–¥–µ–∫—Å –†–§
- ‚úÖ –ë—é–¥–∂–µ—Ç–Ω—ã–π –∫–æ–¥–µ–∫—Å –†–§
- ‚úÖ –ö–æ–¥–µ–∫—Å –æ–± –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∞–≤–æ–Ω–∞—Ä—É—à–µ–Ω–∏—è—Ö –†–§
- ‚úÖ –ò –µ—â–µ 15+ –∫–æ–¥–µ–∫—Å–æ–≤

**–í—Å–µ–≥–æ: 23 –∫–æ–¥–µ–∫—Å–∞**

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤ (—Ä–µ–∞–ª—å–Ω—ã–µ):
- –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–π –∫–æ–¥–µ–∫—Å: **5-10 –ú–ë** (645-700 —Å—Ç—Ä–∞–Ω–∏—Ü)
- –ù–∞–ª–æ–≥–æ–≤—ã–π –∫–æ–¥–µ–∫—Å: **5-8 –ú–ë** (500+ —Å—Ç—Ä–∞–Ω–∏—Ü)
- –£–≥–æ–ª–æ–≤–Ω—ã–π –∫–æ–¥–µ–∫—Å: **3-5 –ú–ë** (300+ —Å—Ç—Ä–∞–Ω–∏—Ü)
- –¢—Ä—É–¥–æ–≤–æ–π –∫–æ–¥–µ–∫—Å: **3-4 –ú–ë** (400 —Å—Ç—Ä–∞–Ω–∏—Ü)

**–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä –≤—Å–µ—Ö –∫–æ–¥–µ–∫—Å–æ–≤: ~100-150 –ú–ë**

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **API –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö**: 
   ```
   GET http://publication.pravo.gov.ru/api/Document?eoNumber=EO_NUMBER
   ```
   –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: –Ω–∞–∑–≤–∞–Ω–∏–µ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü, —Ä–∞–∑–º–µ—Ä PDF, –¥–∞—Ç—ã –∏ —Ç.–¥.

2. **–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ PDF**:
   ```
   GET http://publication.pravo.gov.ru/file/pdf?eoNumber=EO_NUMBER
   ```
   –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: **–ø–æ–ª–Ω—ã–π PDF —Ñ–∞–π–ª –∫–æ–¥–µ–∫—Å–∞**

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –Ω–µ –Ω—É–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å HTML
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - API –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–µ —Ñ–∞–π–ª—ã
‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å** - –ø—Ä—è–º–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ PDF
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤—Å–µ—Ö –∫–æ–¥–µ–∫—Å–æ–≤
‚úÖ **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ–º –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

---

## üö® –í–∞–∂–Ω–æ!

### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ eo_number –¥–ª—è –∫–æ–¥–µ–∫—Å–æ–≤:

**–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞—Ä—ã–µ URL –≤–∏–¥–∞:**
```
http://pravo.gov.ru/proxy/ips/?docbody=...&link=0001201410140002
```

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä—è–º—ã–µ eo_number:**
```
0001201410140002 - –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∏–π –∫–æ–¥–µ–∫—Å –†–§ (—á–∞—Å—Ç—å 1)
0001201412140001 - –¢—Ä—É–¥–æ–≤–æ–π –∫–æ–¥–µ–∫—Å –†–§
0001201905010039 - –ù–∞–ª–æ–≥–æ–≤—ã–π –∫–æ–¥–µ–∫—Å –†–§ (—á–∞—Å—Ç—å 1)
0001202203030006 - –£–≥–æ–ª–æ–≤–Ω—ã–π –∫–æ–¥–µ–∫—Å –†–§
```

**–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤ `smart_codes_downloader.py`**

---

## üìù –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
import asyncio
from app.services.smart_codes_downloader import SmartCodesDownloader

async def main():
    downloader = SmartCodesDownloader()
    
    # –°–∫–∞—á–∞—Ç—å –≤—Å–µ –∫–æ–¥–µ–∫—Å—ã
    summary = await downloader.download_all_codexes()
    
    print(f"–°–∫–∞—á–∞–Ω–æ: {summary['successful']}/{summary['total_codexes']}")
    print(f"–†–∞–∑–º–µ—Ä: {summary['total_size_mb']} –ú–ë")

asyncio.run(main())
```

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π

### –û–±–Ω–æ–≤–∏—Ç—å CodesDownloader:

–°—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥:
```python
await downloader.download_pdf(url, filename)
```

–ù–æ–≤—ã–π –º–µ—Ç–æ–¥ (—Å eo_number):
```python
await downloader.download_pdf(url, filename, eo_number=eo_number)
```

### –û–±–Ω–æ–≤–∏—Ç—å UnifiedCodexSystem:

–ó–∞–º–µ–Ω–∏—Ç—å `CodesDownloader` –Ω–∞ `SmartCodesDownloader` –≤ `unified_codex_system.py`

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤**:
   ```bash
   ls -lh data/codes_downloads/*.pdf
   ```
   –î–æ–ª–∂–Ω—ã –±—ã—Ç—å **–ú–ë**, –∞ –Ω–µ –ö–ë!

2. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü**:
   ```bash
   python3 -c "import pypdf; pdf = pypdf.PdfReader('data/codes_downloads/0001201410140002_*.pdf'); print(len(pdf.pages))"
   ```
   –î–æ–ª–∂–Ω–æ –±—ã—Ç—å **300-700 —Å—Ç—Ä–∞–Ω–∏—Ü**, –∞ –Ω–µ 2-11!

3. **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**:
   ```bash
   cat data/codes_downloads/0001201410140002.json | grep pages_count
   ```
   –î–æ–ª–∂–Ω–æ –±—ã—Ç—å **300-700**, –∞ –Ω–µ 2-11!

---

## üéâ –ò—Ç–æ–≥

**–†–µ—à–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ!**

- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ - –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç
- ‚úÖ –ù–∞–¥–µ–∂–Ω–æ–µ - —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ API
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ - –¥–ª—è –≤—Å–µ—Ö –∫–æ–¥–µ–∫—Å–æ–≤
- ‚úÖ –ü–æ–ª–Ω–æ–µ - —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤

**–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏ –ø–æ–ª—É—á–∏—Ç–µ –ø–æ–ª–Ω—ã–µ –∫–æ–¥–µ–∫—Å—ã!**

```bash
python3 backend/scripts/smart_download_codes.py
```

