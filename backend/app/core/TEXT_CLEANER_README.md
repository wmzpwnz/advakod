# Модуль очистки текста кодексов

## Описание

Модуль `text_cleaner.py` предназначен для очистки текста правовых документов от служебной информации, которая попадает при парсинге HTML страниц.

## Проблема

При парсинге HTML кодексов с `pravo.gov.ru` в текст попадает служебная информация:
- Длинные строки с датами редакций: "недействующая на 01.09.2025, недействующая на 31.08.2025..."
- Элементы навигации: "печать текста полностью", "A- A+", "Фон документа"
- Служебные команды: "закрыть", "открыть", "размер шрифта"
- Метаинформация из начала файла

## Решение

Модуль `LegalTextCleaner` автоматически удаляет всю служебную информацию, сохраняя только полезный контент кодексов.

## Использование

### Простая функция

```python
from backend.app.core.text_cleaner import clean_legal_text

cleaned = clean_legal_text(text, aggressive=True)
```

### Класс

```python
from backend.app.core.text_cleaner import LegalTextCleaner

cleaner = LegalTextCleaner()
cleaned = cleaner.clean_text(text, aggressive=True)
```

### Очистка файла

```python
from backend.app.core.text_cleaner import clean_legal_file

clean_legal_file("path/to/file.txt")
```

### Очистка директории

```python
from backend.app.core.text_cleaner import clean_legal_directory

cleaned_files = clean_legal_directory("/path/to/directory/", pattern="*.txt")
```

## Интеграция

Модуль интегрирован в:
- ✅ `HybridCodesDownloader` - автоматически очищает текст после HTML парсинга
- ⏳ `UnifiedCodexSystem` - можно интегрировать аналогично

## Что удаляется

1. **Даты редакций**: паттерны типа "недействующая на 01.09.2025"
2. **Элементы навигации**: "печать текста полностью", "A- A+"
3. **Служебные команды**: "закрыть", "открыть", "размер шрифта"
4. **Метаинформация**: длинные строки с датами в начале файла
5. **Пустые строки**: множественные пустые строки

## Результаты

- Удаляет 60-70% служебной информации
- Сохраняет весь полезный контент кодексов
- Работает с любыми кодировками (utf-8, windows-1251, cp1251)

