# üöÄ –ê–î–í–ê–ö–û–î - –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å Vistral-24B + Borealis

## üìä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–°–µ—Ä–≤–µ—Ä:**
- IP: 31.130.145.75
- CPU: 10 —è–¥–µ—Ä √ó 3.3 –ì–ì—Ü
- RAM: 40 –ì–ë
- NVMe: 200 –ì–ë

**–ú–æ–¥–µ–ª–∏:**
- Vistral-24B-Instruct-GGUF (~15 GB) - AI-—é—Ä–∏—Å—Ç
- Borealis (~1-2 GB) - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
1. **1_setup_server.sh** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (Docker, firewall, swap)
2. **2_download_models.sh** - –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π Vistral + Borealis
3. **download_vistral_and_borealis.sh** - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∑–∫–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
1. **DEPLOY_INSTRUCTIONS.md** - –ü–æ–ª–Ω–∞—è –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
2. **QUICK_START.md** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –∫–æ–º–∞–Ω–¥)
3. **VISTRAL_MIGRATION_COMPLETE_GUIDE.md** - –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

### –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏:
1. **.kiro/specs/vistral-24b-migration/requirements.md** - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
2. **.kiro/specs/vistral-24b-migration/design.md** - –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
3. **.kiro/specs/vistral-24b-migration/tasks.md** - –ü–ª–∞–Ω –∑–∞–¥–∞—á

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@31.130.145.75

# 2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä (—Å –≤–∞—à–µ–π –º–∞—à–∏–Ω—ã)
scp 1_setup_server.sh 2_download_models.sh root@31.130.145.75:/root/

# 3. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
cd /root
chmod +x *.sh
bash 1_setup_server.sh  # 5-10 –º–∏–Ω—É—Ç
bash 2_download_models.sh  # 20-40 –º–∏–Ω—É—Ç

# 4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
scp -r backend frontend docker-compose.prod.yml nginx.conf root@31.130.145.75:/opt/advakod/

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ
cd /opt/advakod
docker-compose -f docker-compose.prod.yml up -d
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–π

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ **DEPLOY_INSTRUCTIONS.md**

---

## üéØ –ß—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

### –§—É–Ω–∫—Ü–∏–∏:
‚úÖ –¢–µ–∫—Å—Ç–æ–≤—ã–π —á–∞—Ç —Å AI-—é—Ä–∏—Å—Ç–æ–º (Vistral-24B)
‚úÖ –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –≤–æ–ø—Ä–æ—Å–æ–≤ (Borealis)
‚úÖ RAG —Å–∏—Å—Ç–µ–º–∞ (–ø–æ–∏—Å–∫ –ø–æ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º)
‚úÖ –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Qdrant)
‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ (Redis)
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (PostgreSQL)
‚úÖ WebSocket –¥–ª—è real-time —á–∞—Ç–∞
‚úÖ REST API

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: 8-20 —Å–µ–∫—É–Ω–¥
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏: 1-3 —Å–µ–∫—É–Ω–¥—ã
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ—Å—Ç—å: 2-3 –∑–∞–ø—Ä–æ—Å–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM: 28-35 GB –∏–∑ 40 GB

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL:**
   ```bash
   apt install certbot python3-certbot-nginx
   certbot --nginx -d yourdomain.com
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω:**
   - –î–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å—å –Ω–∞ IP 31.130.145.75
   - –û–±–Ω–æ–≤–∏—Ç–µ CORS_ORIGINS –≤ .env

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - Prometheus + Grafana
   - –ê–ª–µ—Ä—Ç—ã –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:**
   - –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
   - –ì–æ–ª–æ—Å–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
   - –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

5. **–°–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å:**
   - –û—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ö–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤
   - –°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã

---

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
docker-compose -f docker-compose.prod.yml logs -f backend
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫:
```bash
docker-compose -f docker-compose.prod.yml restart backend
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
docker-compose -f docker-compose.prod.yml down
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:
```bash
git pull
docker-compose -f docker-compose.prod.yml up -d --build
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è:
```bash
curl http://localhost/api/v1/health
curl http://localhost/ready
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:
```bash
free -h          # –ü–∞–º—è—Ç—å
docker stats     # Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
htop             # CPU
df -h            # –î–∏—Å–∫
```

---

## üêõ Troubleshooting

### –ú–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs backend | grep -i error

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–º—è—Ç—å
free -h

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–æ–¥–µ–ª—å
ls -lh /opt/advakod/models/vistral-24b.gguf
```

### Out of Memory:
```bash
# –£–≤–µ–ª–∏—á—å—Ç–µ swap
swapoff /swapfile
rm /swapfile
fallocate -l 16G /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile
```

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è:
```bash
# –£–≤–µ–ª–∏—á—å—Ç–µ VISTRAL_N_THREADS –≤ .env
VISTRAL_N_THREADS=10

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
docker-compose restart backend
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- DEPLOY_INSTRUCTIONS.md - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- QUICK_START.md - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- VISTRAL_MIGRATION_COMPLETE_GUIDE.md - –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

**–õ–æ–≥–∏:**
```bash
docker-compose logs -f backend
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
curl http://localhost/api/v1/health
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

- [ ] –°–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω (1_setup_server.sh)
- [ ] –ú–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã (2_download_models.sh)
- [ ] –ü—Ä–æ–µ–∫—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] .env —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ü–∞—Ä–æ–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã
- [ ] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
- [ ] –ú–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –ø–∞–º—è—Ç—å
- [ ] /api/v1/health –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç OK
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] SSL –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –î–æ–º–µ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à AI-—é—Ä–∏—Å—Ç —Å –≥–æ–ª–æ—Å–æ–≤—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!

**–ú–æ–¥–µ–ª–∏:**
- ‚úÖ Vistral-24B-GGUF - –û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å
- ‚úÖ Borealis - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏

**–°–µ—Ä–≤–µ—Ä:**
- ‚úÖ 10 CPU, 40 GB RAM, 200 GB NVMe
- ‚úÖ Docker + Docker Compose
- ‚úÖ Firewall + Fail2ban
- ‚úÖ Swap 8 GB

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –û—Ç–≤–µ—Ç –∑–∞ 8-20 —Å–µ–∫—É–Ω–¥
- ‚úÖ –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ –∑–∞ 1-3 —Å–µ–∫—É–Ω–¥—ã
- ‚úÖ 2-3 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞

---

**–í–µ—Ä—Å–∏—è:** 2.0.0  
**–î–∞—Ç–∞:** 2024-01-22  
**–ê–≤—Ç–æ—Ä:** –ê–î–í–ê–ö–û–î Team